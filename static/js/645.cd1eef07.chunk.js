"use strict";(self.webpackChunkbuild_iq_app=self.webpackChunkbuild_iq_app||[]).push([[645],{8645:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var r,a,i=n(969),l=n(734),o=n(55),c=n(9457),s="customers",u="Customer",d=[{items:[{label:"Customer",icon:"pi ml-3",template:(r=s,(0,o.E7)("/".concat(c.o,"/").concat(r)+(a?"/comming-soon":"")))}]}],m=n(2723),p=n(6234),v=n(3953),f=n(7765),y=n(4756),E=n(1387),g=n(8224),h=n(8079),b=n(6593),C=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},S="/sale/customer/",T=b.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listCustomer:e.query({query:function(e){var t=e.page,n=e.size;return{url:(0,b.DS)(S,"?page=".concat(t||1,"&page_size=").concat(n||b.IV))}},providesTags:function(e){var t;return e?[].concat((0,h.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:b.pJ.CUSTOMER,id:t}}))),[{type:b.pJ.CUSTOMER,id:"LIST"}]):[{type:b.pJ.CUSTOMER,id:"LIST"}]}}),addCustomer:e.mutation({query:function(e){return{url:S,method:"POST",body:e}},invalidatesTags:[{type:b.pJ.CUSTOMER,id:"LIST"}]}),getCustomer:e.query({query:function(e){return"".concat(S).concat(e)},providesTags:function(e,t,n){return[{type:b.pJ.CUSTOMER,id:n}]}}),updateCustomer:e.mutation({query:function(e){var t=e.key,n=C(e,["key"]);return{url:"".concat(S).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:b.pJ.CUSTOMER,id:null===e||void 0===e?void 0:e.id}]}}),getStates:e.query({query:function(){return{url:"/geo/state/"}},providesTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[].concat((0,h.Z)(e.map((function(e){var t=e.state_key;return{type:b.pJ.STATES,id:t}}))),[{type:b.pJ.STATES,id:"LIST"}])}}),getCities:e.query({query:function(e){return{url:"/geo/city/?state=".concat(e)}},providesTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[].concat((0,h.Z)(e.map((function(e){var t=e.city_key;return{type:b.pJ.CITIES,id:t}}))),[{type:b.pJ.CITIES,id:"LIST"}])}}),deleteCustomer:e.mutation({query:function(e){return{url:"".concat(S).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:b.pJ.CUSTOMER,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),A=T.useAddCustomerMutation,O=T.useDeleteCustomerMutation,L=T.useGetCustomerQuery,k=T.useListCustomerQuery,N=T.useUpdateCustomerMutation,q=(T.useGetErrorProneQuery,T.useGetCitiesQuery),w=T.useGetStatesQuery,x=(T.endpoints.getCustomer,function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{c(r.next(e))}catch(t){i(t)}}function o(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}c((r=r.apply(e,t||[])).next())}))}),_={client_id:"1001",company:"TEST"},j=function(e){var t=(0,i.useRef)(null),n=(0,i.useState)(!1),r=(0,p.Z)(n,2),a=r[0],d=r[1],h=(0,l.s0)(),C=(0,l.UO)().id,S=parseInt(C||""),T=isNaN(S)||S<=0,O=(0,i.useState)(""),k=(0,p.Z)(O,2),j=k[0],I=k[1],K=L(S,{skip:T}),P=K.data,J=K.isLoading,Q=w().data,R=q(j).data,U=A(),Z=(0,p.Z)(U,2),F=Z[0],M=Z[1].isLoading,W=N(),G=(0,p.Z)(W,2),H=G[0],D=G[1].isLoading,V=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"success",summary:e,detail:n,life:3e3})},z=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"error",summary:e,detail:n,life:3e3})},B=[{label:"Add",items:R||[]}];return i.createElement(i.Fragment,null,i.createElement(E.F,{ref:t}),i.createElement(o.Rm,{baseRoute:"/".concat(c.o,"/").concat(s),description:u,id:S,data:P,isUpdating:M||D||a,isLoading:J,onSubmit:function(e){return x(void 0,void 0,void 0,(0,m.Z)().mark((function t(){var n;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!T){t.next=7;break}return t.next=4,F(Object.assign(Object.assign({},e),_)).unwrap();case 4:n=t.sent,t.next=10;break;case 7:return t.next=9,H(Object.assign(Object.assign({},e),_)).unwrap();case 9:n=t.sent;case 10:V("Success",n.detail),d(!0),setTimeout((function(){h("/".concat(c.o,"/").concat(s))}),b.P7),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),z("An error occurred","We couldn't save your post, try again!");case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))},renderForm:function(e,t,n){var r,a,l,c;return i.createElement("div",{className:"pl-8"},i.createElement("div",{className:"field"},i.createElement("label",{htmlFor:"id",className:(0,y.AK)("col-2",{"p-error":n.id})},"Customer Code*"),i.createElement(v.Qr,{name:"id",control:e,rules:{required:"Item Code is required.",maxLength:{value:25,message:"max 25 Char"}},render:function(e){var t=e.field,n=e.fieldState;return i.createElement(f.o,Object.assign({disabled:!T,id:t.name},t,{className:(0,y.AK)({"p-invalid":n.invalid})}))}}),(0,o.Hb)(null===(r=null===n||void 0===n?void 0:n.id)||void 0===r?void 0:r.message)),i.createElement("div",{className:"field"},i.createElement("label",{htmlFor:"name",className:(0,y.AK)("col-2",{"p-error":n.name})},"Customer Name*"),i.createElement(v.Qr,{name:"name",control:e,rules:{required:"Item Description is required.",maxLength:{value:100,message:"max 100 Char"}},render:function(e){var t=e.field,n=e.fieldState;return i.createElement(f.o,Object.assign({style:{width:"40%"},id:t.name},t,{className:(0,y.AK)({"p-invalid":n.invalid})}))}}),(0,o.Hb)(null===(a=null===n||void 0===n?void 0:n.name)||void 0===a?void 0:a.message)),i.createElement("div",{className:"field"},i.createElement("label",{htmlFor:"addr1",className:(0,y.AK)("col-2",{"p-error":n.addr1})}," Address Line 1"),i.createElement(v.Qr,{name:"addr1",control:e,rules:{maxLength:{value:100,message:"max 100 Char"}},render:function(e){var t=e.field,n=e.fieldState;return i.createElement(f.o,Object.assign({id:t.name},t,{style:{width:"50%"},className:(0,y.AK)({"p-invalid":n.invalid})}))}})),i.createElement("div",{className:"field"},i.createElement("label",{htmlFor:"addr2",className:(0,y.AK)("col-2",{"p-error":n.addr2})}," Address Line 2"),i.createElement(v.Qr,{name:"addr2",control:e,rules:{maxLength:{value:100,message:"max 100 Char"}},render:function(e){var t=e.field,n=e.fieldState;return i.createElement(f.o,Object.assign({id:t.name},t,{style:{width:"50%"},className:(0,y.AK)({"p-invalid":n.invalid})}))}})),i.createElement("div",{className:"field"},i.createElement("label",{htmlFor:"state_key",className:(0,y.AK)("col-2",{"p-error":n.state_key})},"State*"),i.createElement(v.Qr,{name:"state_key",control:e,rules:{required:"State is required."},render:function(e){var t=e.field,n=e.fieldState;return i.createElement(g.L,Object.assign({id:t.name},t,{style:{width:"30%"},className:(0,y.AK)({"p-invalid":n.invalid}),onChange:function(e){I(e.value),t.onChange(e.value)},optionLabel:"name",optionValue:"key",filter:!0,filterBy:"name",options:Q}))}}),(0,o.Hb)(null===(l=null===n||void 0===n?void 0:n.state_key)||void 0===l?void 0:l.message)),i.createElement("div",{className:"field"},i.createElement("label",{htmlFor:"city_key",className:(0,y.AK)("col-2",{"p-error":n.descr})},"City*"),i.createElement(v.Qr,{name:"city_key",control:e,rules:{required:"City is required."},render:function(e){var t=e.field,n=e.fieldState;return i.createElement(g.L,Object.assign({optionGroupTemplate:i.createElement("div",{style:{cursor:"pointer",textAlign:"center",backgroundColor:"lightgray"},onClick:function(){return h("/projects/city")}},"--Add And Edit--"),id:t.name},t,{style:{width:"30%"},className:(0,y.AK)({"p-invalid":n.invalid}),optionValue:"key",optionGroupLabel:"label",optionLabel:"name",optionGroupChildren:"items",options:B}))}}),(0,o.Hb)(null===(c=null===n||void 0===n?void 0:n.city_key)||void 0===c?void 0:c.message)))}}))},I=function(e){var t=k({}),n=t.data,r=t.isLoading,a=O(),l=(0,p.Z)(a,2),d=l[0],m=l[1].isLoading;return i.createElement(o.PS,{baseRoute:"/".concat(c.o,"/").concat(s),description:u,isLoading:r||m,data:null===n||void 0===n?void 0:n.results,deleteAction:function(e){return d(e).unwrap()},newTable:!0,showHeader:!0},i.createElement(o._P,{field:"id",header:"Customer Code",filteringType:"number"}),i.createElement(o._P,{field:"name",header:"Customer Name",filteringType:"text"}))},K=i.createElement(l.AW,{path:s},i.createElement(l.AW,{path:"new",element:i.createElement(j,null)}),i.createElement(l.AW,{path:":id/edit",element:i.createElement(j,null)}),i.createElement(l.AW,{index:!0,element:i.createElement(I,null)})),P=function(){return i.createElement(l.Z5,null,i.createElement(l.AW,{path:"/",element:i.createElement(o.SV,{navItems:d})},i.createElement(l.AW,{index:!0,element:i.createElement(l.Fg,{to:s,replace:!0})}),K,i.createElement(l.AW,{path:":page/comming-soon",element:i.createElement(o.hg,null)}),i.createElement(l.AW,{path:"*",element:i.createElement(o.EN,{relative:!0})})))}}}]);
//# sourceMappingURL=645.cd1eef07.chunk.js.map