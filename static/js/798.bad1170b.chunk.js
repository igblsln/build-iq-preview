"use strict";(self.webpackChunkbuild_iq_app=self.webpackChunkbuild_iq_app||[]).push([[798],{9798:function(e,t,n){n.r(t),n.d(t,{default:function(){return mt}});var a=n(969),l=n(734),o=n(8645),r=n(553),i=function(e,t){return(0,o.E7)("/".concat(r.o,"/").concat(e)+(t?"/comming-soon":""))},c=[{label:"Structure",className:"biq-dropdown-panelmenu",items:[{label:"Accessories",icon:"pi ml-3",template:i("accesories",!0)},{label:"Basement",icon:"pi ml-3",template:i("basement",!0)},{label:"Brickwork",icon:"pi ml-3",template:i("brickwork",!0)},{label:"Column",icon:"pi ml-3",template:i("column",!0)},{label:"Plastering",icon:"pi ml-3",template:i("plastering",!0)},{label:"Roof",icon:"pi ml-3",template:i("roof",!0)},{label:"Staircase",icon:"pi ml-3",template:i("staricase",!0)},{label:"Tank Details",icon:"pi ml-3",template:i("tankdetails",!0)},{label:"Terrace",icon:"pi ml-3",template:i("terrace",!0)}]},{label:"Fractional Material Pack",icon:"pi ml-3",className:"biq-panelmenu",template:i("fractionalmaterial")},{label:"Fractional Rod Pack",icon:"pi ml-3",className:"biq-panelmenu",template:i("fractionalrod")},{label:"Whole Rod Pack",icon:"pi ml-3",className:"biq-panelmenu",template:i("wholerod")},{label:"Components",className:"biq-dropdown-panelmenu",items:[{label:"Beam",icon:"pi ml-3",template:i("beam")},{label:"Column Body",icon:"pi ml-3",template:i("columnbody")},{label:"Column Footing",icon:"pi ml-3",template:i("columnfooting")},{label:"Cupboard",icon:"pi ml-3",template:i("cupboard")},{label:"Generic Tank",icon:"pi ml-3",template:i("generictank")},{label:"Kitchen Stage",icon:"pi ml-3",template:i("kitchenstage",!0)},{label:"Lift Footing",icon:"pi ml-3",template:i("liftfooting",!0)},{label:"Lintel Beam",icon:"pi ml-3",template:i("lintelbeam",!0)},{label:"Pile",icon:"pi ml-3",template:i("pile",!0)},{label:"Pile Cap",icon:"pi ml-3",template:i("pilecab",!0)},{label:"Slab",icon:"pi ml-3",template:i("slab",!0)},{label:"Staircase Slab",icon:"pi ml-3",template:i("staircaseslab",!0)}]},{label:"Bill of Quantity",icon:"pi ml-3",className:"biq-panelmenu",template:i("billofquantity",!0)},{label:"Cost Estimation",icon:"pi ml-3",className:"biq-panelmenu",template:i("costestimation",!0)}],s=n(2723),u=n(6234),d=n(8356),m=n(7765),p=n(6770),v=n(8224),f=n(8079),g=n(690),y="/estimation/fractional/material/",E=g.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listFractionalMaterial:e.query({query:function(e){var t=e.page,n=e.size,a=e.projectId,l=e.blockId;return{url:(0,g.DS)(y,"?page=".concat(t||1,"&page_size=").concat(n||g.IV,"&proj_key=").concat(a,"&projblk_key=").concat(l))}},providesTags:function(e){var t;return e?[].concat((0,f.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.key;return{type:g.pJ.FRACTIONAL_MATERIAL_PACK,key:t}}))),[{type:g.pJ.FRACTIONAL_MATERIAL_PACK,id:"LIST"}]):[{type:g.pJ.FRACTIONAL_MATERIAL_PACK,id:"LIST"}]}}),addFractionalMaterial:e.mutation({query:function(e){return{url:y,method:"POST",body:e}},invalidatesTags:[{type:g.pJ.FRACTIONAL_MATERIAL_PACK,id:"LIST"}]}),getFractionalMaterial:e.query({query:function(e){return"".concat(y).concat(e)},providesTags:function(e,t,n){return[{type:g.pJ.FRACTIONAL_MATERIAL_PACK,id:n}]}}),updateFractionalMaterial:e.mutation({query:function(e){var t=e;return{url:"".concat(y),method:"POST",body:t}},invalidatesTags:function(e){return[{type:g.pJ.FRACTIONAL_MATERIAL_PACK,id:null===e||void 0===e?void 0:e.key}]}}),deleteFractionalMaterial:e.mutation({query:function(e){return{url:"".concat(y).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:g.pJ.FRACTIONAL_MATERIAL_PACK,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),h=E.useAddFractionalMaterialMutation,b=E.useDeleteFractionalMaterialMutation,L=E.useGetFractionalMaterialQuery,k=E.useListFractionalMaterialQuery,N=E.useUpdateFractionalMaterialMutation,C=(E.useGetErrorProneQuery,n(4576)),w="fractionalmaterial",T="Fractional Material Pack",O=(0,a.forwardRef)((function(e,t){var n=e.data,l=e.isLoading,r=e.disableTable,i=void 0!==r&&r,c=e.selectedItemType,s=e.onChange,d=void 0===s?function(){}:s,m=(0,a.useState)([]),f=(0,u.Z)(m,2),y=f[0],E=f[1],h=(0,a.useRef)(y),b=(0,a.useRef)([]),L=(0,a.useRef)([]),k=(0,g.qu)(c,{skip:!c}),N=k.data,O=(k.isLoading,(0,g.U$)(c,{skip:!c})),S=O.data;O.isLoading;(0,a.useImperativeHandle)(t,(function(){return{getItems:function(){return y}}})),(0,a.useEffect)((function(){E(n),h.current=n}),[n]),(0,a.useEffect)((function(){b.current=(null===N||void 0===N?void 0:N.results)||[],L.current=S||[]}),[N,S]);return a.createElement(o.PS,{baseRoute:"/estimation/".concat(w),description:T,isLoading:l,data:y,newTable:!0,tableLayoutClass:"h-full",allowFilters:!1,hideActionColumn:i,actionBodyTemplate:function(e){return a.createElement(p.z,{style:{height:"35px",width:"20px",marginLeft:20},type:"button",onClick:function(){(0,C.V)({message:"Are you sure you want to Delete Item?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){return function(e){var t=h.current.filter((function(t){return t!==e}));h.current=t,E(t)}(e)},reject:function(){}})},className:"p-button-rounded p-button-text",icon:"pi pi-trash"})},gridProps:{allowAdd:!0,disableAdd:i||!(0,g.pH)(y),OnRowsChanged:function(e){var t=e;E(t),h.current=t,d(!0)}}},a.createElement(o._P,{field:"item_key",width:"35%",header:"Item Description*",displayValueGetter:function(e,t){var n,a;if(!Array.isArray(e)){var l=null===(n=b.current)||void 0===n?void 0:n.filter((function(n){return n.key===e[t]}));return l.length?l[0].descr:null===(a=null===e||void 0===e?void 0:e.items)||void 0===a?void 0:a.descr}},editorType:!i&&function(e){var t=e.row,n=e.column,l=e.onRowChange;e.onClose;return a.createElement(v.L,{autoFocus:!0,style:{width:"100%"},className:"p-inputtext-sm",value:t[n.key],optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",options:b.current,onChange:function(e){var a,o=Object.assign({},t);o[n.key]=e.value;var r=null===(a=b.current.filter((function(t){return t.key===e.value}))[0])||void 0===a?void 0:a.itemuom_key;o.itemuom_key=r,l(o,!0)},tabIndex:-1})}}),a.createElement(o._P,{field:"itemuom_key",width:"20%",header:"UOM*",displayValueGetter:function(e,t){var n,a;if(!Array.isArray(e)){var l=null===(n=L.current)||void 0===n?void 0:n.filter((function(n){return n.key===e[t]}));return l.length?l[0].descr:null===(a=null===e||void 0===e?void 0:e.items_uoms)||void 0===a?void 0:a.descr}},editorType:!i&&function(e){var t=e.row,n=e.column,l=e.onRowChange;e.onClose;return a.createElement(v.L,{autoFocus:!0,style:{width:"100%"},className:"p-inputtext-sm",value:t[n.key],optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",options:L.current,onChange:function(e){var a=Object.assign({},t);a[n.key]=e.value,l(a,!0)},tabIndex:-1})}}),a.createElement(o._P,{field:"qty",header:"Quantity",type:"number",editorType:!i&&"number"}),a.createElement(o._P,{width:"30%",field:"purpose",header:"Purpose",type:"text",editorType:!i&&"text"}))})),S=function(e,t,n,a){return new(n||(n=Promise))((function(l,o){function r(e){try{c(a.next(e))}catch(t){o(t)}}function i(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((a=a.apply(e,t||[])).next())}))},x=function(e){var t=(0,o.pm)(),n=t.showSuccess,r=t.showError,i=(0,a.useState)(!1),c=(0,u.Z)(i,2),f=c[0],y=c[1],E=(0,a.useState)(!1),b=(0,u.Z)(E,2),k=b[0],C=b[1],w=(0,a.useState)(""),x=(0,u.Z)(w,2),j=x[0],P=x[1],_=(0,a.useState)(""),A=(0,u.Z)(_,2),I=A[0],R=A[1],F=(0,a.useState)({}),B=(0,u.Z)(F,2),Z=B[0],M=B[1],W=(0,l.s0)(),D=(0,l.UO)().id,q=parseInt(D||""),U=isNaN(q)||q<=0,K=(0,a.useRef)(),V=(0,a.useRef)(),J=(0,l.TH)().state;!J&&U&&W("/estimation/fractionalmaterial");var Q=(0,g.ft)(),G=L(q,{skip:U,refetchOnMountOrArgChange:!0}),z=G.data,H=G.isLoading,X=(0,g.JB)(),Y=X.data,$=X.isLoading,ee=(0,g.cQ)({projectId:null===J||void 0===J?void 0:J.projectKey},{skip:!(null===J||void 0===J?void 0:J.projectKey)}),te=ee.data,ne=(ee.isLoading,(0,a.useState)([])),ae=(0,u.Z)(ne,2),le=ae[0],oe=ae[1],re=(0,a.useState)(null),ie=(0,u.Z)(re,2),ce=ie[0],se=ie[1],ue=(0,g.DU)(),de=ue.data,me=ue.isFetching,pe=(0,g.U$)(ce,{skip:!ce}),ve=pe.data,fe=(pe.isLoading,h()),ge=(0,u.Z)(fe,2),ye=ge[0],Ee=ge[1].isLoading,he=N(),be=(0,u.Z)(he,2),Le=be[0],ke=be[1].isLoading;(0,a.useEffect)((function(){M(z||Object.assign(Object.assign({},Q),{proj_key:null===J||void 0===J?void 0:J.projectKey,projblk_key:null===J||void 0===J?void 0:J.blockKey})),z&&(oe((null===z||void 0===z?void 0:z.items)||[]),se(z.itemtyp_key))}),[z]);return a.createElement(a.Fragment,null,a.createElement(o.Rm,{baseRoute:"/estimation/fractionalmaterial",description:T,id:q,data:Z,isUpdating:Ee||ke||f,ref:V,isItemsTableChanged:k,isLoading:H,onSubmit:function(e){return S(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var a,l,o,i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=null===(a=K.current)||void 0===a?void 0:a.getItems(),i=Object.assign(Object.assign({},e),{itemtyp_key:ce,items:o,base_qty:j,uom_key:I}),console.log(i),!U){t.next=10;break}return t.next=7,ye(Object.assign(Object.assign({},i),Q)).unwrap();case 7:l=t.sent,t.next=13;break;case 10:return t.next=12,Le(Object.assign(Object.assign(Object.assign({},i),Q),{key:null===z||void 0===z?void 0:z.key})).unwrap();case 12:l=t.sent;case 13:n("Success",l.detail),y(!0),setTimeout((function(){W("/estimation/fractionalmaterial")}),g.P7),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),r("An error occurred","We couldn't save your post, try again!");case 21:case"end":return t.stop()}}),t,null,[[0,18]])})))},renderForm:function(e,t,n,l){return a.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},a.createElement(o.Wi,{label:"Project",name:"proj_key",className:"col-10 md:col-6",control:e,errors:n,isLoading:$,leftSpan:4,rightSpan:6,formItem:{component:v.L,componentProps:{disabled:!0,optionLabel:"name",optionValue:"key",options:Y}}}),a.createElement(o.Wi,{className:"col-10 md:col-5",label:"Block",name:"projblk_key",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:v.L,componentProps:{disabled:!0,optionLabel:"descr",optionValue:"key",options:null===te||void 0===te?void 0:te.results}}}),a.createElement("div",{className:"col-10 md:col-1"},a.createElement(p.z,{disabled:!0,label:"Clear"})),a.createElement(d.i,null),a.createElement(o.Wi,{label:"Fractional Pack Name",className:"col-12",name:"name",control:e,errors:n,leftSpan:2,rightSpan:4,formItem:{component:m.o,componentProps:{maxLength:100}}}),a.createElement(o.Wi,{label:"Item Type",name:"itemtyp_key",className:"col-12",control:e,errors:n,isLoading:me,leftSpan:2,rightSpan:4,required:!0,useExplicit:!0,onChange:function(e){se(e.value)},formItem:{component:v.L,componentProps:{optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",options:null===de||void 0===de?void 0:de.results,value:ce}}}),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-6"},a.createElement("label",{className:"col-4"},"Base Quantity / UOM"),a.createElement(m.o,{className:"col-1",style:{marginLeft:4},placeholder:"",value:j,onChange:function(e){return P(e.target.value)}}),a.createElement("span",{className:"inputgroup-divider"},"/"),a.createElement(v.L,{className:"col-1",optionLabel:"descr",optionValue:"key",options:ve,value:I,onChange:function(e){return R(e.value)}})),a.createElement(o.Wi,{label:"Description",className:"col-12",name:"descr",control:e,errors:n,leftSpan:2,rightSpan:6,formItem:{component:m.o,componentProps:{style:{marginTop:"1rem"},maxLength:100}}}),a.createElement("div",{className:"col-12 ",style:{height:"calc(100% - 183px)",minHeight:200}},a.createElement(O,{selectedItemType:ce,data:le,isLoading:H,ref:K,onChange:function(e){return!k&&C(e)}})))}}))},j=n(4756),P=n(6822),_=function(e){var t=b(),n=(0,u.Z)(t,2),l=n[0],r=n[1].isLoading,i=(0,a.useState)(null),c=(0,u.Z)(i,2),s=c[0],m=c[1],f=(0,a.useState)(null),y=(0,u.Z)(f,2),E=y[0],h=y[1],L=(0,g.dx)({}).data,N=(0,g.cQ)({projectId:s},{skip:!s}),C=N.data,w=(N.isLoading,k({projectId:s,blockId:E},{skip:!s||!E})),O=w.data,S=w.isLoading;return a.createElement(a.Fragment,null,a.createElement("div",{className:"flex"},a.createElement("h3",{className:(0,j.AK)("m-0 my-auto")},T),a.createElement(P.rU,{to:{pathname:"/estimation/fractionalmaterial/new"},state:{projectKey:s,blockKey:E},className:s?"":"disabled-link",style:{textDecoration:"none",marginRight:"auto"}},a.createElement(p.z,{disabled:!s||!E,label:"Add",className:"ml-3"}))),a.createElement(d.i,null),a.createElement("div",{className:"pl-5 flex"},a.createElement("div",{className:"field",style:{width:"40%"}},a.createElement("label",{className:(0,j.AK)("col-3")},"Project"),a.createElement(v.L,{showClear:!0,style:{width:"60%"},optionLabel:"name",optionValue:"key",value:s,filter:!0,filterBy:"name",onChange:function(e){m(e.value),h(null)},options:null===L||void 0===L?void 0:L.results})),a.createElement("div",{className:"field",style:{width:"40%"}},a.createElement("label",{className:(0,j.AK)("col-3")},"Block"),a.createElement(v.L,{showClear:!0,style:{width:"60%"},optionLabel:"descr",optionValue:"key",value:E,filter:!0,filterBy:"descr",onChange:function(e){h(e.value)},options:null===C||void 0===C?void 0:C.results})),a.createElement("div",{className:"field",style:{width:"20%"}},a.createElement(p.z,{label:"Clear",onClick:function(e){e.preventDefault(),m(null),h(null)}}))),a.createElement(d.i,null),a.createElement(o.PS,{baseRoute:"/estimation/fractionalmaterial",description:T,isLoading:S||r,data:null===O||void 0===O?void 0:O.results,newTable:!0,allowFilters:!1,deleteAction:function(e){return l(e).unwrap()}},a.createElement(o._P,{field:"name",header:"Fractional Material Pack Name",filteringType:"text"}),a.createElement(o._P,{field:"vendor.name",header:"Description",filteringType:"text"}),a.createElement(o._P,{field:"project.name",header:"Item Type",filteringType:"text"}),a.createElement(o._P,{field:"status.descr",header:"UOM",filteringType:"text"})))},A=a.createElement(l.AW,{path:"fractionalmaterial"},a.createElement(l.AW,{path:"new",element:a.createElement(x,null)}),a.createElement(l.AW,{path:":id/edit",element:a.createElement(x,null)}),a.createElement(l.AW,{index:!0,element:a.createElement(_,null)})),I="/estimation/fractional/rod/",R=g.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listFractionalRod:e.query({query:function(e){var t=e.page,n=e.size,a=e.projectId,l=e.blockId;return{url:(0,g.DS)(I,"?page=".concat(t||1,"&page_size=").concat(n||g.IV,"&proj_key=").concat(a,"&projblk_key=").concat(l))}},providesTags:function(e){var t;return e?[].concat((0,f.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.key;return{type:g.pJ.FRACTIONAL_ROD_PACK,key:t}}))),[{type:g.pJ.FRACTIONAL_ROD_PACK,id:"LIST"}]):[{type:g.pJ.FRACTIONAL_ROD_PACK,id:"LIST"}]}}),addFractionalRod:e.mutation({query:function(e){return{url:I,method:"POST",body:e}},invalidatesTags:[{type:g.pJ.FRACTIONAL_ROD_PACK,id:"LIST"}]}),getFractionalRod:e.query({query:function(e){return"".concat(I).concat(e)},providesTags:function(e,t,n){return[{type:g.pJ.FRACTIONAL_ROD_PACK,id:n}]}}),updateFractionalRod:e.mutation({query:function(e){var t=e;return{url:"".concat(I),method:"POST",body:t}},invalidatesTags:function(e){return[{type:g.pJ.FRACTIONAL_ROD_PACK,id:null===e||void 0===e?void 0:e.key}]}}),deleteFractionalRod:e.mutation({query:function(e){return{url:"".concat(I).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:g.pJ.FRACTIONAL_ROD_PACK,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),F=R.useAddFractionalRodMutation,B=R.useDeleteFractionalRodMutation,Z=R.useGetFractionalRodQuery,M=R.useListFractionalRodQuery,W=R.useUpdateFractionalRodMutation,D=(R.useGetErrorProneQuery,"Fractional Rod Pack"),q=(0,a.forwardRef)((function(e,t){var n=e.data,l=e.isLoading,r=e.disableTable,i=void 0!==r&&r,c=e.selectedItemType,s=e.onChange,d=void 0===s?function(){}:s,m=(0,a.useState)([]),f=(0,u.Z)(m,2),y=f[0],E=f[1],h=(0,a.useRef)(y),b=(0,a.useRef)([]),L=(0,a.useRef)([]),k=(0,g.qu)(c,{skip:!c}),N=k.data,w=(k.isLoading,(0,g.U$)(c,{skip:!c})),T=w.data;w.isLoading;(0,a.useImperativeHandle)(t,(function(){return{getItems:function(){return y}}})),(0,a.useEffect)((function(){E(n),h.current=n}),[n]),(0,a.useEffect)((function(){b.current=(null===N||void 0===N?void 0:N.results)||[],L.current=T||[]}),[N,T]);return a.createElement(o.PS,{baseRoute:"/estimation/".concat("fractionalrod"),description:D,isLoading:l,data:y,newTable:!0,tableLayoutClass:"h-full",allowFilters:!1,hideActionColumn:i,actionBodyTemplate:function(e){return a.createElement(p.z,{style:{height:"35px",width:"20px",marginLeft:20},type:"button",onClick:function(){(0,C.V)({message:"Are you sure you want to Delete Item?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){return function(e){var t=h.current.filter((function(t){return t!==e}));h.current=t,E(t)}(e)},reject:function(){}})},className:"p-button-rounded p-button-text",icon:"pi pi-trash"})},gridProps:{allowAdd:!0,disableAdd:i||!(0,g.pH)(y),OnRowsChanged:function(e){var t=e;E(t),h.current=t,d(!0)}}},a.createElement(o._P,{field:"item_key",width:"25%",header:"Rod Size in MM*",displayValueGetter:function(e,t){var n,a;if(!Array.isArray(e)){var l=null===(n=b.current)||void 0===n?void 0:n.filter((function(n){return n.key===e[t]}));return l.length?l[0].descr:null===(a=null===e||void 0===e?void 0:e.items)||void 0===a?void 0:a.descr}},editorType:!i&&function(e){var t=e.row,n=e.column,l=e.onRowChange;e.onClose;return a.createElement(v.L,{autoFocus:!0,style:{width:"100%"},className:"p-inputtext-sm",value:t[n.key],optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",options:b.current,onChange:function(e){var a,o=Object.assign({},t);o[n.key]=e.value;var r=null===(a=b.current.filter((function(t){return t.key===e.value}))[0])||void 0===a?void 0:a.itemuom_key;o.itemuom_key=r,l(o,!0)},tabIndex:-1})}}),a.createElement(o._P,{field:"qty",header:"Rod Length",type:"number",editorType:!i&&"number"}),a.createElement(o._P,{field:"itemuom_key",header:"UOM*",displayValueGetter:function(e,t){var n,a;if(!Array.isArray(e)){var l=null===(n=L.current)||void 0===n?void 0:n.filter((function(n){return n.key===e[t]}));return l.length?l[0].descr:null===(a=null===e||void 0===e?void 0:e.items_uoms)||void 0===a?void 0:a.descr}},editorType:!i&&function(e){var t=e.row,n=e.column,l=e.onRowChange;e.onClose;return a.createElement(v.L,{autoFocus:!0,style:{width:"100%"},className:"p-inputtext-sm",value:t[n.key],optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",options:L.current,onChange:function(e){var a=Object.assign({},t);a[n.key]=e.value,l(a,!0)},tabIndex:-1})}}),a.createElement(o._P,{field:"qty",header:"Quantity",type:"number",editorType:!i&&"number"}),a.createElement(o._P,{width:"30%",field:"purpose",header:"Purpose",type:"text",editorType:!i&&"text"}))})),U=function(e,t,n,a){return new(n||(n=Promise))((function(l,o){function r(e){try{c(a.next(e))}catch(t){o(t)}}function i(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((a=a.apply(e,t||[])).next())}))},K=function(e){var t=(0,o.pm)(),n=t.showSuccess,r=t.showError,i=(0,a.useState)(!1),c=(0,u.Z)(i,2),f=c[0],y=c[1],E=(0,a.useState)(!1),h=(0,u.Z)(E,2),b=h[0],L=h[1],k=(0,a.useState)(""),N=(0,u.Z)(k,2),C=N[0],w=N[1],T=(0,a.useState)(""),O=(0,u.Z)(T,2),S=O[0],x=O[1],j=(0,a.useState)({}),P=(0,u.Z)(j,2),_=P[0],A=P[1],I=(0,l.s0)(),R=(0,l.UO)().id,B=parseInt(R||""),M=isNaN(B)||B<=0,K=(0,a.useRef)(),V=(0,a.useRef)(),J=(0,l.TH)().state;!J&&M&&I("/estimation/fractionalrod");var Q=(0,g.ft)(),G=Z(B,{skip:M,refetchOnMountOrArgChange:!0}),z=G.data,H=G.isLoading,X=(0,g.JB)(),Y=X.data,$=X.isLoading,ee=(0,g.cQ)({projectId:null===J||void 0===J?void 0:J.projectKey},{skip:!(null===J||void 0===J?void 0:J.projectKey)}),te=ee.data,ne=(ee.isLoading,(0,a.useState)([])),ae=(0,u.Z)(ne,2),le=ae[0],oe=ae[1],re=(0,a.useState)(null),ie=(0,u.Z)(re,2),ce=ie[0],se=ie[1],ue=(0,g.DU)(),de=ue.data,me=ue.isFetching,pe=(0,g.U$)(ce,{skip:!ce}),ve=pe.data,fe=(pe.isLoading,F()),ge=(0,u.Z)(fe,2),ye=ge[0],Ee=ge[1].isLoading,he=W(),be=(0,u.Z)(he,2),Le=be[0],ke=be[1].isLoading;(0,a.useEffect)((function(){A(z||Object.assign(Object.assign({},Q),{proj_key:null===J||void 0===J?void 0:J.projectKey,projblk_key:null===J||void 0===J?void 0:J.blockKey})),z&&(oe((null===z||void 0===z?void 0:z.items)||[]),se(z.itemtyp_key))}),[z]);return a.createElement(a.Fragment,null,a.createElement(o.Rm,{baseRoute:"/estimation/fractionalrod",description:D,id:B,data:_,isUpdating:Ee||ke||f,ref:V,isItemsTableChanged:b,isLoading:H,onSubmit:function(e){return U(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var a,l,o,i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=null===(a=K.current)||void 0===a?void 0:a.getItems(),i=Object.assign(Object.assign({},e),{itemtyp_key:ce,items:o,base_qty:C,uom_key:S}),console.log(i),!M){t.next=10;break}return t.next=7,ye(Object.assign(Object.assign({},i),Q)).unwrap();case 7:l=t.sent,t.next=13;break;case 10:return t.next=12,Le(Object.assign(Object.assign(Object.assign({},i),Q),{key:null===z||void 0===z?void 0:z.key})).unwrap();case 12:l=t.sent;case 13:n("Success",l.detail),y(!0),setTimeout((function(){I("/estimation/fractionalrod")}),g.P7),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),r("An error occurred","We couldn't save your post, try again!");case 21:case"end":return t.stop()}}),t,null,[[0,18]])})))},renderForm:function(e,t,n,l){return a.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},a.createElement(o.Wi,{label:"Project",name:"proj_key",className:"col-10 md:col-6",control:e,errors:n,isLoading:$,leftSpan:4,rightSpan:6,formItem:{component:v.L,componentProps:{disabled:!0,optionLabel:"name",optionValue:"key",options:Y}}}),a.createElement(o.Wi,{className:"col-10 md:col-5",label:"Block",name:"projblk_key",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:v.L,componentProps:{disabled:!0,optionLabel:"descr",optionValue:"key",options:null===te||void 0===te?void 0:te.results}}}),a.createElement("div",{className:"col-10 md:col-1"},a.createElement(p.z,{disabled:!0,label:"Clear"})),a.createElement(d.i,null),a.createElement(o.Wi,{label:"Fractional Pack Name",className:"col-12",name:"name",control:e,errors:n,leftSpan:2,rightSpan:4,formItem:{component:m.o,componentProps:{maxLength:100}}}),a.createElement(o.Wi,{label:"Item Type",name:"itemtyp_key",className:"col-12",control:e,errors:n,isLoading:me,leftSpan:2,rightSpan:4,required:!0,useExplicit:!0,onChange:function(e){se(e.value)},formItem:{component:v.L,componentProps:{optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",options:null===de||void 0===de?void 0:de.results,value:ce}}}),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-6"},a.createElement("label",{className:"col-4"},"Base Quantity / UOM"),a.createElement(m.o,{className:"col-1",style:{marginLeft:4},placeholder:"",value:C,onChange:function(e){return w(e.target.value)}}),a.createElement("span",{className:"inputgroup-divider"},"/"),a.createElement(v.L,{className:"col-1",optionLabel:"descr",optionValue:"key",options:ve,value:S,onChange:function(e){return x(e.value)}})),a.createElement(o.Wi,{label:"Description",className:"col-12",name:"descr",control:e,errors:n,leftSpan:2,rightSpan:6,formItem:{component:m.o,componentProps:{style:{marginTop:"1rem"},maxLength:100}}}),a.createElement("div",{className:"col-12 ",style:{height:"calc(100% - 183px)",minHeight:200}},a.createElement(q,{selectedItemType:ce,data:le,isLoading:H,ref:K,onChange:function(e){return!b&&L(e)}})))}}))},V=function(e){var t=B(),n=(0,u.Z)(t,2),l=n[0],r=n[1].isLoading,i=(0,a.useState)(null),c=(0,u.Z)(i,2),s=c[0],m=c[1],f=(0,a.useState)(null),y=(0,u.Z)(f,2),E=y[0],h=y[1],b=(0,g.dx)({}).data,L=(0,g.cQ)({projectId:s},{skip:!s}),k=L.data,N=(L.isLoading,M({projectId:s,blockId:E},{skip:!s||!E})),C=N.data,w=N.isLoading;return a.createElement(a.Fragment,null,a.createElement("div",{className:"flex"},a.createElement("h3",{className:(0,j.AK)("m-0 my-auto")},D),a.createElement(P.rU,{to:{pathname:"/estimation/fractionalrod/new"},state:{projectKey:s,blockKey:E},className:s?"":"disabled-link",style:{textDecoration:"none",marginRight:"auto"}},a.createElement(p.z,{disabled:!s||!E,label:"Add",className:"ml-3"}))),a.createElement(d.i,null),a.createElement("div",{className:"pl-5 flex"},a.createElement("div",{className:"field",style:{width:"40%"}},a.createElement("label",{className:(0,j.AK)("col-3")},"Project"),a.createElement(v.L,{showClear:!0,style:{width:"60%"},optionLabel:"name",optionValue:"key",value:s,filter:!0,filterBy:"name",onChange:function(e){m(e.value),h(null)},options:null===b||void 0===b?void 0:b.results})),a.createElement("div",{className:"field",style:{width:"40%"}},a.createElement("label",{className:(0,j.AK)("col-3")},"Block"),a.createElement(v.L,{showClear:!0,style:{width:"60%"},optionLabel:"descr",optionValue:"key",value:E,filter:!0,filterBy:"descr",onChange:function(e){h(e.value)},options:null===k||void 0===k?void 0:k.results})),a.createElement("div",{className:"field",style:{width:"20%"}},a.createElement(p.z,{label:"Clear",onClick:function(e){e.preventDefault(),m(null),h(null)}}))),a.createElement(d.i,null),a.createElement(o.PS,{baseRoute:"/estimation/fractionalrod",description:D,isLoading:w||r,data:null===C||void 0===C?void 0:C.results,newTable:!0,allowFilters:!1,deleteAction:function(e){return l(e).unwrap()}},a.createElement(o._P,{field:"name",header:"Fractional Rod Pack Name",filteringType:"text"}),a.createElement(o._P,{field:"vendor.name",header:"Description",filteringType:"text"}),a.createElement(o._P,{field:"project.name",header:"Item Type",filteringType:"text"}),a.createElement(o._P,{field:"status.descr",header:"Base UOM",filteringType:"text"})))},J=a.createElement(l.AW,{path:"fractionalrod"},a.createElement(l.AW,{path:"new",element:a.createElement(K,null)}),a.createElement(l.AW,{path:":id/edit",element:a.createElement(K,null)}),a.createElement(l.AW,{index:!0,element:a.createElement(V,null)})),Q="/estimation/whole/rod/",G=g.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listWholeRod:e.query({query:function(e){var t=e.page,n=e.size,a=e.projectId,l=e.blockId;return{url:(0,g.DS)(Q,"?page=".concat(t||1,"&page_size=").concat(n||g.IV,"&proj_key=").concat(a,"&projblk_key=").concat(l))}},providesTags:function(e){var t;return e?[].concat((0,f.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.key;return{type:g.pJ.WHOLE_ROD_PACK,key:t}}))),[{type:g.pJ.WHOLE_ROD_PACK,id:"LIST"}]):[{type:g.pJ.WHOLE_ROD_PACK,id:"LIST"}]}}),addWholeRod:e.mutation({query:function(e){return{url:Q,method:"POST",body:e}},invalidatesTags:[{type:g.pJ.WHOLE_ROD_PACK,id:"LIST"}]}),getWholeRod:e.query({query:function(e){return"".concat(Q).concat(e)},providesTags:function(e,t,n){return[{type:g.pJ.WHOLE_ROD_PACK,id:n}]}}),updateWholeRod:e.mutation({query:function(e){var t=e;return{url:"".concat(Q),method:"POST",body:t}},invalidatesTags:function(e){return[{type:g.pJ.WHOLE_ROD_PACK,id:null===e||void 0===e?void 0:e.key}]}}),deleteWholeRod:e.mutation({query:function(e){return{url:"".concat(Q).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:g.pJ.WHOLE_ROD_PACK,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),z=G.useAddWholeRodMutation,H=G.useDeleteWholeRodMutation,X=G.useGetWholeRodQuery,Y=G.useListWholeRodQuery,$=G.useUpdateWholeRodMutation,ee=(G.useGetErrorProneQuery,"Whole Rod Pack"),te=(0,a.forwardRef)((function(e,t){var n=e.data,l=e.isLoading,r=e.disableTable,i=void 0!==r&&r,c=e.selectedItemType,s=e.onChange,d=void 0===s?function(){}:s,m=(0,a.useState)([]),f=(0,u.Z)(m,2),y=f[0],E=f[1],h=(0,a.useRef)(y),b=(0,a.useRef)([]),L=(0,a.useRef)([]),k=(0,g.qu)(c,{skip:!c}),N=k.data,w=(k.isLoading,(0,g.U$)(c,{skip:!c})),T=w.data;w.isLoading;(0,a.useImperativeHandle)(t,(function(){return{getItems:function(){return y}}})),(0,a.useEffect)((function(){E(n),h.current=n}),[n]),(0,a.useEffect)((function(){b.current=(null===N||void 0===N?void 0:N.results)||[],L.current=T||[]}),[N,T]);return a.createElement(o.PS,{baseRoute:"/estimation/".concat("wholerod"),description:ee,isLoading:l,data:y,newTable:!0,tableLayoutClass:"h-full",allowFilters:!1,hideActionColumn:i,actionBodyTemplate:function(e){return a.createElement(p.z,{style:{height:"35px",width:"20px",marginLeft:20},type:"button",onClick:function(){(0,C.V)({message:"Are you sure you want to Delete Item?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){return function(e){var t=h.current.filter((function(t){return t!==e}));h.current=t,E(t)}(e)},reject:function(){}})},className:"p-button-rounded p-button-text",icon:"pi pi-trash"})},gridProps:{allowAdd:!0,disableAdd:i||!(0,g.pH)(y),OnRowsChanged:function(e){var t=e;E(t),h.current=t,d(!0)}}},a.createElement(o._P,{field:"item_key",width:"25%",header:"Rod Size in MM*",displayValueGetter:function(e,t){var n,a;if(!Array.isArray(e)){var l=null===(n=b.current)||void 0===n?void 0:n.filter((function(n){return n.key===e[t]}));return l.length?l[0].descr:null===(a=null===e||void 0===e?void 0:e.items)||void 0===a?void 0:a.descr}},editorType:!i&&function(e){var t=e.row,n=e.column,l=e.onRowChange;e.onClose;return a.createElement(v.L,{autoFocus:!0,style:{width:"100%"},className:"p-inputtext-sm",value:t[n.key],optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",options:b.current,onChange:function(e){var a,o=Object.assign({},t);o[n.key]=e.value;var r=null===(a=b.current.filter((function(t){return t.key===e.value}))[0])||void 0===a?void 0:a.itemuom_key;o.itemuom_key=r,l(o,!0)},tabIndex:-1})}}),a.createElement(o._P,{field:"qty",header:"Rod Length",type:"number",editorType:!i&&"number"}),a.createElement(o._P,{field:"itemuom_key",header:"UOM*",displayValueGetter:function(e,t){var n,a;if(!Array.isArray(e)){var l=null===(n=L.current)||void 0===n?void 0:n.filter((function(n){return n.key===e[t]}));return l.length?l[0].descr:null===(a=null===e||void 0===e?void 0:e.items_uoms)||void 0===a?void 0:a.descr}},editorType:!i&&function(e){var t=e.row,n=e.column,l=e.onRowChange;e.onClose;return a.createElement(v.L,{autoFocus:!0,style:{width:"100%"},className:"p-inputtext-sm",value:t[n.key],optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",options:L.current,onChange:function(e){var a=Object.assign({},t);a[n.key]=e.value,l(a,!0)},tabIndex:-1})}}),a.createElement(o._P,{field:"qty",header:"Quantity",type:"number",editorType:!i&&"number"}),a.createElement(o._P,{width:"30%",field:"purpose",header:"Purpose",type:"text",editorType:!i&&"text"}))})),ne=function(e,t,n,a){return new(n||(n=Promise))((function(l,o){function r(e){try{c(a.next(e))}catch(t){o(t)}}function i(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((a=a.apply(e,t||[])).next())}))},ae=function(e){var t=(0,o.pm)(),n=t.showSuccess,r=t.showError,i=(0,a.useState)(!1),c=(0,u.Z)(i,2),f=c[0],y=c[1],E=(0,a.useState)(!1),h=(0,u.Z)(E,2),b=h[0],L=h[1],k=(0,a.useState)(""),N=(0,u.Z)(k,2),C=N[0],w=N[1],T=(0,a.useState)(""),O=(0,u.Z)(T,2),S=O[0],x=O[1],j=(0,a.useState)({}),P=(0,u.Z)(j,2),_=P[0],A=P[1],I=(0,l.s0)(),R=(0,l.UO)().id,F=parseInt(R||""),B=isNaN(F)||F<=0,Z=(0,a.useRef)(),M=(0,a.useRef)(),W=(0,l.TH)().state;!W&&B&&I("/estimation/wholerod");var D=(0,g.ft)(),q=X(F,{skip:B,refetchOnMountOrArgChange:!0}),U=q.data,K=q.isLoading,V=(0,g.JB)(),J=V.data,Q=V.isLoading,G=(0,g.cQ)({projectId:null===W||void 0===W?void 0:W.projectKey},{skip:!(null===W||void 0===W?void 0:W.projectKey)}),H=G.data,Y=(G.isLoading,(0,a.useState)([])),ae=(0,u.Z)(Y,2),le=ae[0],oe=ae[1],re=(0,a.useState)(null),ie=(0,u.Z)(re,2),ce=ie[0],se=ie[1],ue=(0,g.DU)(),de=ue.data,me=ue.isFetching,pe=(0,g.U$)(ce,{skip:!ce}),ve=pe.data,fe=(pe.isLoading,z()),ge=(0,u.Z)(fe,2),ye=ge[0],Ee=ge[1].isLoading,he=$(),be=(0,u.Z)(he,2),Le=be[0],ke=be[1].isLoading;(0,a.useEffect)((function(){A(U||Object.assign(Object.assign({},D),{proj_key:null===W||void 0===W?void 0:W.projectKey,projblk_key:null===W||void 0===W?void 0:W.blockKey})),U&&(oe((null===U||void 0===U?void 0:U.items)||[]),se(U.itemtyp_key))}),[U]);return a.createElement(a.Fragment,null,a.createElement(o.Rm,{baseRoute:"/estimation/wholerod",description:ee,id:F,data:_,isUpdating:Ee||ke||f,ref:M,isItemsTableChanged:b,isLoading:K,onSubmit:function(e){return ne(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var a,l,o,i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=null===(a=Z.current)||void 0===a?void 0:a.getItems(),i=Object.assign(Object.assign({},e),{itemtyp_key:ce,items:o,base_qty:C,uom_key:S}),console.log(i),!B){t.next=10;break}return t.next=7,ye(Object.assign(Object.assign({},i),D)).unwrap();case 7:l=t.sent,t.next=13;break;case 10:return t.next=12,Le(Object.assign(Object.assign(Object.assign({},i),D),{key:null===U||void 0===U?void 0:U.key})).unwrap();case 12:l=t.sent;case 13:n("Success",l.detail),y(!0),setTimeout((function(){I("/estimation/wholerod")}),g.P7),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),r("An error occurred","We couldn't save your post, try again!");case 21:case"end":return t.stop()}}),t,null,[[0,18]])})))},renderForm:function(e,t,n,l){return a.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},a.createElement(o.Wi,{label:"Project",name:"proj_key",className:"col-10 md:col-6",control:e,errors:n,isLoading:Q,leftSpan:4,rightSpan:6,formItem:{component:v.L,componentProps:{disabled:!0,optionLabel:"name",optionValue:"key",options:J}}}),a.createElement(o.Wi,{className:"col-10 md:col-5",label:"Block",name:"projblk_key",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:v.L,componentProps:{disabled:!0,optionLabel:"descr",optionValue:"key",options:null===H||void 0===H?void 0:H.results}}}),a.createElement("div",{className:"col-10 md:col-1"},a.createElement(p.z,{disabled:!0,label:"Clear"})),a.createElement(d.i,null),a.createElement(o.Wi,{label:"Whole Pack Name",className:"col-12",name:"name",control:e,errors:n,leftSpan:2,rightSpan:4,formItem:{component:m.o,componentProps:{maxLength:100}}}),a.createElement(o.Wi,{label:"Item Type",name:"itemtyp_key",className:"col-12",control:e,errors:n,isLoading:me,leftSpan:2,rightSpan:4,required:!0,useExplicit:!0,onChange:function(e){se(e.value)},formItem:{component:v.L,componentProps:{optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",options:null===de||void 0===de?void 0:de.results,value:ce}}}),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-6"},a.createElement("label",{className:"col-4"},"Base Quantity / UOM"),a.createElement(m.o,{className:"col-1",style:{marginLeft:4},placeholder:"",value:C,onChange:function(e){return w(e.target.value)}}),a.createElement("span",{className:"inputgroup-divider"},"/"),a.createElement(v.L,{className:"col-1",optionLabel:"descr",optionValue:"key",options:ve,value:S,onChange:function(e){return x(e.value)}})),a.createElement(o.Wi,{label:"Description",className:"col-12",name:"descr",control:e,errors:n,leftSpan:2,rightSpan:6,formItem:{component:m.o,componentProps:{style:{marginTop:"1rem"},maxLength:100}}}),a.createElement("div",{className:"col-12 ",style:{height:"calc(100% - 183px)",minHeight:200}},a.createElement(te,{selectedItemType:ce,data:le,isLoading:K,ref:Z,onChange:function(e){return!b&&L(e)}})))}}))},le=function(e){var t=H(),n=(0,u.Z)(t,2),l=n[0],r=n[1].isLoading,i=(0,a.useState)(null),c=(0,u.Z)(i,2),s=c[0],m=c[1],f=(0,a.useState)(null),y=(0,u.Z)(f,2),E=y[0],h=y[1],b=(0,g.dx)({}).data,L=(0,g.cQ)({projectId:s},{skip:!s}),k=L.data,N=(L.isLoading,Y({projectId:s,blockId:E},{skip:!s||!E})),C=N.data,w=N.isLoading;return a.createElement(a.Fragment,null,a.createElement("div",{className:"flex"},a.createElement("h3",{className:(0,j.AK)("m-0 my-auto")},ee),a.createElement(P.rU,{to:{pathname:"/estimation/wholerod/new"},state:{projectKey:s,blockKey:E},className:s?"":"disabled-link",style:{textDecoration:"none",marginRight:"auto"}},a.createElement(p.z,{disabled:!s||!E,label:"Add",className:"ml-3"}))),a.createElement(d.i,null),a.createElement("div",{className:"pl-5 flex"},a.createElement("div",{className:"field",style:{width:"40%"}},a.createElement("label",{className:(0,j.AK)("col-3")},"Project"),a.createElement(v.L,{showClear:!0,style:{width:"60%"},optionLabel:"name",optionValue:"key",value:s,filter:!0,filterBy:"name",onChange:function(e){m(e.value),h(null)},options:null===b||void 0===b?void 0:b.results})),a.createElement("div",{className:"field",style:{width:"40%"}},a.createElement("label",{className:(0,j.AK)("col-3")},"Block"),a.createElement(v.L,{showClear:!0,style:{width:"60%"},optionLabel:"descr",optionValue:"key",value:E,filter:!0,filterBy:"descr",onChange:function(e){h(e.value)},options:null===k||void 0===k?void 0:k.results})),a.createElement("div",{className:"field",style:{width:"20%"}},a.createElement(p.z,{label:"Clear",onClick:function(e){e.preventDefault(),m(null),h(null)}}))),a.createElement(d.i,null),a.createElement(o.PS,{baseRoute:"/estimation/wholerod",description:ee,isLoading:w||r,data:null===C||void 0===C?void 0:C.results,newTable:!0,allowFilters:!1,deleteAction:function(e){return l(e).unwrap()}},a.createElement(o._P,{field:"name",header:"Whole Rod Pack Name",filteringType:"text"}),a.createElement(o._P,{field:"vendor.name",header:"Description",filteringType:"text"}),a.createElement(o._P,{field:"project.name",header:"Item Type",filteringType:"text"}),a.createElement(o._P,{field:"status.descr",header:"Base UOM",filteringType:"text"})))},oe=a.createElement(l.AW,{path:"wholerod"},a.createElement(l.AW,{path:"new",element:a.createElement(ae,null)}),a.createElement(l.AW,{path:":id/edit",element:a.createElement(ae,null)}),a.createElement(l.AW,{index:!0,element:a.createElement(le,null)})),re="/estimation/beam/",ie=g.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listBeam:e.query({query:function(e){var t=e.page,n=e.size,a=e.projectId,l=e.blockId;return{url:(0,g.DS)(re,"?page=".concat(t||1,"&page_size=").concat(n||g.IV,"&proj_key=").concat(a,"&projblk_key=").concat(l))}},providesTags:function(e){var t;return e?[].concat((0,f.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.key;return{type:g.pJ.BEAM,key:t}}))),[{type:g.pJ.BEAM,id:"LIST"}]):[{type:g.pJ.BEAM,id:"LIST"}]}}),addBeam:e.mutation({query:function(e){return{url:re,method:"POST",body:e}},invalidatesTags:[{type:g.pJ.BEAM,id:"LIST"}]}),getBeam:e.query({query:function(e){return"".concat(re).concat(e)},providesTags:function(e,t,n){return[{type:g.pJ.BEAM,id:n}]}}),updateBeam:e.mutation({query:function(e){var t=e;return{url:"".concat(re),method:"POST",body:t}},invalidatesTags:function(e){return[{type:g.pJ.BEAM,id:null===e||void 0===e?void 0:e.key}]}}),deleteBeam:e.mutation({query:function(e){return{url:"".concat(re).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:g.pJ.BEAM,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),ce=ie.useAddBeamMutation,se=ie.useDeleteBeamMutation,ue=ie.useGetBeamQuery,de=ie.useListBeamQuery,me=ie.useUpdateBeamMutation,pe=(ie.useGetErrorProneQuery,"Beam"),ve=function(e,t,n,a){return new(n||(n=Promise))((function(l,o){function r(e){try{c(a.next(e))}catch(t){o(t)}}function i(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((a=a.apply(e,t||[])).next())}))},fe=function(e){var t=(0,o.pm)(),n=t.showSuccess,r=t.showError,i=(0,a.useState)(!1),c=(0,u.Z)(i,2),f=c[0],y=c[1],E=(0,a.useState)(!1),h=(0,u.Z)(E,2),b=h[0],L=(h[1],(0,a.useState)("")),k=(0,u.Z)(L,2),N=k[0],C=k[1],w=(0,a.useState)(""),T=(0,u.Z)(w,2),O=T[0],S=T[1],x=(0,a.useState)({}),j=(0,u.Z)(x,2),P=j[0],_=j[1],A=(0,l.s0)(),I=(0,l.UO)().id,R=parseInt(I||""),F=isNaN(R)||R<=0,B=(0,a.useRef)(),Z=(0,l.TH)().state;!Z&&F&&A("/estimation/beam");var M=(0,g.ft)(),W=ue(R,{skip:F,refetchOnMountOrArgChange:!0}),D=W.data,q=W.isLoading,U=(0,g.JB)(),K=U.data,V=U.isLoading,J=(0,g.cQ)({projectId:null===Z||void 0===Z?void 0:Z.projectKey},{skip:!(null===Z||void 0===Z?void 0:Z.projectKey)}),Q=J.data,G=(J.isLoading,(0,g.DY)({})),z=G.data,H=(G.isLoading,ce()),X=(0,u.Z)(H,2),Y=X[0],$=X[1].isLoading,ee=me(),te=(0,u.Z)(ee,2),ne=te[0],ae=te[1].isLoading;(0,a.useEffect)((function(){_(D||Object.assign(Object.assign({},M),{proj_key:null===Z||void 0===Z?void 0:Z.projectKey,projblk_key:null===Z||void 0===Z?void 0:Z.blockKey}))}),[D]);return a.createElement(a.Fragment,null,a.createElement(o.Rm,{baseRoute:"/estimation/beam",description:pe,id:R,data:P,isUpdating:$||ae||f,ref:B,isItemsTableChanged:b,isLoading:q,onSubmit:function(e){return ve(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var a,l;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,l=Object.assign(Object.assign({},e),{base_qty:N,uom_key:O}),console.log(l),!F){t.next=9;break}return t.next=6,Y(Object.assign(Object.assign({},l),M)).unwrap();case 6:a=t.sent,t.next=12;break;case 9:return t.next=11,ne(Object.assign(Object.assign(Object.assign({},l),M),{key:null===D||void 0===D?void 0:D.key})).unwrap();case 11:a=t.sent;case 12:n("Success",a.detail),y(!0),setTimeout((function(){A("/estimation/beam")}),g.P7),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),r("An error occurred","We couldn't save your post, try again!");case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))},renderForm:function(e,t,n,l){return a.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},a.createElement(o.Wi,{label:"Project",name:"proj_key",className:"col-10 md:col-6",control:e,errors:n,isLoading:V,leftSpan:4,rightSpan:6,formItem:{component:v.L,componentProps:{disabled:!0,optionLabel:"name",optionValue:"key",options:K}}}),a.createElement(o.Wi,{className:"col-10 md:col-5",label:"Block",name:"projblk_key",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:v.L,componentProps:{disabled:!0,optionLabel:"descr",optionValue:"key",options:null===Q||void 0===Q?void 0:Q.results}}}),a.createElement("div",{className:"col-10 md:col-1"},a.createElement(p.z,{disabled:!0,label:"Clear"})),a.createElement(d.i,null),a.createElement(o.Wi,{label:"Component Name",className:"col-12",name:"name",control:e,errors:n,leftSpan:2,rightSpan:4,formItem:{component:m.o,componentProps:{maxLength:100}}}),a.createElement(o.Wi,{label:"Description",className:"col-12",name:"descr",control:e,errors:n,leftSpan:2,rightSpan:6,formItem:{component:m.o,componentProps:{maxLength:100}}}),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("label",{className:"col-3",style:{paddingLeft:0}},"Base Quantity / UOM"),a.createElement(m.o,{className:"col-1",placeholder:"",value:N,onChange:function(e){return C(e.target.value)}}),a.createElement("span",{className:"inputgroup-divider"},"/"),a.createElement(v.L,{className:"col-1",optionLabel:"descr",optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}}),a.createElement("div",{className:"col-6"})),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("label",{className:"col-3"},"B x W x L / UOM"),a.createElement(m.o,{className:"col-1",style:{marginLeft:4},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}}),a.createElement("span",{className:"inputgroup-divider-normal"},"X"),a.createElement(m.o,{className:"col-1",style:{marginLeft:4},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}}),a.createElement("span",{className:"inputgroup-divider-normal"},"X"),a.createElement(m.o,{className:"col-1",style:{marginLeft:4},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}}),a.createElement("span",{className:"inputgroup-divider"},"/"),a.createElement(v.L,{className:"col-2",optionLabel:"descr",optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}}),a.createElement("div",{className:"col-4",style:{margin:"auto"}},a.createElement("label",{style:{display:"flex",justifyContent:"center"}},"Target Quantity / UOM"))),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("label",{className:"col-3"},"Column Extension RCC"),a.createElement("div",{className:"col-3"},a.createElement(v.L,{optionLabel:"descr",style:{width:"100%"},optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}})),a.createElement("div",{className:"col-3",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:"1:1:2",disabled:!0})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",disabled:!0,value:"CFT"}))),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex pb-5"},a.createElement("label",{className:"col-3"},"Column Body Rod Pack"),a.createElement("div",{className:"col-3"},a.createElement(v.L,{optionLabel:"descr",style:{width:"100%"},optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}})),a.createElement("div",{className:"col-3",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:"1.0 X 1.6 FEET",disabled:!0})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",disabled:!0,value:"FEET"}))))}}))},ge=function(e){var t=se(),n=(0,u.Z)(t,2),l=n[0],r=n[1].isLoading,i=(0,a.useState)(null),c=(0,u.Z)(i,2),s=c[0],m=c[1],f=(0,a.useState)(null),y=(0,u.Z)(f,2),E=y[0],h=y[1],b=(0,g.dx)({}).data,L=(0,g.cQ)({projectId:s},{skip:!s}),k=L.data,N=(L.isLoading,de({projectId:s,blockId:E},{skip:!s||!E})),C=N.data,w=N.isLoading;return a.createElement(a.Fragment,null,a.createElement("div",{className:"flex"},a.createElement("h3",{className:(0,j.AK)("m-0 my-auto")},pe),a.createElement(P.rU,{to:{pathname:"/estimation/beam/new"},state:{projectKey:s,blockKey:E},className:s?"":"disabled-link",style:{textDecoration:"none",marginRight:"auto"}},a.createElement(p.z,{disabled:!s||!E,label:"Add",className:"ml-3"}))),a.createElement(d.i,null),a.createElement("div",{className:"pl-5 flex"},a.createElement("div",{className:"field",style:{width:"40%"}},a.createElement("label",{className:(0,j.AK)("col-3")},"Project"),a.createElement(v.L,{showClear:!0,style:{width:"60%"},optionLabel:"name",optionValue:"key",value:s,filter:!0,filterBy:"name",onChange:function(e){m(e.value),h(null)},options:null===b||void 0===b?void 0:b.results})),a.createElement("div",{className:"field",style:{width:"40%"}},a.createElement("label",{className:(0,j.AK)("col-3")},"Block"),a.createElement(v.L,{showClear:!0,style:{width:"60%"},optionLabel:"descr",optionValue:"key",value:E,filter:!0,filterBy:"descr",onChange:function(e){h(e.value)},options:null===k||void 0===k?void 0:k.results})),a.createElement("div",{className:"field",style:{width:"20%"}},a.createElement(p.z,{label:"Clear",onClick:function(e){e.preventDefault(),m(null),h(null)}}))),a.createElement(d.i,null),a.createElement(o.PS,{baseRoute:"/estimation/beam",description:pe,isLoading:w||r,data:null===C||void 0===C?void 0:C.results,newTable:!0,allowFilters:!1,deleteAction:function(e){return l(e).unwrap()}},a.createElement(o._P,{field:"name",header:"Component Name",filteringType:"text"}),a.createElement(o._P,{field:"descr",header:"Description",filteringType:"text"}),a.createElement(o._P,{field:"uom",header:"Base UOM",filteringType:"text"})))},ye=a.createElement(l.AW,{path:"beam"},a.createElement(l.AW,{path:"new",element:a.createElement(fe,null)}),a.createElement(l.AW,{path:":id/edit",element:a.createElement(fe,null)}),a.createElement(l.AW,{index:!0,element:a.createElement(ge,null)})),Ee="/estimation/columnbody/",he=g.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listColumnBody:e.query({query:function(e){var t=e.page,n=e.size,a=e.projectId,l=e.blockId;return{url:(0,g.DS)(Ee,"?page=".concat(t||1,"&page_size=").concat(n||g.IV,"&proj_key=").concat(a,"&projblk_key=").concat(l))}},providesTags:function(e){var t;return e?[].concat((0,f.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.key;return{type:g.pJ.COLUMN_BODY,key:t}}))),[{type:g.pJ.COLUMN_BODY,id:"LIST"}]):[{type:g.pJ.COLUMN_BODY,id:"LIST"}]}}),addColumnBody:e.mutation({query:function(e){return{url:Ee,method:"POST",body:e}},invalidatesTags:[{type:g.pJ.COLUMN_BODY,id:"LIST"}]}),getColumnBody:e.query({query:function(e){return"".concat(Ee).concat(e)},providesTags:function(e,t,n){return[{type:g.pJ.COLUMN_BODY,id:n}]}}),updateColumnBody:e.mutation({query:function(e){var t=e;return{url:"".concat(Ee),method:"POST",body:t}},invalidatesTags:function(e){return[{type:g.pJ.COLUMN_BODY,id:null===e||void 0===e?void 0:e.key}]}}),deleteColumnBody:e.mutation({query:function(e){return{url:"".concat(Ee).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:g.pJ.COLUMN_BODY,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),be=he.useAddColumnBodyMutation,Le=he.useDeleteColumnBodyMutation,ke=he.useGetColumnBodyQuery,Ne=he.useListColumnBodyQuery,Ce=he.useUpdateColumnBodyMutation,we=(he.useGetErrorProneQuery,"Column Body"),Te=function(e,t,n,a){return new(n||(n=Promise))((function(l,o){function r(e){try{c(a.next(e))}catch(t){o(t)}}function i(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((a=a.apply(e,t||[])).next())}))},Oe=function(e){var t=(0,o.pm)(),n=t.showSuccess,r=t.showError,i=(0,a.useState)(!1),c=(0,u.Z)(i,2),f=c[0],y=c[1],E=(0,a.useState)(!1),h=(0,u.Z)(E,2),b=h[0],L=(h[1],(0,a.useState)("")),k=(0,u.Z)(L,2),N=k[0],C=k[1],w=(0,a.useState)(""),T=(0,u.Z)(w,2),O=T[0],S=T[1],x=(0,a.useState)({}),j=(0,u.Z)(x,2),P=j[0],_=j[1],A=(0,l.s0)(),I=(0,l.UO)().id,R=parseInt(I||""),F=isNaN(R)||R<=0,B=(0,a.useRef)(),Z=(0,l.TH)().state;!Z&&F&&A("/estimation/columnbody");var M=(0,g.ft)(),W=ke(R,{skip:F,refetchOnMountOrArgChange:!0}),D=W.data,q=W.isLoading,U=(0,g.JB)(),K=U.data,V=U.isLoading,J=(0,g.cQ)({projectId:null===Z||void 0===Z?void 0:Z.projectKey},{skip:!(null===Z||void 0===Z?void 0:Z.projectKey)}),Q=J.data,G=(J.isLoading,(0,g.DY)({})),z=G.data,H=(G.isLoading,be()),X=(0,u.Z)(H,2),Y=X[0],$=X[1].isLoading,ee=Ce(),te=(0,u.Z)(ee,2),ne=te[0],ae=te[1].isLoading;(0,a.useEffect)((function(){_(D||Object.assign(Object.assign({},M),{proj_key:null===Z||void 0===Z?void 0:Z.projectKey,projblk_key:null===Z||void 0===Z?void 0:Z.blockKey}))}),[D]);return a.createElement(a.Fragment,null,a.createElement(o.Rm,{baseRoute:"/estimation/columnbody",description:we,id:R,data:P,isUpdating:$||ae||f,ref:B,isItemsTableChanged:b,isLoading:q,onSubmit:function(e){return Te(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var a,l;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,l=Object.assign(Object.assign({},e),{base_qty:N,uom_key:O}),console.log(l),!F){t.next=9;break}return t.next=6,Y(Object.assign(Object.assign({},l),M)).unwrap();case 6:a=t.sent,t.next=12;break;case 9:return t.next=11,ne(Object.assign(Object.assign(Object.assign({},l),M),{key:null===D||void 0===D?void 0:D.key})).unwrap();case 11:a=t.sent;case 12:n("Success",a.detail),y(!0),setTimeout((function(){A("/estimation/columnbody")}),g.P7),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),r("An error occurred","We couldn't save your post, try again!");case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))},renderForm:function(e,t,n,l){return a.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},a.createElement(o.Wi,{label:"Project",name:"proj_key",className:"col-10 md:col-6",control:e,errors:n,isLoading:V,leftSpan:4,rightSpan:6,formItem:{component:v.L,componentProps:{disabled:!0,optionLabel:"name",optionValue:"key",options:K}}}),a.createElement(o.Wi,{className:"col-10 md:col-5",label:"Block",name:"projblk_key",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:v.L,componentProps:{disabled:!0,optionLabel:"descr",optionValue:"key",options:null===Q||void 0===Q?void 0:Q.results}}}),a.createElement("div",{className:"col-10 md:col-1"},a.createElement(p.z,{disabled:!0,label:"Clear"})),a.createElement(d.i,null),a.createElement(o.Wi,{label:"Component Name",className:"col-12",name:"name",control:e,errors:n,leftSpan:2,rightSpan:4,formItem:{component:m.o,componentProps:{maxLength:100}}}),a.createElement(o.Wi,{label:"Description",className:"col-12",name:"descr",control:e,errors:n,leftSpan:2,rightSpan:6,formItem:{component:m.o,componentProps:{maxLength:100}}}),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("label",{className:"col-3",style:{paddingLeft:0}},"Base Quantity / UOM"),a.createElement(m.o,{className:"col-1",placeholder:"",value:N,onChange:function(e){return C(e.target.value)}}),a.createElement("span",{className:"inputgroup-divider"},"/"),a.createElement(v.L,{className:"col-1",optionLabel:"descr",optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}}),a.createElement("div",{className:"col-6"})),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("label",{className:"col-3"},"W x B / UOM"),a.createElement(m.o,{className:"col-1",style:{marginLeft:4},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}}),a.createElement("span",{className:"inputgroup-divider-normal"},"X"),a.createElement(m.o,{className:"col-1",style:{marginLeft:4},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}}),a.createElement("span",{className:"inputgroup-divider"},"/"),a.createElement(v.L,{className:"col-2",optionLabel:"descr",optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}}),a.createElement("div",{className:"col-4",style:{margin:"auto"}},a.createElement("label",{style:{display:"flex",justifyContent:"center"}},"Target Quantity / UOM"))),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("label",{className:"col-3"},"Column Extension RCC"),a.createElement("div",{className:"col-3"},a.createElement(v.L,{optionLabel:"descr",style:{width:"100%"},optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}})),a.createElement("div",{className:"col-3",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:"1:1:2",disabled:!0})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",disabled:!0,value:"CFT"}))),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex pb-5"},a.createElement("label",{className:"col-3"},"Column Body Rod Pack"),a.createElement("div",{className:"col-3"},a.createElement(v.L,{optionLabel:"descr",style:{width:"100%"},optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}})),a.createElement("div",{className:"col-3",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:"1.0 X 1.6 FEET",disabled:!0})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",disabled:!0,value:"FEET"}))))}}))},Se=function(e){var t=Le(),n=(0,u.Z)(t,2),l=n[0],r=n[1].isLoading,i=(0,a.useState)(null),c=(0,u.Z)(i,2),s=c[0],m=c[1],f=(0,a.useState)(null),y=(0,u.Z)(f,2),E=y[0],h=y[1],b=(0,g.dx)({}).data,L=(0,g.cQ)({projectId:s},{skip:!s}),k=L.data,N=(L.isLoading,Ne({projectId:s,blockId:E},{skip:!s||!E})),C=N.data,w=N.isLoading;return a.createElement(a.Fragment,null,a.createElement("div",{className:"flex"},a.createElement("h3",{className:(0,j.AK)("m-0 my-auto")},we),a.createElement(P.rU,{to:{pathname:"/estimation/columnbody/new"},state:{projectKey:s,blockKey:E},className:s?"":"disabled-link",style:{textDecoration:"none",marginRight:"auto"}},a.createElement(p.z,{disabled:!s||!E,label:"Add",className:"ml-3"}))),a.createElement(d.i,null),a.createElement("div",{className:"pl-5 flex"},a.createElement("div",{className:"field",style:{width:"40%"}},a.createElement("label",{className:(0,j.AK)("col-3")},"Project"),a.createElement(v.L,{showClear:!0,style:{width:"60%"},optionLabel:"name",optionValue:"key",value:s,filter:!0,filterBy:"name",onChange:function(e){m(e.value),h(null)},options:null===b||void 0===b?void 0:b.results})),a.createElement("div",{className:"field",style:{width:"40%"}},a.createElement("label",{className:(0,j.AK)("col-3")},"Block"),a.createElement(v.L,{showClear:!0,style:{width:"60%"},optionLabel:"descr",optionValue:"key",value:E,filter:!0,filterBy:"descr",onChange:function(e){h(e.value)},options:null===k||void 0===k?void 0:k.results})),a.createElement("div",{className:"field",style:{width:"20%"}},a.createElement(p.z,{label:"Clear",onClick:function(e){e.preventDefault(),m(null),h(null)}}))),a.createElement(d.i,null),a.createElement(o.PS,{baseRoute:"/estimation/columnbody",description:we,isLoading:w||r,data:null===C||void 0===C?void 0:C.results,newTable:!0,allowFilters:!1,deleteAction:function(e){return l(e).unwrap()}},a.createElement(o._P,{field:"name",header:"Component Name",filteringType:"text"}),a.createElement(o._P,{field:"descr",header:"Description",filteringType:"text"}),a.createElement(o._P,{field:"uom",header:"Base UOM",filteringType:"text"})))},xe=a.createElement(l.AW,{path:"columnbody"},a.createElement(l.AW,{path:"new",element:a.createElement(Oe,null)}),a.createElement(l.AW,{path:":id/edit",element:a.createElement(Oe,null)}),a.createElement(l.AW,{index:!0,element:a.createElement(Se,null)})),je="/estimation/columnfooting/",Pe=g.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listColumnFooting:e.query({query:function(e){var t=e.page,n=e.size,a=e.projectId,l=e.blockId;return{url:(0,g.DS)(je,"?page=".concat(t||1,"&page_size=").concat(n||g.IV,"&proj_key=").concat(a,"&projblk_key=").concat(l))}},providesTags:function(e){var t;return e?[].concat((0,f.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.key;return{type:g.pJ.COLUMN_FOOTING,key:t}}))),[{type:g.pJ.COLUMN_FOOTING,id:"LIST"}]):[{type:g.pJ.COLUMN_FOOTING,id:"LIST"}]}}),addColumnFooting:e.mutation({query:function(e){return{url:je,method:"POST",footing:e}},invalidatesTags:[{type:g.pJ.COLUMN_FOOTING,id:"LIST"}]}),getColumnFooting:e.query({query:function(e){return"".concat(je).concat(e)},providesTags:function(e,t,n){return[{type:g.pJ.COLUMN_FOOTING,id:n}]}}),updateColumnFooting:e.mutation({query:function(e){var t=e;return{url:"".concat(je),method:"POST",footing:t}},invalidatesTags:function(e){return[{type:g.pJ.COLUMN_FOOTING,id:null===e||void 0===e?void 0:e.key}]}}),deleteColumnFooting:e.mutation({query:function(e){return{url:"".concat(je).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:g.pJ.COLUMN_FOOTING,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),_e=Pe.useAddColumnFootingMutation,Ae=Pe.useDeleteColumnFootingMutation,Ie=Pe.useGetColumnFootingQuery,Re=Pe.useListColumnFootingQuery,Fe=Pe.useUpdateColumnFootingMutation,Be=(Pe.useGetErrorProneQuery,"Column Footing"),Ze=function(e,t,n,a){return new(n||(n=Promise))((function(l,o){function r(e){try{c(a.next(e))}catch(t){o(t)}}function i(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((a=a.apply(e,t||[])).next())}))},Me=function(e){var t=(0,o.pm)(),n=t.showSuccess,r=t.showError,i=(0,a.useState)(!1),c=(0,u.Z)(i,2),f=c[0],y=c[1],E=(0,a.useState)(!1),h=(0,u.Z)(E,2),b=h[0],L=(h[1],(0,a.useState)("")),k=(0,u.Z)(L,2),N=k[0],C=k[1],w=(0,a.useState)(""),T=(0,u.Z)(w,2),O=T[0],S=T[1],x=(0,a.useState)({}),j=(0,u.Z)(x,2),P=j[0],_=j[1],A=(0,l.s0)(),I=(0,l.UO)().id,R=parseInt(I||""),F=isNaN(R)||R<=0,B=(0,a.useRef)(),Z=(0,l.TH)().state;!Z&&F&&A("/estimation/columnfooting");var M=(0,g.ft)(),W=Ie(R,{skip:F,refetchOnMountOrArgChange:!0}),D=W.data,q=W.isLoading,U=(0,g.JB)(),K=U.data,V=U.isLoading,J=(0,g.cQ)({projectId:null===Z||void 0===Z?void 0:Z.projectKey},{skip:!(null===Z||void 0===Z?void 0:Z.projectKey)}),Q=J.data,G=(J.isLoading,(0,g.DY)({})),z=G.data,H=(G.isLoading,_e()),X=(0,u.Z)(H,2),Y=X[0],$=X[1].isLoading,ee=Fe(),te=(0,u.Z)(ee,2),ne=te[0],ae=te[1].isLoading;(0,a.useEffect)((function(){_(D||Object.assign(Object.assign({},M),{proj_key:null===Z||void 0===Z?void 0:Z.projectKey,projblk_key:null===Z||void 0===Z?void 0:Z.blockKey}))}),[D]);return a.createElement(a.Fragment,null,a.createElement(o.Rm,{baseRoute:"/estimation/columnfooting",description:Be,id:R,data:P,isUpdating:$||ae||f,ref:B,isItemsTableChanged:b,isLoading:q,onSubmit:function(e){return Ze(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var a,l;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,l=Object.assign(Object.assign({},e),{base_qty:N,uom_key:O}),console.log(l),!F){t.next=9;break}return t.next=6,Y(Object.assign(Object.assign({},l),M)).unwrap();case 6:a=t.sent,t.next=12;break;case 9:return t.next=11,ne(Object.assign(Object.assign(Object.assign({},l),M),{key:null===D||void 0===D?void 0:D.key})).unwrap();case 11:a=t.sent;case 12:n("Success",a.detail),y(!0),setTimeout((function(){A("/estimation/columnfooting")}),g.P7),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),r("An error occurred","We couldn't save your post, try again!");case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))},renderForm:function(e,t,n,l){return a.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},a.createElement(o.Wi,{label:"Project",name:"proj_key",className:"col-10 md:col-6",control:e,errors:n,isLoading:V,leftSpan:4,rightSpan:6,formItem:{component:v.L,componentProps:{disabled:!0,optionLabel:"name",optionValue:"key",options:K}}}),a.createElement(o.Wi,{className:"col-10 md:col-5",label:"Block",name:"projblk_key",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:v.L,componentProps:{disabled:!0,optionLabel:"descr",optionValue:"key",options:null===Q||void 0===Q?void 0:Q.results}}}),a.createElement("div",{className:"col-10 md:col-1"},a.createElement(p.z,{disabled:!0,label:"Clear"})),a.createElement(d.i,null),a.createElement(o.Wi,{label:"Component Name",className:"col-12",name:"name",control:e,errors:n,leftSpan:2,rightSpan:4,formItem:{component:m.o,componentProps:{maxLength:100}}}),a.createElement(o.Wi,{label:"Description",className:"col-12",name:"descr",control:e,errors:n,leftSpan:2,rightSpan:6,formItem:{component:m.o,componentProps:{maxLength:100}}}),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("label",{className:"col-3",style:{paddingLeft:0}},"Base Quantity / UOM"),a.createElement(m.o,{className:"col-1",placeholder:"",value:N,onChange:function(e){return C(e.target.value)}}),a.createElement("span",{className:"inputgroup-divider"},"/"),a.createElement(v.L,{className:"col-1",optionLabel:"descr",optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}}),a.createElement("div",{className:"col-6"})),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("label",{className:"col-3"},"L x B / UOM"),a.createElement(m.o,{className:"col-1",style:{marginLeft:4},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}}),a.createElement("span",{className:"inputgroup-divider-normal"},"X"),a.createElement(m.o,{className:"col-1",style:{marginLeft:4},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}}),a.createElement("span",{className:"inputgroup-divider"},"/"),a.createElement(v.L,{className:"col-2",optionLabel:"descr",optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}}),a.createElement("div",{className:"col-4",style:{margin:"auto"}},a.createElement("label",{style:{display:"flex",justifyContent:"center"}},"Target Quantity / UOM"))),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("label",{className:"col-3"},"Footing PCC"),a.createElement("div",{className:"col-3"},a.createElement(v.L,{optionLabel:"descr",style:{width:"100%"},optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}})),a.createElement("div",{className:"col-3",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:"1:1:2",disabled:!0})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",disabled:!0,value:"CFT"}))),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("label",{className:"col-3"},"Footing RCC"),a.createElement("div",{className:"col-3"},a.createElement(v.L,{optionLabel:"descr",style:{width:"100%"},optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}})),a.createElement("div",{className:"col-3",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:"1:1:2",disabled:!0})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",disabled:!0,value:"CFT"}))),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex pb-5"},a.createElement("label",{className:"col-3"},"Pedal Rod Pack"),a.createElement("div",{className:"col-3"},a.createElement(v.L,{optionLabel:"descr",style:{width:"100%"},optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}})),a.createElement("div",{className:"col-3",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:"7.0 X 8.0 X 1.5 FT SLOPED",disabled:!0})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",disabled:!0,value:"FEET"}))))}}))},We=function(e){var t=Ae(),n=(0,u.Z)(t,2),l=n[0],r=n[1].isLoading,i=(0,a.useState)(null),c=(0,u.Z)(i,2),s=c[0],m=c[1],f=(0,a.useState)(null),y=(0,u.Z)(f,2),E=y[0],h=y[1],b=(0,g.dx)({}).data,L=(0,g.cQ)({projectId:s},{skip:!s}),k=L.data,N=(L.isLoading,Re({projectId:s,blockId:E},{skip:!s||!E})),C=N.data,w=N.isLoading;return a.createElement(a.Fragment,null,a.createElement("div",{className:"flex"},a.createElement("h3",{className:(0,j.AK)("m-0 my-auto")},Be),a.createElement(P.rU,{to:{pathname:"/estimation/columnfooting/new"},state:{projectKey:s,blockKey:E},className:s?"":"disabled-link",style:{textDecoration:"none",marginRight:"auto"}},a.createElement(p.z,{disabled:!s||!E,label:"Add",className:"ml-3"}))),a.createElement(d.i,null),a.createElement("div",{className:"pl-5 flex"},a.createElement("div",{className:"field",style:{width:"40%"}},a.createElement("label",{className:(0,j.AK)("col-3")},"Project"),a.createElement(v.L,{showClear:!0,style:{width:"60%"},optionLabel:"name",optionValue:"key",value:s,filter:!0,filterBy:"name",onChange:function(e){m(e.value),h(null)},options:null===b||void 0===b?void 0:b.results})),a.createElement("div",{className:"field",style:{width:"40%"}},a.createElement("label",{className:(0,j.AK)("col-3")},"Block"),a.createElement(v.L,{showClear:!0,style:{width:"60%"},optionLabel:"descr",optionValue:"key",value:E,filter:!0,filterBy:"descr",onChange:function(e){h(e.value)},options:null===k||void 0===k?void 0:k.results})),a.createElement("div",{className:"field",style:{width:"20%"}},a.createElement(p.z,{label:"Clear",onClick:function(e){e.preventDefault(),m(null),h(null)}}))),a.createElement(d.i,null),a.createElement(o.PS,{baseRoute:"/estimation/columnfooting",description:Be,isLoading:w||r,data:null===C||void 0===C?void 0:C.results,newTable:!0,allowFilters:!1,deleteAction:function(e){return l(e).unwrap()}},a.createElement(o._P,{field:"name",header:"Component Name",filteringType:"text"}),a.createElement(o._P,{field:"descr",header:"Description",filteringType:"text"}),a.createElement(o._P,{field:"uom",header:"Base UOM",filteringType:"text"})))},De=a.createElement(l.AW,{path:"columnfooting"},a.createElement(l.AW,{path:"new",element:a.createElement(Me,null)}),a.createElement(l.AW,{path:":id/edit",element:a.createElement(Me,null)}),a.createElement(l.AW,{index:!0,element:a.createElement(We,null)})),qe="/estimation/cupboard/",Ue=g.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listCupboard:e.query({query:function(e){var t=e.page,n=e.size,a=e.projectId,l=e.blockId;return{url:(0,g.DS)(qe,"?page=".concat(t||1,"&page_size=").concat(n||g.IV,"&proj_key=").concat(a,"&projblk_key=").concat(l))}},providesTags:function(e){var t;return e?[].concat((0,f.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.key;return{type:g.pJ.CUPBOARD,key:t}}))),[{type:g.pJ.CUPBOARD,id:"LIST"}]):[{type:g.pJ.CUPBOARD,id:"LIST"}]}}),addCupboard:e.mutation({query:function(e){return{url:qe,method:"POST",body:e}},invalidatesTags:[{type:g.pJ.CUPBOARD,id:"LIST"}]}),getCupboard:e.query({query:function(e){return"".concat(qe).concat(e)},providesTags:function(e,t,n){return[{type:g.pJ.CUPBOARD,id:n}]}}),updateCupboard:e.mutation({query:function(e){var t=e;return{url:"".concat(qe),method:"POST",body:t}},invalidatesTags:function(e){return[{type:g.pJ.CUPBOARD,id:null===e||void 0===e?void 0:e.key}]}}),deleteCupboard:e.mutation({query:function(e){return{url:"".concat(qe).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:g.pJ.CUPBOARD,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),Ke=Ue.useAddCupboardMutation,Ve=Ue.useDeleteCupboardMutation,Je=Ue.useGetCupboardQuery,Qe=Ue.useListCupboardQuery,Ge=Ue.useUpdateCupboardMutation,ze=(Ue.useGetErrorProneQuery,"Cupboard"),He=function(e,t,n,a){return new(n||(n=Promise))((function(l,o){function r(e){try{c(a.next(e))}catch(t){o(t)}}function i(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((a=a.apply(e,t||[])).next())}))},Xe=function(e){var t=(0,o.pm)(),n=t.showSuccess,r=t.showError,i=(0,a.useState)(!1),c=(0,u.Z)(i,2),f=c[0],y=c[1],E=(0,a.useState)(!1),h=(0,u.Z)(E,2),b=h[0],L=(h[1],(0,a.useState)("")),k=(0,u.Z)(L,2),N=k[0],C=k[1],w=(0,a.useState)(""),T=(0,u.Z)(w,2),O=T[0],S=T[1],x=(0,a.useState)({}),j=(0,u.Z)(x,2),P=j[0],_=j[1],A=(0,l.s0)(),I=(0,l.UO)().id,R=parseInt(I||""),F=isNaN(R)||R<=0,B=(0,a.useRef)(),Z=(0,l.TH)().state;!Z&&F&&A("/estimation/cupboard");var M=(0,g.ft)(),W=Je(R,{skip:F,refetchOnMountOrArgChange:!0}),D=W.data,q=W.isLoading,U=(0,g.JB)(),K=U.data,V=U.isLoading,J=(0,g.cQ)({projectId:null===Z||void 0===Z?void 0:Z.projectKey},{skip:!(null===Z||void 0===Z?void 0:Z.projectKey)}),Q=J.data,G=(J.isLoading,(0,g.DY)({})),z=G.data,H=(G.isLoading,Ke()),X=(0,u.Z)(H,2),Y=X[0],$=X[1].isLoading,ee=Ge(),te=(0,u.Z)(ee,2),ne=te[0],ae=te[1].isLoading;(0,a.useEffect)((function(){_(D||Object.assign(Object.assign({},M),{proj_key:null===Z||void 0===Z?void 0:Z.projectKey,projblk_key:null===Z||void 0===Z?void 0:Z.blockKey}))}),[D]);return a.createElement(a.Fragment,null,a.createElement(o.Rm,{baseRoute:"/estimation/cupboard",description:ze,id:R,data:P,isUpdating:$||ae||f,ref:B,isItemsTableChanged:b,isLoading:q,onSubmit:function(e){return He(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var a,l;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,l=Object.assign(Object.assign({},e),{base_qty:N,uom_key:O}),console.log(l),!F){t.next=9;break}return t.next=6,Y(Object.assign(Object.assign({},l),M)).unwrap();case 6:a=t.sent,t.next=12;break;case 9:return t.next=11,ne(Object.assign(Object.assign(Object.assign({},l),M),{key:null===D||void 0===D?void 0:D.key})).unwrap();case 11:a=t.sent;case 12:n("Success",a.detail),y(!0),setTimeout((function(){A("/estimation/cupboard")}),g.P7),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),r("An error occurred","We couldn't save your post, try again!");case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))},renderForm:function(e,t,n,l){return a.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},a.createElement(o.Wi,{label:"Project",name:"proj_key",className:"col-10 md:col-6",control:e,errors:n,isLoading:V,leftSpan:4,rightSpan:6,formItem:{component:v.L,componentProps:{disabled:!0,optionLabel:"name",optionValue:"key",options:K}}}),a.createElement(o.Wi,{className:"col-10 md:col-5",label:"Block",name:"projblk_key",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:v.L,componentProps:{disabled:!0,optionLabel:"descr",optionValue:"key",options:null===Q||void 0===Q?void 0:Q.results}}}),a.createElement("div",{className:"col-10 md:col-1"},a.createElement(p.z,{disabled:!0,label:"Clear"})),a.createElement(d.i,null),a.createElement(o.Wi,{label:"Component Name",className:"col-12",name:"name",control:e,errors:n,leftSpan:2,rightSpan:4,formItem:{component:m.o,componentProps:{maxLength:100}}}),a.createElement(o.Wi,{label:"Description",className:"col-12",name:"descr",control:e,errors:n,leftSpan:2,rightSpan:6,formItem:{component:m.o,componentProps:{maxLength:100}}}),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("label",{className:"col-3",style:{paddingLeft:0}},"Base Quantity / UOM"),a.createElement(m.o,{className:"col-1",placeholder:"",value:N,onChange:function(e){return C(e.target.value)}}),a.createElement("span",{className:"inputgroup-divider"},"/"),a.createElement(v.L,{className:"col-1",optionLabel:"descr",optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}}),a.createElement("div",{className:"col-6"})),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("div",{className:"col-8"}),a.createElement("div",{className:"col-4",style:{margin:"auto"}},a.createElement("label",{style:{display:"flex",justifyContent:"center"}},"Target Quantity / UOM"))),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("label",{className:"col-3"},"Brickwork"),a.createElement("div",{className:"col-3"},a.createElement(v.L,{optionLabel:"descr",style:{width:"100%"},optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}})),a.createElement("div",{className:"col-3",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:"4 inch",disabled:!0})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",disabled:!0,value:"CFT"}))),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("label",{className:"col-3"},"Partition Slab"),a.createElement("div",{className:"col-3"},a.createElement(v.L,{optionLabel:"descr",style:{width:"100%"},optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}})),a.createElement("div",{className:"col-3",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:"12.0 X 1.5 FEET",disabled:!0})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",disabled:!0,value:"FEET"}))),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex pb-5"},a.createElement("label",{className:"col-3"},"Plaster"),a.createElement("div",{className:"col-3"},a.createElement(v.L,{optionLabel:"descr",style:{width:"100%"},optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}})),a.createElement("div",{className:"col-3",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:"Cement plaster",disabled:!0})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",disabled:!0,value:"FEET"}))))}}))},Ye=function(e){var t=Ve(),n=(0,u.Z)(t,2),l=n[0],r=n[1].isLoading,i=(0,a.useState)(null),c=(0,u.Z)(i,2),s=c[0],m=c[1],f=(0,a.useState)(null),y=(0,u.Z)(f,2),E=y[0],h=y[1],b=(0,g.dx)({}).data,L=(0,g.cQ)({projectId:s},{skip:!s}),k=L.data,N=(L.isLoading,Qe({projectId:s,blockId:E},{skip:!s||!E})),C=N.data,w=N.isLoading;return a.createElement(a.Fragment,null,a.createElement("div",{className:"flex"},a.createElement("h3",{className:(0,j.AK)("m-0 my-auto")},ze),a.createElement(P.rU,{to:{pathname:"/estimation/cupboard/new"},state:{projectKey:s,blockKey:E},className:s?"":"disabled-link",style:{textDecoration:"none",marginRight:"auto"}},a.createElement(p.z,{disabled:!s||!E,label:"Add",className:"ml-3"}))),a.createElement(d.i,null),a.createElement("div",{className:"pl-5 flex"},a.createElement("div",{className:"field",style:{width:"40%"}},a.createElement("label",{className:(0,j.AK)("col-3")},"Project"),a.createElement(v.L,{showClear:!0,style:{width:"60%"},optionLabel:"name",optionValue:"key",value:s,filter:!0,filterBy:"name",onChange:function(e){m(e.value),h(null)},options:null===b||void 0===b?void 0:b.results})),a.createElement("div",{className:"field",style:{width:"40%"}},a.createElement("label",{className:(0,j.AK)("col-3")},"Block"),a.createElement(v.L,{showClear:!0,style:{width:"60%"},optionLabel:"descr",optionValue:"key",value:E,filter:!0,filterBy:"descr",onChange:function(e){h(e.value)},options:null===k||void 0===k?void 0:k.results})),a.createElement("div",{className:"field",style:{width:"20%"}},a.createElement(p.z,{label:"Clear",onClick:function(e){e.preventDefault(),m(null),h(null)}}))),a.createElement(d.i,null),a.createElement(o.PS,{baseRoute:"/estimation/cupboard",description:ze,isLoading:w||r,data:null===C||void 0===C?void 0:C.results,newTable:!0,allowFilters:!1,deleteAction:function(e){return l(e).unwrap()}},a.createElement(o._P,{field:"name",header:"Component Name",filteringType:"text"}),a.createElement(o._P,{field:"descr",header:"Description",filteringType:"text"}),a.createElement(o._P,{field:"uom",header:"Base UOM",filteringType:"text"})))},$e=a.createElement(l.AW,{path:"cupboard"},a.createElement(l.AW,{path:"new",element:a.createElement(Xe,null)}),a.createElement(l.AW,{path:":id/edit",element:a.createElement(Xe,null)}),a.createElement(l.AW,{index:!0,element:a.createElement(Ye,null)})),et="/estimation/generictank/",tt=g.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listGenericTank:e.query({query:function(e){var t=e.page,n=e.size,a=e.projectId,l=e.blockId;return{url:(0,g.DS)(et,"?page=".concat(t||1,"&page_size=").concat(n||g.IV,"&proj_key=").concat(a,"&projblk_key=").concat(l))}},providesTags:function(e){var t;return e?[].concat((0,f.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.key;return{type:g.pJ.COLUMN_FOOTING,key:t}}))),[{type:g.pJ.COLUMN_FOOTING,id:"LIST"}]):[{type:g.pJ.COLUMN_FOOTING,id:"LIST"}]}}),addGenericTank:e.mutation({query:function(e){return{url:et,method:"POST",data:e}},invalidatesTags:[{type:g.pJ.COLUMN_FOOTING,id:"LIST"}]}),getGenericTank:e.query({query:function(e){return"".concat(et).concat(e)},providesTags:function(e,t,n){return[{type:g.pJ.COLUMN_FOOTING,id:n}]}}),updateGenericTank:e.mutation({query:function(e){return{url:"".concat(et),method:"POST",data:e}},invalidatesTags:function(e){return[{type:g.pJ.COLUMN_FOOTING,id:null===e||void 0===e?void 0:e.key}]}}),deleteGenericTank:e.mutation({query:function(e){return{url:"".concat(et).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:g.pJ.COLUMN_FOOTING,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),nt=tt.useAddGenericTankMutation,at=tt.useDeleteGenericTankMutation,lt=tt.useGetGenericTankQuery,ot=tt.useListGenericTankQuery,rt=tt.useUpdateGenericTankMutation,it=(tt.useGetErrorProneQuery,"Generic Tank"),ct=function(e,t,n,a){return new(n||(n=Promise))((function(l,o){function r(e){try{c(a.next(e))}catch(t){o(t)}}function i(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((a=a.apply(e,t||[])).next())}))},st=function(e){var t=(0,o.pm)(),n=t.showSuccess,r=t.showError,i=(0,a.useState)(!1),c=(0,u.Z)(i,2),f=c[0],y=c[1],E=(0,a.useState)(!1),h=(0,u.Z)(E,2),b=h[0],L=(h[1],(0,a.useState)("")),k=(0,u.Z)(L,2),N=k[0],C=k[1],w=(0,a.useState)(""),T=(0,u.Z)(w,2),O=T[0],S=T[1],x=(0,a.useState)({}),j=(0,u.Z)(x,2),P=j[0],_=j[1],A=(0,l.s0)(),I=(0,l.UO)().id,R=parseInt(I||""),F=isNaN(R)||R<=0,B=(0,a.useRef)(),Z=(0,l.TH)().state;!Z&&F&&A("/estimation/generictank");var M=(0,g.ft)(),W=lt(R,{skip:F,refetchOnMountOrArgChange:!0}),D=W.data,q=W.isLoading,U=(0,g.JB)(),K=U.data,V=U.isLoading,J=(0,g.cQ)({projectId:null===Z||void 0===Z?void 0:Z.projectKey},{skip:!(null===Z||void 0===Z?void 0:Z.projectKey)}),Q=J.data,G=(J.isLoading,(0,g.DY)({})),z=G.data,H=(G.isLoading,nt()),X=(0,u.Z)(H,2),Y=X[0],$=X[1].isLoading,ee=rt(),te=(0,u.Z)(ee,2),ne=te[0],ae=te[1].isLoading;(0,a.useEffect)((function(){_(D||Object.assign(Object.assign({},M),{proj_key:null===Z||void 0===Z?void 0:Z.projectKey,projblk_key:null===Z||void 0===Z?void 0:Z.blockKey}))}),[D]);return a.createElement(a.Fragment,null,a.createElement(o.Rm,{baseRoute:"/estimation/generictank",description:it,id:R,data:P,isUpdating:$||ae||f,ref:B,isItemsTableChanged:b,isLoading:q,onSubmit:function(e){return ct(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var a,l;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,l=Object.assign(Object.assign({},e),{base_qty:N,uom_key:O}),console.log(l),!F){t.next=9;break}return t.next=6,Y(Object.assign(Object.assign({},l),M)).unwrap();case 6:a=t.sent,t.next=12;break;case 9:return t.next=11,ne(Object.assign(Object.assign(Object.assign({},l),M),{key:null===D||void 0===D?void 0:D.key})).unwrap();case 11:a=t.sent;case 12:n("Success",a.detail),y(!0),setTimeout((function(){A("/estimation/generictank")}),g.P7),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),r("An error occurred","We couldn't save your post, try again!");case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))},renderForm:function(e,t,n,l){return a.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},a.createElement(o.Wi,{label:"Project",name:"proj_key",className:"col-10 md:col-6",control:e,errors:n,isLoading:V,leftSpan:4,rightSpan:6,formItem:{component:v.L,componentProps:{disabled:!0,optionLabel:"name",optionValue:"key",options:K}}}),a.createElement(o.Wi,{className:"col-10 md:col-5",label:"Block",name:"projblk_key",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:v.L,componentProps:{disabled:!0,optionLabel:"descr",optionValue:"key",options:null===Q||void 0===Q?void 0:Q.results}}}),a.createElement("div",{className:"col-10 md:col-1"},a.createElement(p.z,{disabled:!0,label:"Clear"})),a.createElement(d.i,null),a.createElement(o.Wi,{label:"Component Name",className:"col-12",name:"name",control:e,errors:n,leftSpan:2,rightSpan:4,formItem:{component:m.o,componentProps:{maxLength:100}}}),a.createElement(o.Wi,{label:"Tank Type",name:"tanktype_key",className:"col-10 md:col-6",control:e,errors:n,isLoading:V,leftSpan:4,rightSpan:6,formItem:{component:v.L,componentProps:{optionLabel:"name",optionValue:"key",options:K}}}),a.createElement(o.Wi,{label:"Description",className:"col-12",name:"descr",control:e,errors:n,leftSpan:2,rightSpan:6,formItem:{component:m.o,componentProps:{maxLength:100}}}),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("label",{className:"col-3",style:{paddingLeft:0}},"Base Quantity / UOM"),a.createElement(m.o,{className:"col-1",placeholder:"",value:N,onChange:function(e){return C(e.target.value)}}),a.createElement("span",{className:"inputgroup-divider"},"/"),a.createElement(v.L,{className:"col-1",optionLabel:"descr",optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}}),a.createElement("div",{className:"col-6"})),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("label",{className:"col-3"},"L x B x H / UOM"),a.createElement(m.o,{className:"col-1",style:{marginLeft:4},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}}),a.createElement("span",{className:"inputgroup-divider-normal"},"X"),a.createElement(m.o,{className:"col-1",style:{marginLeft:4},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}}),a.createElement("span",{className:"inputgroup-divider-normal"},"X"),a.createElement(m.o,{className:"col-1",style:{marginLeft:4},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}}),a.createElement("span",{className:"inputgroup-divider"},"/"),a.createElement(v.L,{className:"col-2",optionLabel:"descr",optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}}),a.createElement("div",{className:"col-4",style:{margin:"auto"}},a.createElement("label",{style:{display:"flex",justifyContent:"center"}},"Target Quantity / UOM"))),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("label",{className:"col-3"},"Tank Floor PCC"),a.createElement("div",{className:"col-3"},a.createElement(v.L,{optionLabel:"descr",style:{width:"100%"},optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}})),a.createElement("div",{className:"col-3",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:"1:1:2",disabled:!0})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",disabled:!0,value:"CFT"}))),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("label",{className:"col-3"},"Tank Floor RCC"),a.createElement("div",{className:"col-3"},a.createElement(v.L,{optionLabel:"descr",style:{width:"100%"},optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}})),a.createElement("div",{className:"col-3",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:"1:1:2",disabled:!0})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",disabled:!0,value:"CFT"}))),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("label",{className:"col-3"},"Tank Rod Pack"),a.createElement("div",{className:"col-3"},a.createElement(v.L,{optionLabel:"descr",style:{width:"100%"},optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}})),a.createElement("div",{className:"col-3",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:"1:1:2",disabled:!0})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",disabled:!0,value:"CFT"}))),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex"},a.createElement("label",{className:"col-3"},"Brickwork"),a.createElement("div",{className:"col-3"},a.createElement(v.L,{optionLabel:"descr",style:{width:"100%"},optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}})),a.createElement("div",{className:"col-3",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:"1:1:2",disabled:!0})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",disabled:!0,value:"CFT"}))),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex pb-5"},a.createElement("label",{className:"col-3"},"Wall RCC"),a.createElement("div",{className:"col-3"},a.createElement(v.L,{optionLabel:"descr",style:{width:"100%"},optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}})),a.createElement("div",{className:"col-3",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:"7.0 X 8.0 X 1.5 FT SLOPED",disabled:!0})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",disabled:!0,value:"FEET"}))),a.createElement("div",{className:"p-inputgroup field grid grid-nogutter p-fluid col-12 flex pb-5"},a.createElement("label",{className:"col-3"},"Roof RCC"),a.createElement("div",{className:"col-3"},a.createElement(v.L,{optionLabel:"descr",style:{width:"100%"},optionValue:"key",options:null===z||void 0===z?void 0:z.results,value:O,onChange:function(e){return S(e.value)}})),a.createElement("div",{className:"col-3",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:"7.0 X 8.0 X 1.5 FT SLOPED",disabled:!0})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",value:N,onChange:function(e){return C(e.target.value)}})),a.createElement("div",{className:"col-1",style:{marginLeft:5}},a.createElement(m.o,{style:{width:"100%"},placeholder:"",disabled:!0,value:"FEET"}))))}}))},ut=function(e){var t=at(),n=(0,u.Z)(t,2),l=n[0],r=n[1].isLoading,i=(0,a.useState)(null),c=(0,u.Z)(i,2),s=c[0],m=c[1],f=(0,a.useState)(null),y=(0,u.Z)(f,2),E=y[0],h=y[1],b=(0,g.dx)({}).data,L=(0,g.cQ)({projectId:s},{skip:!s}),k=L.data,N=(L.isLoading,ot({projectId:s,blockId:E},{skip:!s||!E})),C=N.data,w=N.isLoading;return a.createElement(a.Fragment,null,a.createElement("div",{className:"flex"},a.createElement("h3",{className:(0,j.AK)("m-0 my-auto")},it),a.createElement(P.rU,{to:{pathname:"/estimation/generictank/new"},state:{projectKey:s,blockKey:E},className:s?"":"disabled-link",style:{textDecoration:"none",marginRight:"auto"}},a.createElement(p.z,{disabled:!s||!E,label:"Add",className:"ml-3"}))),a.createElement(d.i,null),a.createElement("div",{className:"pl-5 flex"},a.createElement("div",{className:"field",style:{width:"40%"}},a.createElement("label",{className:(0,j.AK)("col-3")},"Project"),a.createElement(v.L,{showClear:!0,style:{width:"60%"},optionLabel:"name",optionValue:"key",value:s,filter:!0,filterBy:"name",onChange:function(e){m(e.value),h(null)},options:null===b||void 0===b?void 0:b.results})),a.createElement("div",{className:"field",style:{width:"40%"}},a.createElement("label",{className:(0,j.AK)("col-3")},"Block"),a.createElement(v.L,{showClear:!0,style:{width:"60%"},optionLabel:"descr",optionValue:"key",value:E,filter:!0,filterBy:"descr",onChange:function(e){h(e.value)},options:null===k||void 0===k?void 0:k.results})),a.createElement("div",{className:"field",style:{width:"20%"}},a.createElement(p.z,{label:"Clear",onClick:function(e){e.preventDefault(),m(null),h(null)}}))),a.createElement(d.i,null),a.createElement(o.PS,{baseRoute:"/estimation/generictank",description:it,isLoading:w||r,data:null===C||void 0===C?void 0:C.results,newTable:!0,allowFilters:!1,deleteAction:function(e){return l(e).unwrap()}},a.createElement(o._P,{field:"name",header:"Component Name",filteringType:"text"}),a.createElement(o._P,{field:"descr",header:"Description",filteringType:"text"}),a.createElement(o._P,{field:"uom",header:"Base UOM",filteringType:"text"})))},dt=a.createElement(l.AW,{path:"generictank"},a.createElement(l.AW,{path:"new",element:a.createElement(st,null)}),a.createElement(l.AW,{path:":id/edit",element:a.createElement(st,null)}),a.createElement(l.AW,{index:!0,element:a.createElement(ut,null)})),mt=function(){return a.createElement(l.Z5,null,a.createElement(l.AW,{path:"/",element:a.createElement(o.SV,{panelMenu:!0,navItems:c})},a.createElement(l.AW,{index:!0,element:a.createElement(l.Fg,{to:w,replace:!0})}),A,J,oe,ye,xe,De,$e,dt,a.createElement(l.AW,{path:":page/comming-soon",element:a.createElement(o.hg,null)}),a.createElement(l.AW,{path:"*",element:a.createElement(o.EN,{relative:!0})})))}},8356:function(e,t,n){n.d(t,{i:function(){return r}});var a=n(969),l=n(4756);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o.apply(this,arguments)}var r=a.forwardRef((function(e,t){var n="horizontal"===e.layout,i="vertical"===e.layout,c=l.gb.findDiffKeys(e,r.defaultProps),s=(0,l.AK)("p-divider p-component p-divider-".concat(e.layout," p-divider-").concat(e.type),{"p-divider-left":n&&(!e.align||"left"===e.align),"p-divider-right":n&&"right"===e.align,"p-divider-center":n&&"center"===e.align||i&&(!e.align||"center"===e.align),"p-divider-top":i&&"top"===e.align,"p-divider-bottom":i&&"bottom"===e.align},e.className);return a.createElement("div",o({className:s,style:e.style,role:"separator"},c),a.createElement("div",{className:"p-divider-content"},e.children))}));r.displayName="Divider",r.defaultProps={__TYPE:"Divider",align:null,layout:"horizontal",type:"solid",style:null,className:null}}}]);
//# sourceMappingURL=798.bad1170b.chunk.js.map