"use strict";(self.webpackChunkbuild_iq_app=self.webpackChunkbuild_iq_app||[]).push([[645],{8645:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var r,o,a=n(969),i=n(734),u=n(1930),c=n(9457),s="customers",l="Customer",m=[{items:[{label:"Customer",icon:"pi ml-3",template:(r=s,(0,u.E7)("/".concat(c.o,"/").concat(r)+(o?"/comming-soon":"")))}]}],p=n(2723),d=n(6234),f=n(7765),y=n(8224),g=n(8079),E=n(184),v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},S="/sale/customer/",h=E.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listCustomer:e.query({query:function(e){var t=e.page,n=e.size;return{url:(0,E.DS)(S,"?page=".concat(t||1,"&page_size=").concat(n||E.IV))}},providesTags:function(e){var t;return e?[].concat((0,g.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:E.pJ.CUSTOMER,id:t}}))),[{type:E.pJ.CUSTOMER,id:"LIST"}]):[{type:E.pJ.CUSTOMER,id:"LIST"}]}}),addCustomer:e.mutation({query:function(e){return{url:S,method:"POST",body:e}},invalidatesTags:[{type:E.pJ.CUSTOMER,id:"LIST"}]}),getCustomer:e.query({query:function(e){return"".concat(S).concat(e)},providesTags:function(e,t,n){return[{type:E.pJ.CUSTOMER,id:n}]}}),updateCustomer:e.mutation({query:function(e){var t=e.key,n=v(e,["key"]);return{url:"".concat(S).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:E.pJ.CUSTOMER,id:null===e||void 0===e?void 0:e.id}]}}),getStates:e.query({query:function(){return{url:"/geo/state/"}},providesTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[].concat((0,g.Z)(e.map((function(e){var t=e.state_key;return{type:E.pJ.STATES,id:t}}))),[{type:E.pJ.STATES,id:"LIST"}])}}),getCities:e.query({query:function(e){return{url:"/geo/city/?state=".concat(e)}},providesTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[].concat((0,g.Z)(e.map((function(e){var t=e.city_key;return{type:E.pJ.CITIES,id:t}}))),[{type:E.pJ.CITIES,id:"LIST"}])}}),deleteCustomer:e.mutation({query:function(e){return{url:"".concat(S).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:E.pJ.CUSTOMER,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),b=h.useAddCustomerMutation,C=h.useDeleteCustomerMutation,T=h.useGetCustomerQuery,L=h.useListCustomerQuery,O=h.useUpdateCustomerMutation,q=(h.useGetErrorProneQuery,h.useGetCitiesQuery),w=h.useGetStatesQuery,x=(h.endpoints.getCustomer,function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function u(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))}),I=function(e){var t=(0,u.pm)(),n=t.showSuccess,r=t.showError,o=(0,a.useState)(!1),m=(0,d.Z)(o,2),g=m[0],v=m[1],S=(0,i.s0)(),h=(0,i.UO)().id,C=parseInt(h||""),L=isNaN(C)||C<=0,I=(0,a.useState)(""),k=(0,d.Z)(I,2),P=k[0],A=k[1],W=(0,E.ft)(),J=T(C,{skip:L}),U=J.data,Z=J.isLoading,_=w().data,M=q(P).data,R=b(),j=(0,d.Z)(R,2),N=j[0],Q=j[1].isLoading,G=O(),V=(0,d.Z)(G,2),D=V[0],F=V[1].isLoading;return a.createElement(a.Fragment,null,a.createElement(u.Rm,{baseRoute:"/".concat(c.o,"/").concat(s),description:l,id:C,data:U,isUpdating:Q||F||g,isLoading:Z,onSubmit:function(e){return x(void 0,void 0,void 0,(0,p.Z)().mark((function t(){var o;return(0,p.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!L){t.next=7;break}return t.next=4,N(Object.assign(Object.assign({},e),W)).unwrap();case 4:o=t.sent,t.next=10;break;case 7:return t.next=9,D(Object.assign(Object.assign({},e),W)).unwrap();case 9:o=t.sent;case 10:n("Success",o.detail),v(!0),setTimeout((function(){S("/".concat(c.o,"/").concat(s))}),E.P7),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),r("An error occurred","We couldn't save your post, try again!");case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))},renderForm:function(e,t,n){return a.createElement("div",{className:"pl-8"},a.createElement(u.Wi,{label:"Customer Name",name:"name",control:e,errors:n,required:!0,leftSpan:3,rightSpan:5,formItem:{component:f.o,componentProps:{maxLength:100}}}),a.createElement(u.Wi,{label:"Address Line 1",name:"addr1",control:e,errors:n,leftSpan:3,rightSpan:6,formItem:{component:f.o,componentProps:{maxLength:100}}}),a.createElement(u.Wi,{label:"Address Line 2",name:"addr2",control:e,errors:n,leftSpan:3,rightSpan:6,formItem:{component:f.o,componentProps:{maxLength:100}}}),a.createElement(u.Wi,{label:"State",name:"state_key",control:e,errors:n,required:!0,leftSpan:3,rightSpan:4,useExplicit:!0,onChange:function(e){A(e.value)},formItem:{component:y.L,componentProps:{optionLabel:"name",optionValue:"key",filter:!0,filterBy:"name",options:_}}}),a.createElement(u.Wi,{label:"City",name:"city_key",control:e,errors:n,required:!0,leftSpan:3,rightSpan:4,formItem:{component:y.L,componentProps:{optionLabel:"name",optionValue:"key",filter:!0,filterBy:"name",options:M}}}))}}))},k=function(e){var t=L({}),n=t.data,r=t.isLoading,o=C(),i=(0,d.Z)(o,2),m=i[0],p=i[1].isLoading;return a.createElement(u.PS,{baseRoute:"/".concat(c.o,"/").concat(s),description:l,isLoading:r||p,data:null===n||void 0===n?void 0:n.results,deleteAction:function(e){return m(e).unwrap()},newTable:!0,showHeader:!0},a.createElement(u._P,{field:"id",header:"Customer Code",filteringType:"number"}),a.createElement(u._P,{field:"name",header:"Customer Name",filteringType:"text"}))},P=a.createElement(i.AW,{path:s},a.createElement(i.AW,{path:"new",element:a.createElement(I,null)}),a.createElement(i.AW,{path:":id/edit",element:a.createElement(I,null)}),a.createElement(i.AW,{index:!0,element:a.createElement(k,null)})),A=function(){return a.createElement(i.Z5,null,a.createElement(i.AW,{path:"/",element:a.createElement(u.SV,{navItems:m})},a.createElement(i.AW,{index:!0,element:a.createElement(i.Fg,{to:s,replace:!0})}),P,a.createElement(i.AW,{path:":page/comming-soon",element:a.createElement(u.hg,null)}),a.createElement(i.AW,{path:"*",element:a.createElement(u.EN,{relative:!0})})))}}}]);
//# sourceMappingURL=645.f6059c58.chunk.js.map