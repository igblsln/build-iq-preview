"use strict";(self.webpackChunkbuild_iq_app=self.webpackChunkbuild_iq_app||[]).push([[473],{1394:function(e,t,n){n.r(t),n.d(t,{default:function(){return vr}});var r=n(969),a=n(734),o=n(1930),i="projects",l=function(e,t){return(0,o.E7)("/".concat(i,"/").concat(e)+(t?"/comming-soon":""))},c=[{items:[{label:"Project",icon:"pi ml-3",template:l("project")},{label:"Project Type",icon:"pi ml-3",template:l("projecttype")},{label:"Task",icon:"pi ml-3",template:l("task")},{label:"Unit",icon:"pi ml-3",template:l("unit")}]}],s=n(2723),u=n(6234),d=n(4576),p=n(8079),m=n(4411),f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},v="/project/project/",y=m.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listProjects:e.query({query:function(e){var t=e.page,n=e.size;return{url:(0,m.DS)(v,"?page=".concat(t||1,"&page_size=").concat(n||m.IV))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:m.pJ.PROJECTS,id:t}}))),[{type:m.pJ.PROJECTS,id:"PARTIAL-LIST"}]):[{type:m.pJ.PROJECTS,id:"PARTIAL-LIST"}]}}),addProject:e.mutation({query:function(e){return{url:v,method:"POST",body:e}},invalidatesTags:[{type:m.pJ.PROJECTS,id:"LIST"}]}),getProject:e.query({query:function(e){return"".concat(v,"/").concat(e)},providesTags:function(e,t,n){return[{type:m.pJ.PROJECTS,id:n}]}}),updateProject:e.mutation({query:function(e){var t=e.key,n=f(e,["key"]);return{url:"".concat(v).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:m.pJ.PROJECTS,id:null===e||void 0===e?void 0:e.id}]}}),deleteProject:e.mutation({query:function(e){return{url:"".concat(v).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:m.pJ.PROJECTS,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),g=(y.useAddProjectMutation,y.useDeleteProjectMutation),E=(y.useGetProjectQuery,y.useListProjectsQuery),h=(y.useUpdateProjectMutation,y.useGetErrorProneQuery,y.endpoints.getProject,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}),b="client/cost_category/",S=m.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listCostCategories:e.query({query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;return{url:(0,m.DS)(b,"?page=".concat(e,"&page_size=").concat(t))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:m.pJ.COST_CATEGORIES,id:t}}))),[{type:m.pJ.COST_CATEGORIES,id:"PARTIAL-LIST"}]):[{type:m.pJ.COST_CATEGORIES,id:"PARTIAL-LIST"}]}}),addCostCategory:e.mutation({query:function(e){return{url:b,method:"POST",body:e}},invalidatesTags:[{type:m.pJ.COST_CATEGORIES,id:"LIST"}]}),getCostCategory:e.query({query:function(e){return"".concat(b).concat(e)},providesTags:function(e,t,n){return[{type:m.pJ.COST_CATEGORIES,id:n}]}}),updateCostCategory:e.mutation({query:function(e){var t=e.key,n=h(e,["key"]);return{url:"".concat(b).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:m.pJ.COST_CATEGORIES,id:null===e||void 0===e?void 0:e.id}]}}),deleteCostCategory:e.mutation({query:function(e){return{url:"".concat(b).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:m.pJ.COST_CATEGORIES,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),T=(S.useAddCostCategoryMutation,S.useDeleteCostCategoryMutation,S.useGetCostCategoryQuery,S.useUpdateCostCategoryMutation,S.useListCostCategoriesQuery,S.endpoints.getCostCategory,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}),j=m.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listCostCodes:e.query({query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;return{url:(0,m.DS)("client/cost_code","?page=".concat(e,"&page_size=").concat(t))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:m.pJ.COST_CODES,id:t}}))),[{type:m.pJ.COST_CODES,id:"PARTIAL-LIST"}]):[{type:m.pJ.COST_CODES,id:"PARTIAL-LIST"}]}}),addCostCode:e.mutation({query:function(e){return{url:"/client/cost_code/",method:"POST",body:e}},invalidatesTags:[{type:m.pJ.COST_CODES,id:"LIST"}]}),getCostCode:e.query({query:function(e){return"/client/cost_code/".concat(e)},providesTags:function(e,t,n){return[{type:m.pJ.COST_CODES,id:n}]}}),updateCostCode:e.mutation({query:function(e){var t=e.key,n=T(e,["key"]);return{url:"/client/cost_code/".concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:m.pJ.COST_CODES,id:null===e||void 0===e?void 0:e.id}]}}),deleteCostCode:e.mutation({query:function(e){return{url:"/client/cost_code/".concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:m.pJ.COST_CODES,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),x=(j.useAddCostCodeMutation,j.useDeleteCostCodeMutation,j.useGetCostCodeQuery,j.useUpdateCostCodeMutation,j.useListCostCodesQuery,j.endpoints.getCostCode,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}),P="/project/type/",w=m.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listProjectTypes:e.query({query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;return{url:(0,m.DS)(P,"?page=".concat(e,"&page_size=").concat(t))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:m.pJ.PROJECT_TYPES,id:t}}))),[{type:m.pJ.PROJECT_TYPES,id:"PARTIAL-LIST"}]):[{type:m.pJ.PROJECT_TYPES,id:"PARTIAL-LIST"}]}}),addProjectType:e.mutation({query:function(e){return{url:P,method:"POST",body:e}},invalidatesTags:[{type:m.pJ.PROJECT_TYPES,id:"LIST"}]}),getProjectType:e.query({query:function(e){return"".concat(P).concat(e)},providesTags:function(e,t,n){return[{type:m.pJ.PROJECT_TYPES,id:n}]}}),updateProjectType:e.mutation({query:function(e){var t=e.key,n=x(e,["key"]);return{url:"".concat(P).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:m.pJ.PROJECT_TYPES,id:null===e||void 0===e?void 0:e.key}]}}),deleteProjectType:e.mutation({query:function(e){return{url:"".concat(P).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:m.pJ.PROJECT_TYPES,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),O=(w.useAddProjectTypeMutation,w.useDeleteProjectTypeMutation,w.useGetProjectTypeQuery,w.useUpdateProjectTypeMutation,w.useListProjectTypesQuery,w.endpoints.getProjectType,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}),k="/geo/state/",C=m.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{getStates:e.query({query:function(){return{url:k}},providesTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[].concat((0,p.Z)(e.map((function(e){return{type:"States",id:e.state_key}}))),[{type:"States",id:"LIST"}])}}),addState:e.mutation({query:function(e){return{url:k,method:"POST",body:e}},invalidatesTags:[{type:"States",id:"LIST"}]}),getState:e.query({query:function(e){return"".concat(k).concat(e)},providesTags:function(e,t,n){return[{type:"States",id:n}]}}),updateState:e.mutation({query:function(e){var t=e.state_key,n=O(e,["state_key"]);return{url:"".concat(k).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:"States",id:null===e||void 0===e?void 0:e.state_key}]}}),deleteState:e.mutation({query:function(e){return{url:"".concat(k).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:"States",id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),N=(C.useAddStateMutation,C.useDeleteStateMutation,C.useGetStateQuery,C.useGetStatesQuery,C.useUpdateStateMutation,C.endpoints.getState,n(6770)),A=n(3829),L=n(8356),I=n(4489),_=n(5616),R=n(8904),q=n(5940),J=n(4756);function Z(){return Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z.apply(this,arguments)}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(c){l=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"===typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var U=r.memo(r.forwardRef((function(e,t){var n=F(r.useState(!1),2),a=n[0],o=n[1],i=F(r.useState(!1),2),l=i[0],c=i[1],s=F(r.useState(0),2),u=s[0],d=s[1],p=F(r.useState(1),2),m=p[0],f=p[1],v=r.useRef(null),y=r.useRef(null),g=r.useRef(null),E=r.useRef(!1),h=function(){e.preview&&(o(!0),setTimeout((function(){c(!0)}),25))},b=function(){E.current=!0},S=function(){E.current||(c(!1),d(0),f(1)),E.current=!1},T=function(){var t=e.alt,n=e.src;J.p7.saveAs({name:t,src:n}),E.current=!0},j=function(){d((function(e){return e+90})),E.current=!0},x=function(){d((function(e){return e-90})),E.current=!0},P=function(){f((function(e){return e+.1})),E.current=!0},w=function(){f((function(e){return e-.1})),E.current=!0},O=function(){J.P9.set("modal",y.current,I.ZP.autoZIndex,I.ZP.zIndex.modal)},k=function(){e.onShow&&e.onShow()},C=function(){J.p7.addClass(y.current,"p-component-overlay-leave")},N=function(){e.onHide&&e.onHide()},A=function(){J.P9.clear(y.current),o(!1)};(0,R.zq)((function(){y.current&&J.P9.clear(y.current)}));var L=e.src,D=e.alt,W=e.width,M=e.height,G=J.gb.findDiffKeys(e,U.defaultProps),K=(0,J.AK)("p-image p-component",e.className,{"p-image-preview-container":e.preview}),z=function(){var t=e.downloadable,n={transform:"rotate("+u+"deg) scale("+m+")"},a=m<=.5||m>=1.5;return r.createElement("div",{ref:y,className:"p-image-mask p-component-overlay p-component-overlay-enter",onClick:S},r.createElement("div",{className:"p-image-toolbar"},t&&r.createElement("button",{className:"p-image-action p-link",onClick:T,type:"button"},r.createElement("i",{className:"pi pi-download"})),r.createElement("button",{className:"p-image-action p-link",onClick:j,type:"button"},r.createElement("i",{className:"pi pi-refresh"})),r.createElement("button",{className:"p-image-action p-link",onClick:x,type:"button"},r.createElement("i",{className:"pi pi-undo"})),r.createElement("button",{className:"p-image-action p-link",onClick:w,type:"button",disabled:a},r.createElement("i",{className:"pi pi-search-minus"})),r.createElement("button",{className:"p-image-action p-link",onClick:P,type:"button",disabled:a},r.createElement("i",{className:"pi pi-search-plus"})),r.createElement("button",{className:"p-image-action p-link",type:"button"},r.createElement("i",{className:"pi pi-times"}))),r.createElement(_.K,{nodeRef:g,classNames:"p-image-preview",in:l,timeout:{enter:150,exit:150},unmountOnExit:!0,onEntering:O,onEntered:k,onExit:C,onExiting:N,onExited:A},r.createElement("div",{ref:g},r.createElement("img",{src:e.src,className:"p-image-preview",style:n,onClick:b,alt:e.alt}))))}(),B=e.template?J.gb.getJSXElement(e.template,e):r.createElement("i",{className:"p-image-preview-icon pi pi-eye"}),V=e.preview?r.createElement("div",{className:"p-image-preview-indicator",onClick:h},B):null,Q=r.createElement("img",{src:L,className:e.imageClassName,width:W,height:M,style:e.imageStyle,alt:D,onError:e.onError});return r.createElement("span",Z({ref:v,className:K},G),Q,V,a&&r.createElement(q.h,{element:z,appendTo:document.body}))})));U.displayName="Image",U.defaultProps={__TYPE:"Image",preview:!1,className:null,downloadable:!1,imageStyle:null,imageClassName:null,template:null,src:null,alt:null,width:null,height:null,onError:null};var W=n(6822),M=function(e){var t,n,a,o,i,l=e.data,c=e.deleteData;return r.createElement(A.s,{className:"project-grid",header:l.name,icons:r.createElement(r.Fragment,null,r.createElement(W.rU,{to:"/projects/project/".concat(l.key,"/edit"),style:{textDecoration:"none"}},r.createElement(N.z,{icon:"pi pi-eye",className:"p-button-rounded p-button-text"})),r.createElement(N.z,{style:{height:"35px",width:"20px"},className:"p-button-rounded p-button-text",icon:"pi pi-trash",onClick:function(){return c(l.key)}}))},r.createElement("div",{className:"flex"},r.createElement("div",{className:"grid",style:{paddingTop:"5px"}},r.createElement("div",{className:"col-6"},"State/City"),r.createElement("div",{className:"col-6"},null===(t=l.state)||void 0===t?void 0:t.id,"/",null===(n=l.city)||void 0===n?void 0:n.name),r.createElement("div",{className:"col-6"},"Project Type"),r.createElement("div",{className:"col-6"},null===(a=l.pro_type)||void 0===a?void 0:a.descr),r.createElement("div",{className:"col-6"},"Total Units"),r.createElement("div",{className:"col-6"},(0,m.uf)(l.no_of_units)),r.createElement("div",{className:"col-6"},"Price/SqFt"),r.createElement("div",{className:"col-6"},(0,m.xG)(null===(o=null===l||void 0===l?void 0:l.latest_proj_price)||void 0===o?void 0:o.effprice)),r.createElement("div",{className:"col-6"},"Status"),r.createElement("div",{className:"col-6"},(null===(i=l.latest_proj_status)||void 0===i?void 0:i.descr)||"NA")),r.createElement(L.i,{layout:"vertical"}),r.createElement(U,{src:"https://www.levelset.com/wp-content/uploads/2019/02/apartments.jpg",alt:"Image",width:"150",height:"125"})))},G=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},K=function(){var e=(0,o.pm)(),t=e.showSuccess,n=e.showError,a=(0,r.useState)(1),i=(0,u.Z)(a,2),l=(i[0],i[1],E({},{refetchOnMountOrArgChange:!0})),c=l.data,p=l.isLoading,m=(l.isFetching,g()),f=(0,u.Z)(m,2),v=f[0],y=f[1].isLoading,h=function(e){return v(e).unwrap()},b=function(e){return G(void 0,void 0,void 0,(0,s.Z)().mark((function r(){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:(0,d.V)({message:"Are you sure you want to delete?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){return G(void 0,void 0,void 0,(0,s.Z)().mark((function r(){var a,o;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h(e);case 3:o=r.sent,t("Success",o),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),n("Failed",null===(a=null===r.t0||void 0===r.t0?void 0:r.t0.data)||void 0===a?void 0:a.detail);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))},reject:function(){}});case 1:case"end":return r.stop()}}),r)})))};return r.createElement(r.Fragment,null,r.createElement(o.PS,{baseRoute:"/projects/project",description:"Project",isLoading:p||y,data:null===c||void 0===c?void 0:c.results,showGridView:!0,showHeader:!0,newTable:!0,gridTileRenderer:function(e){if(e)return r.createElement("div",{className:"col-12 md:col-6 p-1"},r.createElement(M,{data:e,deleteData:b}))},deleteAction:h},r.createElement(o._P,{field:"id",header:"Project Code",filteringType:"text"}),r.createElement(o._P,{field:"name",header:"Project Name",filteringType:"text"}),r.createElement(o._P,{field:"cityname",header:"State/City",filteringType:"text",displayValueGetter:function(e){return"".concat(e.state.id,"/").concat(e.city.name)}}),r.createElement(o._P,{field:"pro_type.descr",header:"Project Type",filteringType:"text"}),r.createElement(o._P,{field:"no_of_units",header:"Total Units",defaultValue:0,align:"right",type:"number",filteringType:"number"}),r.createElement(o._P,{field:"latest_proj_price.effprice",type:"currency",header:"Price/sqft",align:"right",filteringType:"number",defaultValue:0}),r.createElement(o._P,{field:"latest_proj_status.descr",header:"Status",filteringType:"text",align:"center",alignHeader:"center",headerStyle:{justifyContent:"center"},defaultValue:"N/A"})))},z=n(7765),B=n(8224),V=n(6098),Q=n(1387),H=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Y="/project/project/",X=m.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listProject:e.query({query:function(e){var t=e.page,n=e.size;return{url:(0,m.DS)(Y,"?page=".concat(t||1,"&page_size=").concat(n||m.IV))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:m.pJ.PROJECT,id:t}}))),[{type:m.pJ.PROJECT,id:"LIST"}]):[{type:m.pJ.PROJECT,id:"LIST"}]}}),addProject:e.mutation({query:function(e){return{url:Y,method:"POST",body:e}},invalidatesTags:[{type:m.pJ.PROJECT,id:"LIST"}]}),getProject:e.query({query:function(e){return"".concat(Y).concat(e)},providesTags:function(e,t,n){return[{type:m.pJ.PROJECT,id:n}]}}),updateProject:e.mutation({query:function(e){var t=e.key,n=H(e,["key"]);return{url:"".concat(Y).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:m.pJ.PROJECT,id:null===e||void 0===e?void 0:e.id}]}}),deleteProject:e.mutation({query:function(e){return{url:"".concat(Y).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:m.pJ.PROJECT,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}}),getStates:e.query({query:function(){return{url:"/geo/state/"}},providesTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[].concat((0,p.Z)(e.map((function(e){var t=e.state_key;return{type:m.pJ.STATES,id:t}}))),[{type:m.pJ.STATES,id:"LIST"}])}}),getCities:e.query({query:function(e){return{url:e?"/geo/city/?state=".concat(e):"/geo/city/"}},providesTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[].concat((0,p.Z)(e.map((function(e){var t=e.city_key;return{type:m.pJ.CITIES,id:t}}))),[{type:m.pJ.CITIES,id:"LIST"}])}}),getProjectStatuses:e.query({query:function(){return{url:"/project/status/"}},providesTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[].concat((0,p.Z)(e.map((function(e){var t=e.projstatus_key;return{type:m.pJ.PROJECT_STATUS,id:t}}))),[{type:m.pJ.PROJECT_STATUS,id:"LIST"}])}})}}}),$=X.useAddProjectMutation,ee=(X.useDeleteProjectMutation,X.useGetProjectQuery),te=(X.useListProjectQuery,X.useUpdateProjectMutation),ne=(X.useGetErrorProneQuery,X.useGetCitiesQuery),re=X.useGetStatesQuery,ae=X.useGetProjectStatusesQuery,oe=(X.endpoints.getProject,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}),ie="/project/type/",le=m.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listProjectType:e.query({query:function(e){var t=e.page,n=e.size;return{url:(0,m.DS)(ie,"?page=".concat(t||1,"&page_size=").concat(n||m.IV))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:m.pJ.PROJECT_TYPES,id:t}}))),[{type:m.pJ.PROJECT_TYPES,id:"LIST"}]):[{type:m.pJ.PROJECT_TYPES,id:"LIST"}]}}),addProjectType:e.mutation({query:function(e){return{url:ie,method:"POST",body:e}},invalidatesTags:[{type:m.pJ.PROJECT_TYPES,id:"LIST"}]}),getProjectType:e.query({query:function(e){return"".concat(ie).concat(e)},providesTags:function(e,t,n){return[{type:m.pJ.PROJECT_TYPES,id:n}]}}),updateProjectType:e.mutation({query:function(e){var t=e.key,n=oe(e,["key"]);return{url:"".concat(ie).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:m.pJ.PROJECT_TYPES,id:null===e||void 0===e?void 0:e.id}]}}),deleteProjectType:e.mutation({query:function(e){return{url:"".concat(ie).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:m.pJ.PROJECT_TYPES,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),ce=le.useAddProjectTypeMutation,se=le.useDeleteProjectTypeMutation,ue=le.useGetProjectTypeQuery,de=le.useListProjectTypeQuery,pe=le.useUpdateProjectTypeMutation,me=(le.useGetErrorProneQuery,le.endpoints.getProjectType,function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))}),fe=function(e){var t=(0,r.useRef)(null),n=(0,r.useState)(!1),i=(0,u.Z)(n,2),l=i[0],c=i[1],d=(0,r.useState)(null),p=(0,u.Z)(d,2),f=p[0],v=p[1],y=(0,r.useState)(null),g=(0,u.Z)(y,2),E=g[0],h=g[1],b=(0,r.useState)(!1),S=(0,u.Z)(b,2),T=S[0],j=S[1],x=(0,a.s0)(),P=(0,a.UO)().id,w=parseInt(P||""),O=isNaN(w)||w<=0,k=(0,r.useState)(""),C=(0,u.Z)(k,2),A=C[0],L=C[1],I=(0,m.ft)(),_=(0,a.TH)().state,R=de({}).data,q=re().data,J=ne(A).data,Z=(ae().data,ee(w,{skip:O,refetchOnMountOrArgChange:!0})),D=Z.data,F=Z.isLoading,W=$(),M=(0,u.Z)(W,2),G=M[0],K=M[1].isLoading,H=te(),Y=(0,u.Z)(H,2),X=Y[0],oe=Y[1].isLoading,ie=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"success",summary:e,detail:n,life:3e3})},le=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"error",summary:e,detail:n,life:3e3})},ce=[{label:"Add",items:J||[]}];return r.createElement(r.Fragment,null,r.createElement(Q.F,{ref:t}),r.createElement(o.Rm,{baseRoute:"/projects/project",description:"Project ",id:w,data:D,dataFromLocation:_,isUpdating:K||oe||l,isLoading:F,onSubmit:function(e){return me(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var n,r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=Object,t.t1=Object.assign(Object.assign({},e),I),!T){t.next=6;break}t.t2="null",t.next=14;break;case 6:if(!E){t.next=12;break}return t.next=9,(0,m.f7)(E);case 9:t.t3=t.sent,t.next=13;break;case 12:t.t3=null===D||void 0===D?void 0:D.elevationimage;case 13:t.t2=t.t3;case 14:if(t.t4=t.t2,t.t5=T||E?"true":"false",t.t6={elevationimage:t.t4,is_image_updated:t.t5},n=t.t0.assign.call(t.t0,t.t1,t.t6),console.log(n),t.prev=19,!O){t.next=26;break}return t.next=23,G(Object.assign(Object.assign({},n),{projstatus_key:9})).unwrap();case 23:r=t.sent,t.next=29;break;case 26:return t.next=28,X(n).unwrap();case 28:r=t.sent;case 29:ie("Success",r.detail),c(!0),f?setTimeout((function(){x("/projects/".concat(r.data.key,"/").concat(f))}),m.P7):setTimeout((function(){x("/projects/project")}),m.P7),t.next=37;break;case 34:t.prev=34,t.t7=t.catch(19),le("An error occurred","We couldn't save your post, try again!");case 37:case"end":return t.stop()}}),t,null,[[19,34]])})))},renderForm:function(e,t,n,a){return r.createElement("div",{className:"flex"},r.createElement("div",{className:"col-8"},r.createElement("div",{className:"card",style:{width:"100%"}},r.createElement("div",null,r.createElement(o.Wi,{label:"Project Code",name:"id",control:e,errors:n,required:!0,leftSpan:4,rightSpan:4,formItem:{component:z.o,componentProps:{maxLength:25,disabled:!O}}}),r.createElement(o.Wi,{label:"Project Name",name:"name",control:e,errors:n,required:!0,leftSpan:4,rightSpan:6,formItem:{component:z.o,componentProps:{maxLength:100}}}),r.createElement(o.Wi,{label:"Project Type",name:"projtyp_key",control:e,errors:n,required:!0,leftSpan:4,rightSpan:4,formItem:{component:B.L,componentProps:{optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",options:null===R||void 0===R?void 0:R.results}}}),r.createElement(o.Wi,{label:"Address Line 1",name:"addr1",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:z.o,componentProps:{maxLength:100}}}),r.createElement(o.Wi,{label:"Address Line 2",name:"addr2",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:z.o,componentProps:{maxLength:100}}}),r.createElement(o.Wi,{label:"State",name:"state_key",control:e,errors:n,required:!0,leftSpan:4,rightSpan:4,useExplicit:!0,onChange:function(e){L(e.value)},formItem:{component:B.L,componentProps:{optionLabel:"name",optionValue:"key",filter:!0,filterBy:"name",options:q}}}),r.createElement(o.Wi,{label:"City",name:"city_key",control:e,errors:n,required:!0,leftSpan:4,rightSpan:4,formItem:{component:B.L,componentProps:{optionGroupTemplate:r.createElement("div",{style:{cursor:"pointer",textAlign:"center",backgroundColor:"#e6e1e1",color:"black",lineHeight:2.5},onClick:function(){return x("/projects/city",{state:{url:O?"/projects/project/new":"/projects/project/".concat(null===D||void 0===D?void 0:D.key,"/edit"),data:a()}})}},"-- Create And Edit --"),optionLabel:"name",optionValue:"key",filter:!0,filterBy:"name",optionGroupLabel:"label",optionGroupChildren:"items",options:ce}}}),r.createElement(o.Wi,{label:"No of Units",name:"no_of_units",control:e,errors:n,leftSpan:4,rightSpan:3,formItem:{component:V.h3,componentProps:{thousandSeparator:!0,disabled:!0,className:"p-inputtext p-component"}}}),r.createElement(o.Wi,{label:"Project Status",name:"status",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:z.o,componentProps:{disabled:!0,value:O?"New Project":(null===D||void 0===D?void 0:D.latest_proj_status.descr)||(null===D||void 0===D?void 0:D.status.descr)}}})))),r.createElement("div",{className:"col-4"},r.createElement("div",{className:"flex"},r.createElement("div",{className:"col-6"},r.createElement(N.z,{label:"Unit",onClick:function(e){O?v("unit"):(e.preventDefault(),x("/projects/".concat(w,"/unit")))},className:"project-page-tags",style:{width:"100%"}})),r.createElement("div",{className:"col-6"},r.createElement(N.z,{label:"Status Change",onClick:function(e){O?v("statuschange"):(e.preventDefault(),x("/projects/".concat(w,"/statuschange")))},className:"project-page-tags",style:{width:"100%"}}))),r.createElement("div",{className:"flex"},r.createElement("div",{className:"col-6"},r.createElement(N.z,{label:"Availability",onClick:function(e){O?v("availability"):(e.preventDefault(),x("/projects/".concat(w,"/availability")))},className:"project-page-tags",style:{width:"100%"}})),r.createElement("div",{className:"col-6"},r.createElement(N.z,{label:"Price Change",onClick:function(e){O?v("pricechange"):(e.preventDefault(),x("/projects/".concat(w,"/pricechange")))},className:"project-page-tags",style:{width:"100%"}}))),r.createElement("div",{className:"flex"},r.createElement("div",{className:"col-6"},r.createElement(N.z,{label:"Pay Term",onClick:function(e){O?v("paymentterm"):(e.preventDefault(),x("/projects/".concat(w,"/paymentterm")))},className:"project-page-tags",style:{width:"100%"}})),r.createElement("div",{className:"col-6"},r.createElement(N.z,{label:"Contact",onClick:function(e){e.preventDefault()},className:"project-page-tags",style:{width:"100%"}}))),r.createElement("div",{className:"flex"},r.createElement("div",{className:"p-5 justify-content-center",style:{width:"100%"}},r.createElement("input",{id:"img-upload",type:"file",style:{display:"none"},accept:"image/*",onChange:function(e){var t;(null===(t=e.target.files)||void 0===t?void 0:t.length)&&h(e.target.files[0])}}),!T&&!E&&(null===D||void 0===D?void 0:D.elevationimage)&&r.createElement(U,{preview:!0,width:"100%",style:{padding:30,marginTop:"auto"},src:(null===D||void 0===D?void 0:D.elevationimage)||"https://www.levelset.com/wp-content/uploads/2019/02/apartments.jpg",alt:"Image Text"}),E&&"clear"!==E&&r.createElement(U,{preview:!0,width:"100%",style:{padding:30,marginTop:"auto"},src:URL.createObjectURL(E),alt:"Image Text"}),r.createElement("div",{style:{display:"flex"}},r.createElement(N.z,{onClick:function(e){var t;e.preventDefault(),null===(t=document.getElementById("img-upload"))||void 0===t||t.click()},className:"p-button-warning mr-3",style:{paddingRight:20,flexGrow:1},label:"Add Image"}),!T&&(E||!!(null===D||void 0===D?void 0:D.elevationimage))&&r.createElement(N.z,{style:{flexGrow:1},onClick:function(e){e.preventDefault(),h(null),j(!0)},className:"p-button-plain",label:"Clear"}))))))}}))},ve=r.createElement(a.AW,{path:"project"},r.createElement(a.AW,{path:"new",element:r.createElement(fe,null)}),r.createElement(a.AW,{path:":id/edit",element:r.createElement(fe,null)}),r.createElement(a.AW,{index:!0,element:r.createElement(K,null)})),ye=n(4401),ge=n(7624),Ee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},he="/client/cost_code/",be=m.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listCostCode:e.query({query:function(e){var t=e.page,n=e.size;return{url:(0,m.DS)(he,"?page=".concat(t||1,"&page_size=").concat(n||m.IV))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:m.pJ.COST_CODES,id:t}}))),[{type:m.pJ.COST_CODES,id:"LIST"}]):[{type:m.pJ.COST_CODES,id:"LIST"}]}}),addCostCode:e.mutation({query:function(e){return{url:he,method:"POST",body:e}},invalidatesTags:[{type:m.pJ.COST_CODES,id:"LIST"}]}),getCostCode:e.query({query:function(e){return"".concat(he).concat(e)},providesTags:function(e,t,n){return[{type:m.pJ.COST_CODES,id:n}]}}),updateCostCode:e.mutation({query:function(e){var t=e.key,n=Ee(e,["key"]);return{url:"".concat(he).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:m.pJ.COST_CODES,id:null===e||void 0===e?void 0:e.id}]}}),deleteCostCode:e.mutation({query:function(e){return{url:"".concat(he).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:m.pJ.COST_CODES,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),Se=be.useAddCostCodeMutation,Te=be.useDeleteCostCodeMutation,je=be.useGetCostCodeQuery,xe=be.useListCostCodeQuery,Pe=be.useUpdateCostCodeMutation,we=(be.useGetErrorProneQuery,be.endpoints.getCostCode,function(e){var t=xe({}),n=t.data,a=t.isLoading,i=Te(),l=(0,u.Z)(i,2),c=l[0],s=l[1].isLoading;return r.createElement(o.PS,{baseRoute:"/projects/costcode",description:"Cost Code",isLoading:a||s,data:null===n||void 0===n?void 0:n.results,deleteAction:function(e){return c(e).unwrap()}},r.createElement(ye.s,{headerStyle:ge.iR,field:"id",header:"Code Code",sortable:!0,filter:!0,dataType:"numeric",style:{minWidth:"8rem"}}),r.createElement(ye.s,{headerStyle:ge.iR,field:"descr",header:"Code Description",sortable:!0,filter:!0,style:{minWidth:"12rem"}}),r.createElement(ye.s,{headerStyle:ge.iR,field:"cost_category.descr",header:"Category Description",sortable:!0,filter:!0,style:{minWidth:"12rem"}}))}),Oe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},ke="/client/cost_category/",Ce=m.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listCostCategory:e.query({query:function(e){var t=e.page,n=e.size;return{url:(0,m.DS)(ke,"?page=".concat(t||1,"&page_size=").concat(n||m.IV))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:m.pJ.COST_CATEGORIES,id:t}}))),[{type:m.pJ.COST_CATEGORIES,id:"LIST"}]):[{type:m.pJ.COST_CATEGORIES,id:"LIST"}]}}),addCostCategory:e.mutation({query:function(e){return{url:ke,method:"POST",body:e}},invalidatesTags:[{type:m.pJ.COST_CATEGORIES,id:"LIST"}]}),getCostCategory:e.query({query:function(e){return"".concat(ke).concat(e)},providesTags:function(e,t,n){return[{type:m.pJ.COST_CATEGORIES,id:n}]}}),updateCostCategory:e.mutation({query:function(e){var t=e.key,n=Oe(e,["key"]);return{url:"".concat(ke).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:m.pJ.COST_CATEGORIES,id:null===e||void 0===e?void 0:e.id}]}}),deleteCostCategory:e.mutation({query:function(e){return{url:"".concat(ke).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:m.pJ.COST_CATEGORIES,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),Ne=Ce.useAddCostCategoryMutation,Ae=Ce.useDeleteCostCategoryMutation,Le=Ce.useGetCostCategoryQuery,Ie=Ce.useListCostCategoryQuery,_e=Ce.useUpdateCostCategoryMutation,Re=(Ce.useGetErrorProneQuery,Ce.endpoints.getCostCategory,function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))}),qe=function(e){var t=(0,r.useRef)(null),n=(0,r.useState)(!1),i=(0,u.Z)(n,2),l=i[0],c=i[1],d=(0,a.s0)(),p=(0,a.UO)().id,f=parseInt(p||""),v=isNaN(f)||f<=0,y=(0,m.ft)(),g=je(f,{skip:v}),E=g.data,h=g.isLoading,b=Se(),S=(0,u.Z)(b,2),T=S[0],j=S[1].isLoading,x=Pe(),P=(0,u.Z)(x,2),w=P[0],O=P[1].isLoading,k=Ie({}).data,C=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"success",summary:e,detail:n,life:3e3})},N=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"error",summary:e,detail:n,life:3e3})};return r.createElement(r.Fragment,null,r.createElement(Q.F,{ref:t}),r.createElement(o.Rm,{baseRoute:"/projects/costcode",description:"Cost Code",id:f,data:E,isUpdating:j||O||l,isLoading:h,onSubmit:function(e){return Re(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!v){t.next=7;break}return t.next=4,T(Object.assign(Object.assign({},e),y)).unwrap();case 4:n=t.sent,t.next=10;break;case 7:return t.next=9,w(Object.assign(Object.assign({},e),y)).unwrap();case 9:n=t.sent;case 10:C("Success",n.detail),c(!0),setTimeout((function(){d("/projects/costcode")}),m.P7),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),N("An error occurred","We couldn't save your post, try again!");case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))},renderForm:function(e,t,n){return r.createElement("div",{className:"pl-8"},r.createElement(o.Wi,{label:"Description",name:"descr",control:e,errors:n,required:!0,leftSpan:2,rightSpan:5,formItem:{component:z.o,componentProps:{maxLength:100}}}),r.createElement(o.Wi,{label:"Cost Category",name:"costctg_key",control:e,errors:n,required:!0,leftSpan:4,rightSpan:4,formItem:{component:B.L,componentProps:{optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",options:null===k||void 0===k?void 0:k.results}}}))}}))},Je=r.createElement(a.AW,{path:"costcode"},r.createElement(a.AW,{path:"new",element:r.createElement(qe,null)}),r.createElement(a.AW,{path:":id/edit",element:r.createElement(qe,null)}),r.createElement(a.AW,{index:!0,element:r.createElement(we,null)})),Ze=function(e){var t=Ie({}),n=t.data,a=t.isLoading,i=Ae(),l=(0,u.Z)(i,2),c=l[0],s=l[1].isLoading;return r.createElement(o.PS,{baseRoute:"/projects/costcategory",description:"Cost Category",isLoading:a||s,data:null===n||void 0===n?void 0:n.results,deleteAction:function(e){return c(e).unwrap()}},r.createElement(ye.s,{headerStyle:ge.iR,field:"id",header:"Category Code",sortable:!0,filter:!0,dataType:"numeric",style:{minWidth:"8rem"}}),r.createElement(ye.s,{headerStyle:ge.iR,field:"descr",header:"Category Description",sortable:!0,filter:!0,style:{minWidth:"12rem"}}))},De=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},Fe=function(e){var t=(0,r.useRef)(null),n=(0,r.useState)(!1),i=(0,u.Z)(n,2),l=i[0],c=i[1],d=(0,a.s0)(),p=(0,a.UO)().id,f=parseInt(p||""),v=isNaN(f)||f<=0,y=(0,m.ft)(),g=Le(f,{skip:v}),E=g.data,h=g.isLoading,b=Ne(),S=(0,u.Z)(b,2),T=S[0],j=S[1].isLoading,x=_e(),P=(0,u.Z)(x,2),w=P[0],O=P[1].isLoading,k=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"success",summary:e,detail:n,life:3e3})},C=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"error",summary:e,detail:n,life:3e3})};return r.createElement(r.Fragment,null,r.createElement(Q.F,{ref:t}),r.createElement(o.Rm,{baseRoute:"/projects/costcategory",description:"Cost Category",id:f,data:E,isUpdating:j||O||l,isLoading:h,onSubmit:function(e){return De(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!v){t.next=7;break}return t.next=4,T(Object.assign(Object.assign({},e),y)).unwrap();case 4:n=t.sent,t.next=10;break;case 7:return t.next=9,w(Object.assign(Object.assign({},e),y)).unwrap();case 9:n=t.sent;case 10:k("Success",n.detail),c(!0),setTimeout((function(){d("/projects/costcategory")}),m.P7),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),C("An error occurred","We couldn't save your post, try again!");case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))},renderForm:function(e,t,n){return r.createElement("div",{className:"pl-8"},r.createElement(o.Wi,{label:"Category Description",name:"descr",control:e,errors:n,required:!0,leftSpan:2,rightSpan:5,formItem:{component:z.o,componentProps:{maxLength:100}}}))}}))},Ue=r.createElement(a.AW,{path:"costcategory"},r.createElement(a.AW,{path:"new",element:r.createElement(Fe,null)}),r.createElement(a.AW,{path:":id/edit",element:r.createElement(Fe,null)}),r.createElement(a.AW,{index:!0,element:r.createElement(Ze,null)})),We=function(e){var t=de({}),n=t.data,a=t.isLoading,i=se(),l=(0,u.Z)(i,2),c=l[0],s=l[1].isLoading;return r.createElement(o.PS,{baseRoute:"/projects/projecttype",description:"Project Type",isLoading:a||s,data:null===n||void 0===n?void 0:n.results,newTable:!0,showHeader:!0,deleteAction:function(e){return c(e).unwrap()}},r.createElement(o._P,{filteringType:"text",field:"id",header:"Type Code",sortable:!0,filter:!0,dataType:"numeric",style:{minWidth:"8rem"}}),r.createElement(o._P,{filteringType:"text",field:"descr",header:"Type Description",sortable:!0,filter:!0,style:{minWidth:"12rem"}}))},Me=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},Ge=function(e){var t=(0,r.useRef)(null),n=(0,r.useState)(!1),i=(0,u.Z)(n,2),l=i[0],c=i[1],d=(0,a.s0)(),p=(0,a.UO)().id,f=parseInt(p||""),v=isNaN(f)||f<=0,y=(0,m.ft)(),g=ue(f,{skip:v}),E=g.data,h=g.isLoading,b=ce(),S=(0,u.Z)(b,2),T=S[0],j=S[1].isLoading,x=pe(),P=(0,u.Z)(x,2),w=P[0],O=P[1].isLoading,k=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"success",summary:e,detail:n,life:3e3})},C=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"error",summary:e,detail:n,life:3e3})};return r.createElement(r.Fragment,null,r.createElement(Q.F,{ref:t}),r.createElement(o.Rm,{baseRoute:"/projects/projecttype",description:"Project Type",id:f,data:E,isUpdating:j||O||l,isLoading:h,onSubmit:function(e){return Me(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!v){t.next=7;break}return t.next=4,T(Object.assign(Object.assign({},e),y)).unwrap();case 4:n=t.sent,t.next=10;break;case 7:return t.next=9,w(Object.assign({},e)).unwrap();case 9:n=t.sent;case 10:k("Success",n.detail),c(!0),setTimeout((function(){d("/projects/projecttype")}),m.P7),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),C("An error occurred","We couldn't save your post, try again!");case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))},renderForm:function(e,t,n){return r.createElement("div",{className:"pl-8"},r.createElement(o.Wi,{label:"Type Description",name:"descr",control:e,errors:n,required:!0,leftSpan:2,rightSpan:5,formItem:{component:z.o,componentProps:{maxLength:100}}}))}}))},Ke=r.createElement(a.AW,{path:"projecttype"},r.createElement(a.AW,{path:"new",element:r.createElement(Ge,null)}),r.createElement(a.AW,{path:":id/edit",element:r.createElement(Ge,null)}),r.createElement(a.AW,{index:!0,element:r.createElement(We,null)})),ze=n(6272),Be=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Ve="/project/block/",Qe=m.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listProjectBlock:e.query({query:function(e){var t=e.page,n=e.size,r=e.projectId;return{url:(0,m.DS)(Ve,"?page=".concat(t||1,"&page_size=").concat(n||m.IV,"&project=").concat(r||""))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:m.pJ.PROJECT_BLOCK,id:t}}))),[{type:m.pJ.PROJECT_BLOCK,id:"LIST"}]):[{type:m.pJ.PROJECT_BLOCK,id:"LIST"}]}}),addProjectBlock:e.mutation({query:function(e){return{url:Ve,method:"POST",body:e}},invalidatesTags:[{type:m.pJ.PROJECT_BLOCK,id:"LIST"}]}),getProjectBlock:e.query({query:function(e){return"".concat(Ve).concat(e)},providesTags:function(e,t,n){return[{type:m.pJ.PROJECT_BLOCK,id:n}]}}),updateProjectBlock:e.mutation({query:function(e){var t=e.key,n=Be(e,["key"]);return{url:"".concat(Ve).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:m.pJ.PROJECT_BLOCK,id:null===e||void 0===e?void 0:e.id}]}}),deleteProjectBlock:e.mutation({query:function(e){return{url:"".concat(Ve).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:m.pJ.PROJECT_BLOCK,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),He=Qe.useAddProjectBlockMutation,Ye=Qe.useDeleteProjectBlockMutation,Xe=(Qe.useGetProjectBlockQuery,Qe.useListProjectBlockQuery),$e=Qe.useUpdateProjectBlockMutation,et=(Qe.useGetErrorProneQuery,Qe.endpoints.getProjectBlock,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}),tt="/project/floor/",nt=m.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listProjectFloor:e.query({query:function(e){var t=e.page,n=e.size,r=e.projectId;return{url:(0,m.DS)(tt,"?page=".concat(t||1,"&page_size=").concat(n||m.IV,"&project=").concat(r||""))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:m.pJ.PROJECT_FLOOR,id:t}}))),[{type:m.pJ.PROJECT_FLOOR,id:"LIST"}]):[{type:m.pJ.PROJECT_FLOOR,id:"LIST"}]}}),addProjectFloor:e.mutation({query:function(e){return{url:tt,method:"POST",body:e}},invalidatesTags:[{type:m.pJ.PROJECT_FLOOR,id:"LIST"}]}),getProjectFloor:e.query({query:function(e){return"".concat(tt).concat(e)},providesTags:function(e,t,n){return[{type:m.pJ.PROJECT_FLOOR,id:n}]}}),updateProjectFloor:e.mutation({query:function(e){var t=e.key,n=et(e,["key"]);return{url:"".concat(tt).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:m.pJ.PROJECT_FLOOR,id:null===e||void 0===e?void 0:e.id}]}}),deleteProjectFloor:e.mutation({query:function(e){return{url:"".concat(tt).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:m.pJ.PROJECT_FLOOR,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),rt=nt.useAddProjectFloorMutation,at=nt.useDeleteProjectFloorMutation,ot=(nt.useGetProjectFloorQuery,nt.useListProjectFloorQuery),it=nt.useUpdateProjectFloorMutation,lt=(nt.useGetErrorProneQuery,nt.endpoints.getProjectFloor,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}),ct="/project/unit/",st=m.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listProjectUnit:e.query({query:function(e){var t=e.page,n=e.size,r=e.projectId;return{url:(0,m.DS)(ct,"?page=".concat(t||1,"&page_size=").concat(n||m.IV,"&project=").concat(r||""))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:m.pJ.PROJECT_UNIT,id:t}}))),[{type:m.pJ.PROJECT_UNIT,id:"LIST"}]):[{type:m.pJ.PROJECT_UNIT,id:"LIST"}]}}),addProjectUnit:e.mutation({query:function(e){return{url:ct,method:"POST",body:e}},invalidatesTags:[{type:m.pJ.PROJECT_UNIT,id:"LIST"}]}),getProjectUnit:e.query({query:function(e){return"".concat(ct).concat(e)},providesTags:function(e,t,n){return[{type:m.pJ.PROJECT_UNIT,id:n}]}}),updateProjectUnit:e.mutation({query:function(e){var t=e.key,n=lt(e,["key"]);return{url:"".concat(ct).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:m.pJ.PROJECT_UNIT,id:null===e||void 0===e?void 0:e.id}]}}),deleteProjectUnit:e.mutation({query:function(e){return{url:"".concat(ct).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:m.pJ.PROJECT_UNIT,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),ut=st.useAddProjectUnitMutation,dt=st.useDeleteProjectUnitMutation,pt=st.useGetProjectUnitQuery,mt=st.useListProjectUnitQuery,ft=st.useUpdateProjectUnitMutation,vt=(st.useGetErrorProneQuery,st.endpoints.getProjectUnit,function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))}),yt=function(e,t,n){return function(a){return r.createElement(r.Fragment,null,r.createElement(W.rU,{to:"".concat(e,"/").concat(a.key,"/edit"),style:{textDecoration:"none"}},r.createElement(N.z,{icon:"pi pi-eye",className:"p-button-rounded p-button-text"})),r.createElement(N.z,{style:{height:"20px",width:"20px",borderRadius:50},onClick:function(){return t(a.key,n)},className:"p-button-rounded p-button-text",icon:"pi pi-trash"}))}},gt=function(e){var t,n,i,l=Ye(),c=(0,u.Z)(l,2),p=c[0],f=c[1].isLoading,v=at(),y=(0,u.Z)(v,2),g=y[0],E=y[1].isLoading,h=dt(),b=(0,u.Z)(h,2),S=b[0],T=b[1].isLoading,j=(0,r.useRef)(null),x=(0,a.UO)().id,P=parseInt(x||""),w=isNaN(P)||P<=0,O=ee(P,{skip:w}),k=O.data,C=(O.isLoading,Xe({projectId:null===k||void 0===k?void 0:k.key},{skip:!(null===k||void 0===k?void 0:k.key)})),A=C.data,I=C.isLoading,_=mt({projectId:null===k||void 0===k?void 0:k.key},{skip:!(null===k||void 0===k?void 0:k.key)}),R=_.data,q=_.isLoading,Z=ot({projectId:null===k||void 0===k?void 0:k.key},{skip:!(null===k||void 0===k?void 0:k.key),refetchOnMountOrArgChange:!0}),D=Z.data,F=Z.isLoading;if(I||F||q)return r.createElement("div",{className:"custom-skeleton p-4"},r.createElement("div",null,r.createElement(ze.O,{height:"50px",width:"30%",className:"mb-2"}),r.createElement(ze.O,{height:"50px",width:"50%",className:"mb-2"})));var U=function(e,t){var n;null===(n=null===j||void 0===j?void 0:j.current)||void 0===n||n.show({severity:"success",summary:e,detail:t,life:3e3})},M=function(e,t){var n;null===(n=null===j||void 0===j?void 0:j.current)||void 0===n||n.show({severity:"error",summary:e,detail:t,life:3e3})},G=function(e,t){return vt(void 0,void 0,void 0,(0,s.Z)().mark((function n(){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:(0,d.V)({message:"Are you sure you want to delete?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){return vt(void 0,void 0,void 0,(0,s.Z)().mark((function n(){var r,a;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t(e);case 3:a=n.sent,U("Success",a),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),M("Failed",null===(r=null===n.t0||void 0===n.t0?void 0:n.t0.data)||void 0===r?void 0:r.detail);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))},reject:function(){}});case 3:case"end":return n.stop()}}),n)})))},K=Object.assign(Object.assign({},ge.iR),{backgroundColor:"gray",color:"white"}),B=Object.assign(Object.assign({},ge.jc),{backgroundColor:"gray",color:"white"});return r.createElement(r.Fragment,null,r.createElement(Q.F,{ref:j}),r.createElement("div",null,r.createElement("div",{className:"flex"},r.createElement("h3",{className:(0,J.AK)("m-0 my-auto")},"Unit"),r.createElement(W.rU,{to:"/projects/".concat(P,"/unit/block/new"),style:{textDecoration:"none",display:"none"}},r.createElement(N.z,{label:"Add Block",className:"ml-3"})),r.createElement(W.rU,{to:"/projects/".concat(P,"/unit/floor/new"),style:{textDecoration:"none",display:"none"}},r.createElement(N.z,{label:"Add Floor",className:"ml-3"})),r.createElement(W.rU,{to:"/projects/".concat(P,"/unit/new"),style:{textDecoration:"none"}},r.createElement(N.z,{label:"Add Unit",className:"ml-3"})),r.createElement(W.rU,{to:"/projects/project/".concat(P,"/edit"),style:{textDecoration:"none",marginLeft:"auto"}},r.createElement(N.z,{label:"Back",className:"ml-auto"}))),r.createElement(L.i,null),r.createElement("div",{className:"pl-8"},r.createElement("div",{className:"field"},r.createElement("label",{className:(0,J.AK)("col-2")},"Project Code"),r.createElement(z.o,{value:null===k||void 0===k?void 0:k.id,disabled:!0})),r.createElement("div",{className:"field"},r.createElement("label",{className:(0,J.AK)("col-2")},"Project Name"),r.createElement(z.o,{style:{width:"50%"},value:null===k||void 0===k?void 0:k.name,disabled:!0}))),r.createElement(L.i,null)),r.createElement(o.Gn,{responsiveLayout:"scroll",stripedRows:!0,resizableColumns:!1,loading:f,style:{height:100*((null===(t=null===A||void 0===A?void 0:A.results)||void 0===t?void 0:t.length)||1),display:"none",minHeight:150,maxHeight:250,overflowX:"auto",border:"2px solid",padding:10,margin:10},value:null===A||void 0===A?void 0:A.results},r.createElement(ye.s,{headerStyle:B,style:{maxWidth:"100px"},bodyStyle:{textAlign:"center",overflow:"visible"},body:yt("/projects/".concat(P,"/unit/block"),G,(function(e){return p(e).unwrap()}))}),r.createElement(ye.s,{headerStyle:K,field:"id",header:"Block",sortable:!0,filter:!0,dataType:"numeric",style:{minWidth:"8rem"}}),r.createElement(ye.s,{headerStyle:K,field:"descr",header:"Description",sortable:!0,filter:!0,style:{minWidth:"12rem"}})),r.createElement(o.Gn,{responsiveLayout:"scroll",stripedRows:!0,resizableColumns:!1,loading:E,style:{height:100*((null===(n=null===D||void 0===D?void 0:D.results)||void 0===n?void 0:n.length)||1),display:"none",minHeight:150,maxHeight:250,overflowX:"auto",border:"2px solid",padding:10,margin:10},value:null===D||void 0===D?void 0:D.results},r.createElement(ye.s,{headerStyle:B,style:{maxWidth:"100px"},bodyStyle:{textAlign:"center",overflow:"visible"},body:yt("/projects/".concat(P,"/unit/floor"),G,(function(e){return g(e).unwrap()}))}),r.createElement(ye.s,{headerStyle:K,field:"id",header:"Floor",sortable:!0,filter:!0,dataType:"numeric",style:{minWidth:"8rem"}}),r.createElement(ye.s,{headerStyle:K,field:"descr",header:"Description",sortable:!0,filter:!0,style:{minWidth:"12rem"}}),r.createElement(ye.s,{headerStyle:K,field:"no_of_units",header:"No of Units",align:"center",sortable:!0,filter:!0,body:function(e){return(0,m.uf)(e.no_of_units)},style:{maxWidth:"12rem"}}),r.createElement(ye.s,{headerStyle:K,field:"",header:"",style:{maxWidth:"12rem"}})),r.createElement(o.Gn,{responsiveLayout:"scroll",stripedRows:!0,resizableColumns:!1,loading:T,style:{height:100*((null===(i=null===R||void 0===R?void 0:R.results)||void 0===i?void 0:i.length)||1),maxHeight:250,overflowX:"auto",border:"2px solid",padding:10,margin:10},value:null===R||void 0===R?void 0:R.results},r.createElement(ye.s,{headerStyle:B,style:{maxWidth:"100px"},bodyStyle:{textAlign:"center",overflow:"visible"},body:yt("/projects/".concat(P,"/unit"),G,(function(e){return S(e).unwrap()}))}),r.createElement(ye.s,{headerStyle:K,field:"id",header:"Unit Code",sortable:!0,filter:!0,dataType:"numeric",style:{minWidth:"8rem"}}),r.createElement(ye.s,{headerStyle:K,field:"descr",header:"Description",sortable:!0,filter:!0,style:{minWidth:"12rem"}}),r.createElement(ye.s,{headerStyle:K,field:"saleablearea",header:"Saleable SQFT",align:"center",body:function(e){return(0,m.uf)(e.saleablearea||"0")},sortable:!0,filter:!0,style:{maxWidth:"12rem"}}),r.createElement(ye.s,{headerStyle:K,field:"",header:"",style:{maxWidth:"12rem"}})))},Et=n(3953),ht=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},bt=function(){var e,t,n=(0,a.s0)(),i=(0,a.UO)().id,l=parseInt(i||""),c=("/projects/".concat(l,"/unit"),(0,a.TH)().state),p=(0,r.useState)(!0),f=(0,u.Z)(p,2),v=f[0],y=f[1],g=(0,Et.cI)({}),E=g.control,h=g.formState,b=h.errors,S=(h.isDirty,g.register,g.reset,g.handleSubmit),T=g.setValue,j=(g.getValues,ee(l,{skip:isNaN(l)||l<=0})),x=j.data,P=(j.isLoading,Xe({projectId:null===x||void 0===x?void 0:x.key},{skip:!(null===x||void 0===x?void 0:x.key)})),w=P.data,O=P.isLoading,k=(0,r.useState)(null),C=(0,u.Z)(k,2),A=C[0],I=C[1],_=(0,r.useState)(!1),R=(0,u.Z)(_,2),q=R[0],Z=R[1],D=(0,r.useRef)(null),F=He(),U=(0,u.Z)(F,2),W=U[0],M=U[1].isLoading,G=$e(),K=(0,u.Z)(G,2),B=K[0],V=K[1].isLoading,H=Ye(),Y=(0,u.Z)(H,2),X=Y[0],$=Y[1].isLoading,te=function(e){return X(e).unwrap()},ne=function(e,t){var n;null===(n=null===D||void 0===D?void 0:D.current)||void 0===n||n.show({severity:"success",summary:e,detail:t,life:3e3})},re=function(e,t){var n;null===(n=null===D||void 0===D?void 0:D.current)||void 0===n||n.show({severity:"error",summary:e,detail:t,life:3e3})},ae=Object.assign(Object.assign({},(0,m.ft)()),{proj_key:l});return O?r.createElement("div",{className:"custom-skeleton p-4"},r.createElement("div",null,r.createElement(ze.O,{height:"50px",width:"30%",className:"mb-2"}),r.createElement(ze.O,{height:"50px",width:"50%",className:"mb-2"}))):r.createElement(r.Fragment,null,r.createElement(Q.F,{ref:D}),r.createElement(o.Gn,{className:"pl-8 custom",header:r.createElement("div",{className:"flex"},r.createElement("h3",{className:(0,J.AK)("m-0 my-auto")},"Block")),rowHover:!0,loading:$,onRowClick:function(e){y(!1),I(e.data.key),T("descr",e.data.descr),T("id",e.data.id)},style:{height:100*((null===(e=null===w||void 0===w?void 0:w.results)||void 0===e?void 0:e.length)||1),width:"70%",minHeight:150,maxHeight:250,overflow:100*((null===(t=null===w||void 0===w?void 0:w.results)||void 0===t?void 0:t.length)||1)>250?"auto":"hidden",padding:10,margin:10,cursor:"pointer"},value:null===w||void 0===w?void 0:w.results,stripedRows:!0},r.createElement(ye.s,{headerStyle:ge.jc,style:{maxWidth:"100px"},bodyStyle:{textAlign:"center"},body:function(e){return function(t){return r.createElement(r.Fragment,null,r.createElement(N.z,{onClick:function(){y(!1),I(t.key),T("descr",t.descr),T("id",t.id)},icon:"pi pi-eye",className:"p-button-rounded p-button-text"}),r.createElement(N.z,{style:{height:"20px",width:"20px",borderRadius:50},onClick:function(){return e(t.key)},className:"p-button-rounded p-button-text",icon:"pi pi-trash"}))}}((function(e){return ht(void 0,void 0,void 0,(0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(te){t.next=2;break}return t.abrupt("return");case 2:(0,d.V)({message:"Are you sure you want to delete?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){return ht(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var n,r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,te(e);case 3:r=t.sent,ne("Success",r),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),re("Failed",null===(n=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===n?void 0:n.detail);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))},reject:function(){}});case 3:case"end":return t.stop()}}),t)})))}))}),r.createElement(ye.s,{headerStyle:ge.iR,field:"id",header:"Block Code",sortable:!0,filter:!0}),r.createElement(ye.s,{headerStyle:ge.iR,field:"descr",header:"Block Description",sortable:!0,filter:!0})),r.createElement(L.i,null),r.createElement("div",null,r.createElement("form",{onSubmit:S((function(e){return ht(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!v){t.next=7;break}return t.next=4,W(Object.assign(Object.assign({},e),ae)).unwrap();case 4:r=t.sent,t.next=10;break;case 7:return t.next=9,B(Object.assign(Object.assign({key:A},e),ae)).unwrap();case 9:r=t.sent;case 10:ne("Success",r.detail),T("descr",""),T("id",""),y(!0),q&&setTimeout((function(){n((null===c||void 0===c?void 0:c.url)||"/projects/project",{state:Object.assign(Object.assign({},c.data),{projblk_key:r.data.key})})}),m.P7),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),re("An error occurred","We couldn't save your request, try again!");case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))}))},r.createElement("div",{className:"flex"},r.createElement("div",{className:"col-1"}),r.createElement("div",{className:"col-7"},function(e,t,n){return r.createElement("div",{className:"pl-8"},r.createElement(o.Wi,{label:"Description",name:"descr",control:e,errors:n,required:!0,leftSpan:3,rightSpan:5,formItem:{component:z.o,componentProps:{maxLength:100}}}))}(E,0,b)),r.createElement("div",{className:"my-auto"},r.createElement(N.z,{loading:M||V,label:"Save",id:"submit",type:"submit",style:{paddingRight:20},className:"p-button-warning mr-3"}),r.createElement(N.z,{loading:M||V,label:"Save & Exit",style:{paddingRight:20},className:"p-button-warning mr-3",onClick:function(e){return ht(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,Z(!0);case 3:null===(n=document.getElementById("submit"))||void 0===n||n.click();case 4:case"end":return t.stop()}}),t)})))}}),r.createElement(N.z,{loading:M||V,label:"Back",onClick:function(){return n((null===c||void 0===c?void 0:c.url)||"/projects/project",{state:c.data})}}))))))},St=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},Tt=function(){var e,t,n=(0,a.s0)(),i=(0,a.UO)().id,l=parseInt(i||""),c=("/projects/".concat(l,"/unit"),(0,a.TH)().state),p=(0,r.useState)(!0),f=(0,u.Z)(p,2),v=f[0],y=f[1],g=(0,Et.cI)({}),E=g.control,h=g.formState,b=h.errors,S=(h.isDirty,g.register,g.reset,g.handleSubmit),T=g.setValue,j=(g.getValues,ee(l,{skip:isNaN(l)||l<=0})),x=j.data,P=(j.isLoading,Xe({projectId:null===x||void 0===x?void 0:x.key},{skip:!(null===x||void 0===x?void 0:x.key)})),w=P.data,O=(P.isLoading,ot({projectId:null===x||void 0===x?void 0:x.key},{skip:!(null===x||void 0===x?void 0:x.key)})),k=O.data,C=O.isLoading,A=(0,r.useState)(null),I=(0,u.Z)(A,2),_=I[0],R=I[1],q=(0,r.useState)(!1),Z=(0,u.Z)(q,2),D=Z[0],F=Z[1],U=(0,r.useRef)(null),W=rt(),M=(0,u.Z)(W,2),G=M[0],K=M[1].isLoading,V=it(),H=(0,u.Z)(V,2),Y=H[0],X=H[1].isLoading,$=at(),te=(0,u.Z)($,2),ne=te[0],re=te[1].isLoading,ae=function(e){return ne(e).unwrap()},oe=function(e,t){var n;null===(n=null===U||void 0===U?void 0:U.current)||void 0===n||n.show({severity:"success",summary:e,detail:t,life:3e3})},ie=function(e,t){var n;null===(n=null===U||void 0===U?void 0:U.current)||void 0===n||n.show({severity:"error",summary:e,detail:t,life:3e3})},le=Object.assign(Object.assign({},(0,m.ft)()),{proj_key:l});return C?r.createElement("div",{className:"custom-skeleton p-4"},r.createElement("div",null,r.createElement(ze.O,{height:"50px",width:"30%",className:"mb-2"}),r.createElement(ze.O,{height:"50px",width:"50%",className:"mb-2"}))):r.createElement(r.Fragment,null,r.createElement(Q.F,{ref:U}),r.createElement(o.Gn,{className:"pl-8 custom",header:r.createElement("div",{className:"flex"},r.createElement("h3",{className:(0,J.AK)("m-0 my-auto")},"Floor")),rowHover:!0,loading:re,onRowClick:function(e){y(!1),R(e.data.key),T("descr",e.data.descr),T("id",e.data.id),T("projblk_key",e.data.projblk_key)},style:{height:100*((null===(e=null===k||void 0===k?void 0:k.results)||void 0===e?void 0:e.length)||1),width:"70%",minHeight:150,maxHeight:250,overflow:100*((null===(t=null===k||void 0===k?void 0:k.results)||void 0===t?void 0:t.length)||1)>250?"auto":"hidden",padding:10,margin:10,cursor:"pointer"},value:null===k||void 0===k?void 0:k.results,stripedRows:!0},r.createElement(ye.s,{headerStyle:ge.jc,style:{maxWidth:"100px"},bodyStyle:{textAlign:"center"},body:function(e){return function(t){return r.createElement(r.Fragment,null,r.createElement(N.z,{onClick:function(){y(!1),R(t.key),T("descr",t.descr),T("id",t.id),T("projblk_key",t.projblk_key)},icon:"pi pi-eye",className:"p-button-rounded p-button-text"}),r.createElement(N.z,{style:{height:"20px",width:"20px",borderRadius:50},onClick:function(){return e(t.key)},className:"p-button-rounded p-button-text",icon:"pi pi-trash"}))}}((function(e){return St(void 0,void 0,void 0,(0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ae){t.next=2;break}return t.abrupt("return");case 2:(0,d.V)({message:"Are you sure you want to delete?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){return St(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var n,r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ae(e);case 3:r=t.sent,oe("Success",r),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),ie("Failed",null===(n=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===n?void 0:n.detail);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))},reject:function(){}});case 3:case"end":return t.stop()}}),t)})))}))}),r.createElement(ye.s,{headerStyle:ge.iR,field:"block.descr",header:"Block",sortable:!0,filter:!0}),r.createElement(ye.s,{headerStyle:ge.iR,field:"id",header:"Floor Code",sortable:!0,filter:!0}),r.createElement(ye.s,{headerStyle:ge.iR,field:"descr",header:"Floor Description",sortable:!0,filter:!0})),r.createElement(L.i,null),r.createElement("div",null,r.createElement("form",{onSubmit:S((function(e){return St(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!v){t.next=7;break}return t.next=4,G(Object.assign(Object.assign({},e),le)).unwrap();case 4:r=t.sent,t.next=10;break;case 7:return t.next=9,Y(Object.assign(Object.assign({key:_},e),le)).unwrap();case 9:r=t.sent;case 10:oe("Success",r.detail),T("descr",""),T("id",""),T("projblk_key",""),y(!0),D&&setTimeout((function(){var e,t;n((null===c||void 0===c?void 0:c.url)||"/projects/project",{state:Object.assign(Object.assign({},c.data),{projflr_key:null===(e=r.data)||void 0===e?void 0:e.key,projblk_key:null===(t=r.data)||void 0===t?void 0:t.projblk_key})})}),m.P7),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),ie("An error occurred","We couldn't save your request, try again!");case 21:case"end":return t.stop()}}),t,null,[[0,18]])})))}))},r.createElement("div",{className:"flex"},r.createElement("div",{className:"col-1"}),r.createElement("div",{className:"col-7"},function(e,t,n){return r.createElement("div",{className:"pl-8"},r.createElement(o.Wi,{label:"Block",name:"projblk_key",control:e,errors:n,required:!0,leftSpan:4,rightSpan:4,formItem:{component:B.L,componentProps:{optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",options:null===w||void 0===w?void 0:w.results}}}),r.createElement(o.Wi,{label:"Description",name:"descr",control:e,errors:n,required:!0,leftSpan:4,rightSpan:5,formItem:{component:z.o,componentProps:{maxLength:100}}}))}(E,0,b)),r.createElement("div",{className:"my-auto"},r.createElement(N.z,{loading:K||X,label:"Save",id:"submit",type:"submit",style:{paddingRight:20},className:"p-button-warning mr-3"}),r.createElement(N.z,{loading:K||X,label:"Save & Exit",style:{paddingRight:20},className:"p-button-warning mr-3",onClick:function(e){return St(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,F(!0);case 3:null===(n=document.getElementById("submit"))||void 0===n||n.click();case 4:case"end":return t.stop()}}),t)})))}}),r.createElement(N.z,{loading:K||X,label:"Back",onClick:function(){return n((null===c||void 0===c?void 0:c.url)||"/projects/project",{state:c.data})}}))))))},jt=n(8301),xt=n(8391),Pt=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},wt=function(e){var t=(0,o.pm)(),n=t.showSuccess,i=t.showError,l=(0,r.useState)(!1),c=(0,u.Z)(l,2),d=c[0],p=c[1],f=(0,a.s0)(),v=(0,a.UO)(),y=v.unitId,g=v.id,E=parseInt(y||""),h=isNaN(E)||E<=0,b=parseInt(g||""),S=(0,a.TH)().search,T=(0,m.ft)(),j="?direct"===S?"/projects/unit?bkp=".concat(b):"/projects/".concat(b,"/unit"),x=(0,a.TH)().state,P=pt(E,{skip:h}),w=P.data,O=P.isLoading,k=(0,r.useState)((null===w||void 0===w?void 0:w.bedrooms)||(null===x||void 0===x?void 0:x.bedrooms)||0),C=(0,u.Z)(k,2),N=C[0],A=C[1],I=(0,r.useState)((null===w||void 0===w?void 0:w.bathrooms)||(null===x||void 0===x?void 0:x.bathrooms)||0),_=(0,u.Z)(I,2),R=_[0],q=_[1],Z=(0,r.useState)((null===w||void 0===w?void 0:w.balconies)||(null===x||void 0===x?void 0:x.balconies)||0),D=(0,u.Z)(Z,2),F=D[0],U=D[1],W=ee(b,{skip:isNaN(b)||b<=0}),M=W.data,G=(W.isLoading,Xe({projectId:null===M||void 0===M?void 0:M.key},{skip:!(null===M||void 0===M?void 0:M.key)})),K=G.data,V=(G.isLoading,ot({projectId:null===M||void 0===M?void 0:M.key},{skip:!(null===M||void 0===M?void 0:M.key)})),Q=V.data,H=(V.isLoading,ut()),Y=(0,u.Z)(H,2),X=Y[0],$=Y[1].isLoading,te=ft(),ne=(0,u.Z)(te,2),re=ne[0],ae=ne[1].isLoading,oe=(0,r.useState)((null===x||void 0===x?void 0:x.projblk_key)?null===x||void 0===x?void 0:x.projblk_key:null),ie=(0,u.Z)(oe,2),le=ie[0],ce=ie[1],se=(0,r.useState)(""),ue=(0,u.Z)(se,2),de=(ue[0],ue[1]),pe=(0,r.useState)([]),me=(0,u.Z)(pe,2),fe=me[0],ve=me[1];(0,r.useEffect)((function(){if(le&&Q){var e=(null===Q||void 0===Q?void 0:Q.results.filter((function(e){return e.projblk_key===le})))||[];ve(e)}}),[le,Q]),(0,r.useEffect)((function(){w&&!x&&ce(w.projblk_key)}),[w]);return(0,r.useEffect)((function(){A((null===w||void 0===w?void 0:w.bedrooms)||(null===x||void 0===x?void 0:x.bedrooms)||0),q((null===w||void 0===w?void 0:w.bathrooms)||(null===x||void 0===x?void 0:x.bathrooms)||0),U((null===w||void 0===w?void 0:w.balconies)||(null===x||void 0===x?void 0:x.balconies)||0)}),[w]),r.createElement(r.Fragment,null,r.createElement(o.Rm,{baseRoute:j,description:"Unit",id:E,data:w,dataFromLocation:x,isUpdating:$||ae||d,isLoading:O,onSubmit:function(e){return Pt(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e=Object.assign(Object.assign({},e),{bedrooms:N,bathrooms:R,balconies:F}),console.log(e),!h){t.next=9;break}return t.next=6,X(Object.assign(Object.assign(Object.assign({},e),T),{proj_key:b})).unwrap();case 6:r=t.sent,t.next=12;break;case 9:return t.next=11,re(Object.assign(Object.assign(Object.assign({},e),T),{proj_key:b})).unwrap();case 11:r=t.sent;case 12:n("Success",r.detail),p(!0),setTimeout((function(){f(j)}),m.P7),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),i("An error occurred","We couldn't save your post, try again!");case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))},renderForm:function(e,t,n,a){return r.createElement("div",{className:"pl-8"},r.createElement("div",{className:"field"},r.createElement("label",{className:(0,J.AK)("col-2")},"Project Code"),r.createElement(z.o,{value:null===M||void 0===M?void 0:M.id,disabled:!0})),r.createElement("div",{className:"field"},r.createElement("label",{className:(0,J.AK)("col-2")},"Project Name"),r.createElement(z.o,{style:{width:"50%"},value:null===M||void 0===M?void 0:M.name,disabled:!0})),r.createElement(L.i,null),r.createElement("div",{className:"flex"},r.createElement("div",{style:{border:"1px solid"},className:"col-6"},r.createElement(o.Wi,{label:"Block Code",name:"projblk_key",control:e,errors:n,required:!0,leftSpan:4,rightSpan:4,useExplicit:!0,onChange:function(e){var t=(null===K||void 0===K?void 0:K.results.filter((function(t){return t.key===e.value}))[0])||{key:null};ce(t.key)},formItem:{component:B.L,componentProps:{optionGroupTemplate:r.createElement("div",{style:{cursor:"pointer",textAlign:"center",backgroundColor:"#e6e1e1",color:"black",lineHeight:2.5},onClick:function(){return f("/projects/".concat(b,"/unit/block"),{state:{url:h?"/projects/".concat(b,"/unit/new"):"/projects/project/".concat(null===w||void 0===w?void 0:w.key,"/edit"),data:a()}})}},"-- Create And Edit --"),optionLabel:"id",optionValue:"key",optionGroupLabel:"label",optionGroupChildren:"items",disabled:!h,options:[{label:"Add",items:(null===K||void 0===K?void 0:K.results)||[]}]}}}),r.createElement(o.Wi,{label:"Floor Code",name:"projflr_key",control:e,errors:n,required:!0,leftSpan:4,rightSpan:4,useExplicit:!0,onChange:function(e){var t=fe.filter((function(t){return t.key===e.value}))[0].descr;de(t)},formItem:{component:B.L,componentProps:{optionGroupTemplate:r.createElement("div",{style:{cursor:"pointer",textAlign:"center",backgroundColor:"#e6e1e1",color:"black",lineHeight:2.5},onClick:function(){return f("/projects/".concat(b,"/unit/floor"),{state:{url:h?"/projects/".concat(b,"/unit/new"):"/projects/project/".concat(null===w||void 0===w?void 0:w.key,"/edit"),data:a()}})}},"-- Create And Edit --"),optionLabel:"id",optionValue:"key",optionGroupLabel:"label",optionGroupChildren:"items",disabled:!h,options:[{label:"Add",items:fe||[]}]}}}),r.createElement(o.Wi,{label:"Unit Description",name:"descr",control:e,errors:n,required:!0,leftSpan:4,rightSpan:5,formItem:{component:z.o,componentProps:{maxLength:100}}})),r.createElement("div",{style:{border:"1px solid"},className:"col-6"},r.createElement("div",{className:"field"},r.createElement("label",{htmlFor:"saleablearea",className:(0,J.AK)("col-5",{"p-error":n.saleablearea})},"Saleable Area SqFt"),r.createElement(Et.Qr,{name:"saleablearea",control:e,rules:{},render:function(e){var t=e.field,n=e.fieldState;return r.createElement(z.o,Object.assign({type:"number",min:0,id:t.name},t,{className:(0,J.AK)("col-6",{"p-invalid":n.invalid})}))}})),r.createElement("div",{className:"field"},r.createElement("label",{htmlFor:"carpetarea",className:(0,J.AK)("col-5",{"p-error":n.carpetarea})},"Carpet Area SqFt"),r.createElement(Et.Qr,{name:"carpetarea",control:e,rules:{},render:function(e){var t=e.field,n=e.fieldState;return r.createElement(z.o,Object.assign({type:"number",min:0,id:t.name},t,{className:(0,J.AK)("col-6",{"p-invalid":n.invalid})}))}})),r.createElement("div",{className:"field"},r.createElement("label",{htmlFor:"udsarea",className:(0,J.AK)("col-5",{"p-error":n.udsarea})},"UDS Area SqFt"),r.createElement(Et.Qr,{name:"udsarea",control:e,rules:{},render:function(e){var t=e.field,n=e.fieldState;return r.createElement(z.o,Object.assign({type:"number",min:0,id:t.name},t,{className:(0,J.AK)("col-6",{"p-invalid":n.invalid})}))}})))),r.createElement("div",{className:"flex"},r.createElement("div",{style:{border:"1px solid"},className:"col-6"},r.createElement("div",{className:"field"},r.createElement("label",{htmlFor:"bedrooms",className:(0,J.AK)("col-5",{"p-error":n.bedrooms})},"Bedrooms"),r.createElement(Et.Qr,{name:"bedrooms",control:e,rules:{},render:function(e){var t=e.field;e.fieldState;return r.createElement(jt.R,{showButtons:!0,placeholder:"0",style:{width:"45px"},inputStyle:{width:"inherit",textAlign:"center"},buttonLayout:"horizontal",value:N,onValueChange:function(e){A(e.value),t.onChange(parseInt(e.value))},step:1,min:0,incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus",className:(0,J.AK)("col-6")})}})),r.createElement("div",{className:"field"},r.createElement("label",{htmlFor:"bathrooms",className:(0,J.AK)("col-5",{"p-error":n.bathrooms})},"Bathrooms"),r.createElement(Et.Qr,{name:"bathrooms",control:e,rules:{},render:function(e){var t=e.field;e.fieldState;return r.createElement(jt.R,{showButtons:!0,placeholder:"0",style:{width:"45px"},inputStyle:{width:"inherit",textAlign:"center"},buttonLayout:"horizontal",value:R,onValueChange:function(e){q(e.value),t.onChange(parseInt(e.value))},step:1,min:0,incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus",className:(0,J.AK)("col-6")})}})),r.createElement("div",{className:"field"},r.createElement("label",{htmlFor:"balconies",className:(0,J.AK)("col-5",{"p-error":n.balconies})},"Balconies"),r.createElement(Et.Qr,{name:"balconies",control:e,rules:{},render:function(e){var t=e.field;e.fieldState;return r.createElement(jt.R,{showButtons:!0,placeholder:"0",style:{width:"45px"},inputStyle:{width:"inherit",textAlign:"center"},buttonLayout:"horizontal",value:F,onValueChange:function(e){U(e.value),t.onChange(parseInt(e.value))},step:1,min:0,incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus",className:(0,J.AK)("col-6")})}}))),r.createElement("div",{style:{border:"1px solid"},className:"col-6"},r.createElement("div",{className:"field",style:{padding:10}},r.createElement("label",{style:{margin:"auto"},htmlFor:"servicearea",className:(0,J.AK)("col-5",{"p-error":n.servicearea})},"Service Area"),r.createElement(Et.Qr,{name:"servicearea",control:e,render:function(e){var t=e.field;e.fieldState;return r.createElement(xt.X,Object.assign({checked:t.value,trueValue:"1",falseValue:"0",id:t.name},t))}})),r.createElement("div",{className:"field",style:{padding:10}},r.createElement("label",{style:{margin:"auto"},htmlFor:"poojaroom",className:(0,J.AK)("col-5",{"p-error":n.poojaroom})},"Pooja Room"),r.createElement(Et.Qr,{name:"poojaroom",control:e,render:function(e){var t=e.field;e.fieldState;return r.createElement(xt.X,Object.assign({checked:t.value,trueValue:"1",falseValue:"0",id:t.name},t))}})),r.createElement("div",{className:"field",style:{padding:10}},r.createElement("label",{style:{margin:"auto"},htmlFor:"carparking",className:(0,J.AK)("col-5",{"p-error":n.carparking})},"Car Parking"),r.createElement(Et.Qr,{name:"carparking",control:e,render:function(e){var t=e.field;e.fieldState;return r.createElement(xt.X,Object.assign({checked:t.value,trueValue:"1",falseValue:"0",id:t.name},t))}})))))}}))},Ot=r.createElement(a.AW,{path:":id/unit"},r.createElement(a.AW,{path:"new",element:r.createElement(wt,null)}),r.createElement(a.AW,{path:":unitId/edit",element:r.createElement(wt,null)}),r.createElement(a.AW,{path:"block",element:r.createElement(bt,null)}),r.createElement(a.AW,{path:"floor",element:r.createElement(Tt,null)}),r.createElement(a.AW,{index:!0,element:r.createElement(gt,null)})),kt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Ct="/project/payterm/",Nt=m.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listPaymentTerm:e.query({query:function(e){var t=e.page,n=e.size;return{url:(0,m.DS)(Ct,"?page=".concat(t||1,"&page_size=").concat(n||m.IV))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:m.pJ.PAYMENT_TERM,id:t}}))),[{type:m.pJ.PAYMENT_TERM,id:"LIST"}]):[{type:m.pJ.PAYMENT_TERM,id:"LIST"}]}}),addPaymentTerm:e.mutation({query:function(e){return{url:Ct,method:"POST",body:e}},invalidatesTags:[{type:m.pJ.PAYMENT_TERM,id:"LIST"}]}),getPaymentTerm:e.query({query:function(e){return"".concat(Ct).concat(e)},providesTags:function(e,t,n){return[{type:m.pJ.PAYMENT_TERM,id:n}]}}),updatePaymentTerm:e.mutation({query:function(e){var t=e.key,n=kt(e,["key"]);return{url:"".concat(Ct).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:m.pJ.PAYMENT_TERM,id:null===e||void 0===e?void 0:e.id}]}}),deletePaymentTerm:e.mutation({query:function(e){return{url:"".concat(Ct).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:m.pJ.PAYMENT_TERM,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),At=Nt.useAddPaymentTermMutation,Lt=Nt.useDeletePaymentTermMutation,It=Nt.useGetPaymentTermQuery,_t=Nt.useListPaymentTermQuery,Rt=Nt.useUpdatePaymentTermMutation,qt=(Nt.useGetErrorProneQuery,Nt.endpoints.getPaymentTerm,function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))}),Jt=function(e,t,n){return function(a){return r.createElement(r.Fragment,null,r.createElement(W.rU,{to:"".concat(e,"/").concat(a.key,"/edit"),style:{textDecoration:"none"}},r.createElement(N.z,{icon:"pi pi-eye",className:"p-button-rounded p-button-text"})),r.createElement(N.z,{style:{height:"20px",width:"20px",borderRadius:50},onClick:function(){return t(a.key,n)},className:"p-button-rounded p-button-text",icon:"pi pi-trash"}))}},Zt=function(e){var t=_t({}),n=t.data,i=t.isLoading,l=Lt(),c=(0,u.Z)(l,2),p=c[0],m=c[1].isLoading,f=(0,r.useRef)(null),v=(0,a.UO)().id,y=parseInt(v||""),g=isNaN(y)||y<=0,E=ee(y,{skip:g}),h=E.data;E.isLoading;if(i)return r.createElement("div",{className:"custom-skeleton p-4"},r.createElement("div",null,r.createElement(ze.O,{height:"50px",width:"30%",className:"mb-2"}),r.createElement(ze.O,{height:"50px",width:"50%",className:"mb-2"})));var b=function(e,t){var n;null===(n=null===f||void 0===f?void 0:f.current)||void 0===n||n.show({severity:"success",summary:e,detail:t,life:3e3})},S=function(e,t){var n;null===(n=null===f||void 0===f?void 0:f.current)||void 0===n||n.show({severity:"error",summary:e,detail:t,life:3e3})},T=Object.assign(Object.assign({},ge.iR),{backgroundColor:"gray",color:"white"}),j=Object.assign(Object.assign({},ge.jc),{backgroundColor:"gray",color:"white"});return r.createElement(r.Fragment,null,r.createElement(Q.F,{ref:f}),r.createElement("div",null,r.createElement("div",{className:"flex"},r.createElement("h3",{className:(0,J.AK)("m-0 my-auto")},"Payment Term"),r.createElement(W.rU,{to:"/projects/".concat(y,"/paymentterm/new"),style:{textDecoration:"none"}},r.createElement(N.z,{label:"Add",className:"ml-3"})),r.createElement(W.rU,{to:"/projects/project/".concat(y,"/edit"),style:{textDecoration:"none",marginLeft:"auto"}},r.createElement(N.z,{label:"Back",className:"ml-auto"}))),r.createElement(L.i,null),r.createElement("div",{className:"pl-8"},r.createElement("div",{className:"field"},r.createElement("label",{className:(0,J.AK)("col-2")},"Project Code"),r.createElement(z.o,{value:null===h||void 0===h?void 0:h.id,disabled:!0})),r.createElement("div",{className:"field"},r.createElement("label",{className:(0,J.AK)("col-2")},"Project Name"),r.createElement(z.o,{style:{width:"50%"},value:null===h||void 0===h?void 0:h.name,disabled:!0}))),r.createElement(L.i,null)),r.createElement(o.Gn,{loading:m,style:{height:"calc(100vh - 450px)",maxHeight:250,overflowX:"auto",border:"2px solid",padding:10,margin:10},value:null===n||void 0===n?void 0:n.results},r.createElement(ye.s,{headerStyle:j,style:{maxWidth:"100px"},bodyStyle:{textAlign:"center",overflow:"visible"},body:Jt("/projects/".concat(y,"/paymentterm"),(function(e,t){return qt(void 0,void 0,void 0,(0,s.Z)().mark((function n(){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:(0,d.V)({message:"Are you sure you want to delete?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){return qt(void 0,void 0,void 0,(0,s.Z)().mark((function n(){var r,a;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t(e);case 3:a=n.sent,b("Success",a),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),S("Failed",null===(r=null===n.t0||void 0===n.t0?void 0:n.t0.data)||void 0===r?void 0:r.detail);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))},reject:function(){}});case 3:case"end":return n.stop()}}),n)})))}),(function(e){return p(e).unwrap()}))}),r.createElement(ye.s,{headerStyle:T,field:"term",header:"Payment Term",sortable:!0,filter:!0,dataType:"numeric",style:{minWidth:"8rem"}}),r.createElement(ye.s,{headerStyle:T,field:"termcharges",header:"Charges",sortable:!0,filter:!0,style:{minWidth:"12rem"}})),r.createElement("div",{className:"row flex"},r.createElement("div",{className:"col-6"},"BSP - Basic Selling Price"),r.createElement("div",{className:"col-6"},"FMS - Interest Free maintainnance Security")),r.createElement("div",{className:"row flex"},r.createElement("div",{className:"col-6"},"PLC - Preferential Location Charges"),r.createElement("div",{className:"col-6"},"EDC - External Development Charges")))},Dt=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},Ft=function(e){var t=(0,r.useRef)(null),n=(0,r.useState)(!1),i=(0,u.Z)(n,2),l=i[0],c=i[1],d=(0,a.s0)(),p=(0,a.UO)(),f=p.blockId,v=p.id,y=parseInt(f||""),g=isNaN(y)||y<=0,E=parseInt(v||""),h="/projects/".concat(E,"/paymentterm"),b=It(y,{skip:g}),S=b.data,T=b.isLoading,j=ee(E,{skip:isNaN(E)||E<=0}),x=j.data,P=(j.isLoading,At()),w=(0,u.Z)(P,2),O=w[0],k=w[1].isLoading,C=Rt(),N=(0,u.Z)(C,2),A=N[0],I=N[1].isLoading,_=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"success",summary:e,detail:n,life:3e3})},R=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"error",summary:e,detail:n,life:3e3})},q=Object.assign(Object.assign({},(0,m.ft)()),{proj_key:E});return r.createElement(r.Fragment,null,r.createElement(Q.F,{ref:t}),r.createElement(o.Rm,{baseRoute:h,description:"Payment Term",id:y,data:S,isUpdating:k||I||l,isLoading:T,onSubmit:function(e){return Dt(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!g){t.next=7;break}return t.next=4,O(Object.assign(Object.assign({},e),q)).unwrap();case 4:n=t.sent,t.next=10;break;case 7:return t.next=9,A(Object.assign(Object.assign({},e),q)).unwrap();case 9:n=t.sent;case 10:_("Success",n.detail),c(!0),setTimeout((function(){d(h)}),m.P7),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),R("An error occurred","We couldn't save your post, try again!");case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))},renderForm:function(e,t,n){return r.createElement("div",{className:"pl-8"},r.createElement("div",{className:"field"},r.createElement("label",{className:(0,J.AK)("col-2")},"Project Code"),r.createElement(z.o,{value:null===x||void 0===x?void 0:x.id,disabled:!0})),r.createElement("div",{className:"field"},r.createElement("label",{className:(0,J.AK)("col-2")},"Project Name"),r.createElement(z.o,{style:{width:"50%"},value:null===x||void 0===x?void 0:x.name,disabled:!0})),r.createElement(L.i,null),r.createElement(o.Wi,{label:"Payment Term",name:"term",control:e,errors:n,required:!0,leftSpan:3,rightSpan:3,formItem:{component:z.o,componentProps:{maxLength:25,disabled:!g}}}),r.createElement(o.Wi,{label:"Payment Charges",name:"termcharges",control:e,errors:n,required:!0,leftSpan:3,rightSpan:5,formItem:{component:z.o,componentProps:{maxLength:100}}}),r.createElement("div",{style:{position:"absolute",bottom:"10px",width:"90%",paddingBottom:"10px"}},r.createElement("div",{className:"row flex"},r.createElement("div",{className:"col-6"},"BSP - Basic Selling Price"),r.createElement("div",{className:"col-6"},"FMS - Interest Free maintainnance Security")),r.createElement("div",{className:"row flex"},r.createElement("div",{className:"col-6"},"PLC - Preferential Location Charges"),r.createElement("div",{className:"col-6"},"EDC - External Development Charges"))))}}))},Ut=r.createElement(a.AW,{path:":id/paymentterm"},r.createElement(a.AW,{path:"new",element:r.createElement(Ft,null)}),r.createElement(a.AW,{path:":blockId/edit",element:r.createElement(Ft,null)}),r.createElement(a.AW,{index:!0,element:r.createElement(Zt,null)})),Wt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Mt="/project/history/price/",Gt=m.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listPriceChange:e.query({query:function(e){var t=e.page,n=e.size,r=e.projectId;return{url:(0,m.DS)(Mt,"?page=".concat(t||1,"&page_size=").concat(n||m.IV,"&project=").concat(r||""))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:m.pJ.PRICE_CHANGE,id:t}}))),[{type:m.pJ.PRICE_CHANGE,id:"LIST"}]):[{type:m.pJ.PRICE_CHANGE,id:"LIST"}]}}),addPriceChange:e.mutation({query:function(e){return{url:Mt,method:"POST",body:e}},invalidatesTags:[{type:m.pJ.PRICE_CHANGE,id:"LIST"}]}),getPriceChange:e.query({query:function(e){return"".concat(Mt).concat(e)},providesTags:function(e,t,n){return[{type:m.pJ.PRICE_CHANGE,id:n}]}}),updatePriceChange:e.mutation({query:function(e){var t=e.key,n=Wt(e,["key"]);return{url:"".concat(Mt).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:m.pJ.PRICE_CHANGE,id:null===e||void 0===e?void 0:e.id}]}}),deletePriceChange:e.mutation({query:function(e){return{url:"".concat(Mt).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:m.pJ.PRICE_CHANGE,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),Kt=Gt.useAddPriceChangeMutation,zt=Gt.useDeletePriceChangeMutation,Bt=Gt.useGetPriceChangeQuery,Vt=Gt.useListPriceChangeQuery,Qt=Gt.useUpdatePriceChangeMutation,Ht=(Gt.useGetErrorProneQuery,Gt.endpoints.getPriceChange,function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))}),Yt=function(e,t,n){return function(a){return r.createElement(r.Fragment,null,r.createElement(W.rU,{to:"".concat(e,"/").concat(a.key,"/edit"),style:{textDecoration:"none"}},r.createElement(N.z,{icon:"pi pi-eye",className:"p-button-rounded p-button-text"})),r.createElement(N.z,{style:{height:"20px",width:"20px",borderRadius:50},onClick:function(){return t(a.key,n)},className:"p-button-rounded p-button-text",icon:"pi pi-trash"}))}},Xt=function(e){var t=zt(),n=(0,u.Z)(t,2),i=n[0],l=n[1].isLoading,c=(0,r.useRef)(null),p=(0,a.UO)().id,f=parseInt(p||""),v=isNaN(f)||f<=0,y=ee(f,{skip:v}),g=y.data,E=(y.isLoading,Vt({projectId:null===g||void 0===g?void 0:g.key},{skip:!(null===g||void 0===g?void 0:g.key)})),h=E.data;if(E.isLoading)return r.createElement("div",{className:"custom-skeleton p-4"},r.createElement("div",null,r.createElement(ze.O,{height:"50px",width:"30%",className:"mb-2"}),r.createElement(ze.O,{height:"50px",width:"50%",className:"mb-2"})));var b=function(e,t){var n;null===(n=null===c||void 0===c?void 0:c.current)||void 0===n||n.show({severity:"success",summary:e,detail:t,life:3e3})},S=function(e,t){var n;null===(n=null===c||void 0===c?void 0:c.current)||void 0===n||n.show({severity:"error",summary:e,detail:t,life:3e3})},T=Object.assign(Object.assign({},ge.iR),{backgroundColor:"gray",color:"white"}),j=Object.assign(Object.assign({},ge.jc),{backgroundColor:"gray",color:"white"});return r.createElement(r.Fragment,null,r.createElement(Q.F,{ref:c}),r.createElement("div",null,r.createElement("div",{className:"flex"},r.createElement("h3",{className:(0,J.AK)("m-0 my-auto")},"Price Change"),r.createElement(W.rU,{to:"/projects/".concat(f,"/pricechange/new"),style:{textDecoration:"none"}},r.createElement(N.z,{label:"Add",className:"ml-3"})),r.createElement(W.rU,{to:"/projects/project/".concat(f,"/edit"),style:{textDecoration:"none",marginLeft:"auto"}},r.createElement(N.z,{label:"Back",className:"ml-auto"}))),r.createElement(L.i,null),r.createElement("div",{className:"pl-8"},r.createElement("div",{className:"field"},r.createElement("label",{className:(0,J.AK)("col-2")},"Project Code"),r.createElement(z.o,{value:null===g||void 0===g?void 0:g.id,disabled:!0})),r.createElement("div",{className:"field"},r.createElement("label",{className:(0,J.AK)("col-2")},"Project Name"),r.createElement(z.o,{style:{width:"50%"},value:null===g||void 0===g?void 0:g.name,disabled:!0}))),r.createElement(L.i,null)),r.createElement(o.Gn,{loading:l,style:{height:"calc(100vh - 450px)",maxHeight:250,overflowX:"auto",border:"2px solid",padding:10,margin:10},value:null===h||void 0===h?void 0:h.results},r.createElement(ye.s,{headerStyle:j,style:{maxWidth:"100px"},bodyStyle:{textAlign:"center",overflow:"visible"},body:Yt("/projects/".concat(f,"/pricechange"),(function(e,t){return Ht(void 0,void 0,void 0,(0,s.Z)().mark((function n(){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:(0,d.V)({message:"Are you sure you want to delete?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){return Ht(void 0,void 0,void 0,(0,s.Z)().mark((function n(){var r,a;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t(e);case 3:a=n.sent,b("Success",a),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),S("Failed",null===(r=null===n.t0||void 0===n.t0?void 0:n.t0.data)||void 0===r?void 0:r.detail);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))},reject:function(){}});case 3:case"end":return n.stop()}}),n)})))}),(function(e){return i(e).unwrap()}))}),r.createElement(ye.s,{headerStyle:T,field:"effdate",header:"Effective Date",sortable:!0,filter:!0,dataType:"numeric",style:{minWidth:"8rem"}}),r.createElement(ye.s,{headerStyle:T,field:"effprice",header:"Effective Price",sortable:!0,filter:!0,dataType:"numeric",style:{minWidth:"8rem"},body:function(e){return(0,m.xG)(e.effprice)}}),r.createElement(ye.s,{headerStyle:T,field:"createdby",header:"User",sortable:!0,filter:!0,style:{minWidth:"12rem"}})))},$t=n(9459);function en(){return en=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},en.apply(this,arguments)}var tn=r.memo(r.forwardRef((function(e,t){var n=r.useRef(t),a=r.useRef(0),o=function(e){var t=n.current;t&&J.p7.isVisible(t)&&(a.current||(a.current=t.scrollHeight,t.style.overflow="hidden"),(a.current!==t.scrollHeight||e)&&(t.style.height="",t.style.height=t.scrollHeight+"px",parseFloat(t.style.height)>=parseFloat(t.style.maxHeight)?(t.style.overflowY="scroll",t.style.height=t.style.maxHeight):t.style.overflow="hidden",a.current=t.scrollHeight))},i=r.useMemo((function(){return J.gb.isNotEmpty(e.value)||J.gb.isNotEmpty(e.defaultValue)||n.current&&J.gb.isNotEmpty(n.current.value)}),[e.value,e.defaultValue]);r.useEffect((function(){J.gb.combinedRefs(n,t)}),[n,t]),r.useEffect((function(){e.autoResize&&o(!0)}),[e.autoResize]);var l=J.gb.isNotEmpty(e.tooltip),c=J.gb.findDiffKeys(e,tn.defaultProps),s=(0,J.AK)("p-inputtextarea p-inputtext p-component",{"p-disabled":e.disabled,"p-filled":i,"p-inputtextarea-resizable":e.autoResize},e.className);return r.createElement(r.Fragment,null,r.createElement("textarea",en({ref:n},c,{className:s,onFocus:function(t){e.autoResize&&o(),e.onFocus&&e.onFocus(t)},onBlur:function(t){e.autoResize&&o(),e.onBlur&&e.onBlur(t)},onKeyUp:function(t){e.autoResize&&o(),e.onKeyUp&&e.onKeyUp(t)},onInput:function(t){e.autoResize&&o(),e.onInput&&e.onInput(t);var n=t.target;J.gb.isNotEmpty(n.value)?J.p7.addClass(n,"p-filled"):J.p7.removeClass(n,"p-filled")}})),l&&r.createElement($t.u,en({target:n,content:e.tooltip},e.tooltipOptions)))})));tn.displayName="InputTextarea",tn.defaultProps={__TYPE:"InputTextarea",autoResize:!1,tooltip:null,tooltipOptions:null,onInput:null};var nn=n(3127),rn=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},an=function(e){var t=(0,r.useRef)(null),n=(0,r.useState)(!1),i=(0,u.Z)(n,2),l=i[0],c=i[1],d=(0,a.s0)(),p=(0,a.UO)(),f=p.blockId,v=p.id,y=parseInt(f||""),g=isNaN(y)||y<=0,E=parseInt(v||""),h="/projects/".concat(E,"/pricechange"),b=(0,r.useState)(""),S=(0,u.Z)(b,2),T=S[0],j=S[1],x=Bt(y,{skip:g}),P=x.data,w=x.isLoading,O=ee(E,{skip:isNaN(E)||E<=0}),k=O.data,C=(O.isLoading,Vt({projectId:null===k||void 0===k?void 0:k.key},{skip:!(null===k||void 0===k?void 0:k.key)})),N=C.data,A=(C.isLoading,Kt()),I=(0,u.Z)(A,2),_=I[0],R=I[1].isLoading,q=Qt(),Z=(0,u.Z)(q,2),D=Z[0],F=Z[1].isLoading,U=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"success",summary:e,detail:n,life:3e3})},W=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"error",summary:e,detail:n,life:3e3})},M=Object.assign(Object.assign({},(0,m.ft)()),{proj_key:E});return r.createElement(r.Fragment,null,r.createElement(Q.F,{ref:t}),r.createElement(o.Rm,{baseRoute:h,description:"Price Change",id:y,data:P,isUpdating:R||F||l,isLoading:w,onSubmit:function(e){return rn(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var n,r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Object.assign(Object.assign({},e),{prev_effdate:(0,m.p6)(e.prev_effdate,"yyyy-MM-dd"),effdate:(0,m.p6)(e.effdate,"yyyy-MM-dd"),effprice:T}),t.prev=1,!g){t.next=8;break}return t.next=5,_(Object.assign(Object.assign({},n),M)).unwrap();case 5:r=t.sent,t.next=11;break;case 8:return t.next=10,D(Object.assign(Object.assign({},n),M)).unwrap();case 10:r=t.sent;case 11:U("Success",r.detail),c(!0),setTimeout((function(){d(h)}),m.P7),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),W("An error occurred","We couldn't save your post, try again!");case 19:case"end":return t.stop()}}),t,null,[[1,16]])})))},renderForm:function(e,t,n){var a,i;return r.createElement("div",{className:"pl-8"},r.createElement("div",{className:"field"},r.createElement("label",{className:(0,J.AK)("col-3")},"Project Code"),r.createElement(z.o,{value:null===k||void 0===k?void 0:k.id,disabled:!0})),r.createElement("div",{className:"field"},r.createElement("label",{className:(0,J.AK)("col-3")},"Project Name"),r.createElement(z.o,{style:{width:"40%"},value:null===k||void 0===k?void 0:k.name,disabled:!0})),r.createElement(L.i,null),r.createElement("div",{className:"field"},r.createElement("label",{htmlFor:g?"prev_effdate":"effdate",className:(0,J.AK)("col-3",{"p-error":n.prev_effdate})},"Previous Effective Date"),r.createElement(Et.Qr,{name:g?"prev_effdate":"effdate",control:e,rules:{},render:function(e){var t,n=e.field,a=e.fieldState;return r.createElement(nn.f,Object.assign({id:n.name,disabled:!0,showIcon:!0},n,{value:g&&(null===N||void 0===N?void 0:N.results.length)?new Date(null===(t=null===N||void 0===N?void 0:N.results[0])||void 0===t?void 0:t.effdate):new Date(null===P||void 0===P?void 0:P.effdate),style:{width:"25%"},dateFormat:"dd-MM-yy",className:(0,J.AK)({"p-invalid":a.invalid})}))}})),r.createElement("div",{className:"field"},r.createElement("label",{htmlFor:g?"prev_effprice":"effprice",className:(0,J.AK)("col-3",{"p-error":n.prev_effprice})},"Previous Effective Price"),r.createElement(Et.Qr,{name:g?"prev_effprice":"effprice",control:e,rules:{},render:function(e){var t,n=e.field;e.fieldState;return r.createElement(V.h3,Object.assign({id:n.name,disabled:!0,thousandSeparator:!0},n,{style:{width:"25%"},value:g&&(null===N||void 0===N?void 0:N.results.length)?null===(t=null===N||void 0===N?void 0:N.results[0])||void 0===t?void 0:t.effprice:null===P||void 0===P?void 0:P.effprice,className:(0,J.AK)("p-inputtext p-component")}))}})),r.createElement("div",{className:"field"},r.createElement("label",{htmlFor:"effdate",className:(0,J.AK)("col-3",{"p-error":n.effdate})},"Effective Date*"),r.createElement(Et.Qr,{defaultValue:g?new Date:new Date(null===P||void 0===P?void 0:P.effdate),name:"effdate",control:e,rules:{required:" This is required."},render:function(e){var t=e.field,n=e.fieldState;return r.createElement(nn.f,Object.assign({id:t.name},t,{showIcon:!0,disabled:!g,value:g?new Date(t.value):new Date(null===P||void 0===P?void 0:P.effdate),style:{width:"25%"},dateFormat:"dd-MM-yy",className:(0,J.AK)({"p-invalid":n.invalid})}))}}),(0,o.Hb)(null===(a=null===n||void 0===n?void 0:n.effdate)||void 0===a?void 0:a.message)),r.createElement(o.Wi,{label:"Effective Price",name:"effprice",className:"ml-2",control:e,errors:n,leftSpan:3,rightSpan:3,required:!T,formItem:{component:V.h3,componentProps:{thousandSeparator:!0,labelClassName:"mr-n1",className:"p-inputtext p-component",onValueChange:function(e){j(e.value)}}}}),r.createElement("div",{className:"field flex"},r.createElement("label",{htmlFor:"notes",className:(0,J.AK)("col-3",{"p-error":n.notes})},"Notes"),r.createElement(Et.Qr,{name:"notes",control:e,rules:{},render:function(e){var t=e.field,n=e.fieldState;return r.createElement(tn,Object.assign({id:t.name,style:{width:"40%"}},t,{className:(0,J.AK)({"p-invalid":n.invalid})}))}}),(0,o.Hb)(null===(i=null===n||void 0===n?void 0:n.notes)||void 0===i?void 0:i.message)))}}))},on=r.createElement(a.AW,{path:":id/pricechange"},r.createElement(a.AW,{path:"new",element:r.createElement(an,null)}),r.createElement(a.AW,{path:":blockId/edit",element:r.createElement(an,null)}),r.createElement(a.AW,{index:!0,element:r.createElement(Xt,null)})),ln=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},cn="/project/history/status/",sn=m.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listStatusChange:e.query({query:function(e){var t=e.page,n=e.size,r=e.projectId;return{url:(0,m.DS)(cn,"?page=".concat(t||1,"&page_size=").concat(n||m.IV,"&project=").concat(r||""))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:m.pJ.STATUS_CHANGE,id:t}}))),[{type:m.pJ.STATUS_CHANGE,id:"LIST"}]):[{type:m.pJ.STATUS_CHANGE,id:"LIST"}]}}),addStatusChange:e.mutation({query:function(e){return{url:cn,method:"POST",body:e}},invalidatesTags:[{type:m.pJ.STATUS_CHANGE,id:"LIST"}]}),getStatusChange:e.query({query:function(e){return"".concat(cn).concat(e)},providesTags:function(e,t,n){return[{type:m.pJ.STATUS_CHANGE,id:n}]}}),updateStatusChange:e.mutation({query:function(e){var t=e.key,n=ln(e,["key"]);return{url:"".concat(cn).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:m.pJ.STATUS_CHANGE,id:null===e||void 0===e?void 0:e.id}]}}),deleteStatusChange:e.mutation({query:function(e){return{url:"".concat(cn).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:m.pJ.STATUS_CHANGE,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),un=sn.useAddStatusChangeMutation,dn=sn.useDeleteStatusChangeMutation,pn=sn.useGetStatusChangeQuery,mn=sn.useListStatusChangeQuery,fn=sn.useUpdateStatusChangeMutation,vn=(sn.useGetErrorProneQuery,sn.endpoints.getStatusChange,function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))}),yn=function(e,t,n){return function(a){return r.createElement(r.Fragment,null,r.createElement(W.rU,{to:"".concat(e,"/").concat(a.key,"/edit"),style:{textDecoration:"none"}},r.createElement(N.z,{icon:"pi pi-eye",className:"p-button-rounded p-button-text"})),r.createElement(N.z,{style:{height:"20px",width:"20px",borderRadius:50},className:"p-button-rounded p-button-text",onClick:function(){return t(a.key,n)},icon:"pi pi-trash"}))}},gn=function(e){var t=(0,r.useRef)(null),n=(0,a.UO)().id,i=parseInt(n||""),l=isNaN(i)||i<=0,c=ee(i,{skip:l}),p=c.data,m=(c.isLoading,mn({projectId:null===p||void 0===p?void 0:p.key},{skip:!(null===p||void 0===p?void 0:p.key)})),f=m.data,v=m.isLoading,y=dn(),g=(0,u.Z)(y,2),E=g[0],h=g[1].isLoading;if(v)return r.createElement("div",{className:"custom-skeleton p-4"},r.createElement("div",null,r.createElement(ze.O,{height:"50px",width:"30%",className:"mb-2"}),r.createElement(ze.O,{height:"50px",width:"50%",className:"mb-2"})));var b=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"success",summary:e,detail:n,life:3e3})},S=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"error",summary:e,detail:n,life:3e3})},T=Object.assign(Object.assign({},ge.iR),{backgroundColor:"gray",color:"white"}),j=Object.assign(Object.assign({},ge.jc),{backgroundColor:"gray",color:"white"});return r.createElement(r.Fragment,null,r.createElement(Q.F,{ref:t}),r.createElement("div",null,r.createElement("div",{className:"flex"},r.createElement("h3",{className:(0,J.AK)("m-0 my-auto")},"Status Change"),r.createElement(W.rU,{to:"/projects/".concat(i,"/statuschange/new"),style:{textDecoration:"none"}},r.createElement(N.z,{label:"Add",className:"ml-3"})),r.createElement(W.rU,{to:"/projects/project/".concat(i,"/edit"),style:{textDecoration:"none",marginLeft:"auto"}},r.createElement(N.z,{label:"Back",className:"ml-auto"}))),r.createElement(L.i,null),r.createElement("div",{className:"pl-8"},r.createElement("div",{className:"field"},r.createElement("label",{className:(0,J.AK)("col-2")},"Project Code"),r.createElement(z.o,{value:null===p||void 0===p?void 0:p.id,disabled:!0})),r.createElement("div",{className:"field"},r.createElement("label",{className:(0,J.AK)("col-2")},"Project Name"),r.createElement(z.o,{style:{width:"50%"},value:null===p||void 0===p?void 0:p.name,disabled:!0}))),r.createElement(L.i,null)),r.createElement(o.Gn,{loading:h,style:{maxHeight:250,overflowX:"auto",border:"2px solid",padding:10,margin:10},value:null===f||void 0===f?void 0:f.results},r.createElement(ye.s,{headerStyle:j,style:{maxWidth:"100px"},bodyStyle:{textAlign:"center",overflow:"visible"},body:yn("/projects/".concat(i,"/statuschange"),(function(e,t){return vn(void 0,void 0,void 0,(0,s.Z)().mark((function n(){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:(0,d.V)({message:"Are you sure you want to delete?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){return vn(void 0,void 0,void 0,(0,s.Z)().mark((function n(){var r,a;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t(e);case 3:a=n.sent,b("Success",a),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),S("Failed",null===(r=null===n.t0||void 0===n.t0?void 0:n.t0.data)||void 0===r?void 0:r.detail);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))},reject:function(){}});case 3:case"end":return n.stop()}}),n)})))}),(function(e){return E(e).unwrap()}))}),r.createElement(ye.s,{headerStyle:T,field:"effdate",header:"Effective Date",sortable:!0,filter:!0,dataType:"numeric",style:{minWidth:"8rem"}}),r.createElement(ye.s,{headerStyle:T,field:"proj_status.descr",header:"Effective Status",sortable:!0,filter:!0,dataType:"numeric",style:{minWidth:"8rem"}}),r.createElement(ye.s,{headerStyle:T,field:"createdby",header:"User",sortable:!0,filter:!0,style:{minWidth:"12rem"}})))},En=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},hn=function(e){var t=(0,r.useRef)(null),n=(0,r.useState)(!1),i=(0,u.Z)(n,2),l=i[0],c=i[1],d=(0,a.s0)(),p=(0,a.UO)(),f=p.blockId,v=p.id,y=parseInt(f||""),g=isNaN(y)||y<=0,E=parseInt(v||""),h="/projects/".concat(E,"/statuschange"),b=pn(y,{skip:g}),S=b.data,T=b.isLoading,j=(0,a.TH)().state,x=ee(E,{skip:isNaN(E)||E<=0}),P=x.data,w=(x.isLoading,mn({projectId:null===P||void 0===P?void 0:P.key},{skip:!(null===P||void 0===P?void 0:P.key)})),O=w.data,k=(w.isLoading,ae().data),C=un(),N=(0,u.Z)(C,2),A=N[0],I=N[1].isLoading,_=fn(),R=(0,u.Z)(_,2),q=R[0],Z=R[1].isLoading,D=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"success",summary:e,detail:n,life:3e3})},F=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"error",summary:e,detail:n,life:3e3})},U=Object.assign(Object.assign({},(0,m.ft)()),{proj_key:E}),W=[{label:"Add",items:k||[]}];return r.createElement(r.Fragment,null,r.createElement(Q.F,{ref:t}),r.createElement(o.Rm,{baseRoute:h,description:"Status Change",id:y,data:S,dataFromLocation:j,isUpdating:I||Z||l,isLoading:T,onSubmit:function(e){return En(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var n,r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Object.assign(Object.assign({},e),{prev_effdate:(0,m.p6)(e.prev_effdate,"yyyy-MM-dd"),effdate:(0,m.p6)(e.effdate,"yyyy-MM-dd")}),t.prev=1,!g){t.next=8;break}return t.next=5,A(Object.assign(Object.assign({},n),U)).unwrap();case 5:r=t.sent,t.next=11;break;case 8:return t.next=10,q(Object.assign(Object.assign({},n),U)).unwrap();case 10:r=t.sent;case 11:D("Success",r.detail),c(!0),setTimeout((function(){d(h)}),m.P7),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),F("An error occurred","We couldn't save your post, try again!");case 19:case"end":return t.stop()}}),t,null,[[1,16]])})))},renderForm:function(e,t,n,a){var i;return r.createElement("div",{className:"pl-8"},r.createElement("div",{className:"field"},r.createElement("label",{className:(0,J.AK)("col-3")},"Project Code"),r.createElement(z.o,{value:null===P||void 0===P?void 0:P.id,disabled:!0})),r.createElement("div",{className:"field"},r.createElement("label",{className:(0,J.AK)("col-3")},"Project Name"),r.createElement(z.o,{style:{width:"40%"},value:null===P||void 0===P?void 0:P.name,disabled:!0})),r.createElement(L.i,null),r.createElement("div",{className:"field"},r.createElement("label",{htmlFor:g?"prev_effdate":"effdate",className:(0,J.AK)("col-3",{"p-error":n.prev_effdate})},"Previous Effective Date"),r.createElement(Et.Qr,{name:g?"prev_effdate":"effdate",control:e,rules:{},render:function(e){var t,n=e.field,a=e.fieldState;return r.createElement(nn.f,Object.assign({showIcon:!0,id:n.name,disabled:!0},n,{value:g&&(null===O||void 0===O?void 0:O.results.length)?new Date(null===(t=null===O||void 0===O?void 0:O.results[0])||void 0===t?void 0:t.effdate):new Date(null===S||void 0===S?void 0:S.effdate),style:{width:"25%"},dateFormat:"dd-MM-yy",className:(0,J.AK)({"p-invalid":a.invalid})}))}})),r.createElement("div",{className:"field"},r.createElement("label",{htmlFor:g?"prev_projstatus_key":"projstatus_key",className:(0,J.AK)("col-3",{"p-error":n.prev_projstatus_key})},"Previous Effective Status"),r.createElement(Et.Qr,{name:g?"prev_projstatus_key":"projstatus_key",control:e,rules:{},render:function(e){var t=e.field,n=e.fieldState;return r.createElement(B.L,Object.assign({disabled:!0,id:t.name},t,{style:{width:"40%"},value:g&&(null===O||void 0===O?void 0:O.results.length)?null===O||void 0===O?void 0:O.results[0].projstatus_key:t.value,className:(0,J.AK)({"p-invalid":n.invalid}),options:W,optionGroupTemplate:r.createElement("div",{style:{cursor:"pointer",textAlign:"center",backgroundColor:"lightgray"},onClick:function(){return d("/projects/project-status")}},"--Add And Edit--"),optionValue:"key",optionGroupLabel:"label",optionLabel:"descr",optionGroupChildren:"items"}))}})),r.createElement("div",{className:"field"},r.createElement("label",{htmlFor:"effdate",className:(0,J.AK)("col-3",{"p-error":n.effdate})},"Effective Date*"),r.createElement(Et.Qr,{defaultValue:g?new Date:new Date(null===S||void 0===S?void 0:S.effdate),name:"effdate",control:e,rules:{required:" This is required."},render:function(e){var t=e.field,n=e.fieldState;return r.createElement(nn.f,Object.assign({id:t.name,showIcon:!0},t,{disabled:!g,value:g?new Date(t.value):new Date(null===S||void 0===S?void 0:S.effdate),style:{width:"25%"},dateFormat:"dd-MM-yy",className:(0,J.AK)({"p-invalid":n.invalid})}))}}),(0,o.Hb)(null===(i=null===n||void 0===n?void 0:n.effdate)||void 0===i?void 0:i.message)),r.createElement(o.Wi,{label:"Effective Status",name:"projstatus_key",control:e,errors:n,required:!0,className:"ml-2",leftSpan:3,rightSpan:4,formItem:{component:B.L,componentProps:{optionGroupTemplate:r.createElement("div",{style:{cursor:"pointer",textAlign:"center",backgroundColor:"#e6e1e1",color:"black",lineHeight:2.5},onClick:function(){return d("/projects/project-status",{state:{url:g?"/projects/".concat(E,"/statuschange/new"):"/projects/".concat(E,"/statuschange/").concat(null===S||void 0===S?void 0:S.key,"/edit"),data:a()}})}},"-- Create And Edit --"),optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",labelClassName:"mr-n1",optionGroupLabel:"label",optionGroupChildren:"items",options:W}}}))}}))},bn=r.createElement(a.AW,{path:":id/statuschange"},r.createElement(a.AW,{path:"new",element:r.createElement(hn,null)}),r.createElement(a.AW,{path:":blockId/edit",element:r.createElement(hn,null)}),r.createElement(a.AW,{index:!0,element:r.createElement(gn,null)})),Sn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Tn="/project/status/",jn=m.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{getProjectStatuses:e.query({query:function(){return{url:Tn}},providesTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[].concat((0,p.Z)(e.map((function(e){var t=e.key;return{type:m.pJ.PROJECT_STATUS,id:t}}))),[{type:m.pJ.PROJECT_STATUS,id:"LIST"}])}}),addProjectStatus:e.mutation({query:function(e){return{url:Tn,method:"POST",body:e}},invalidatesTags:[{type:m.pJ.PROJECT_STATUS,id:"LIST"}]}),getProjectStatus:e.query({query:function(e){return"".concat(Tn).concat(e)},providesTags:function(e,t,n){return[{type:m.pJ.PROJECT_STATUS,id:n}]}}),updateProjectStatus:e.mutation({query:function(e){var t=e.key,n=Sn(e,["key"]);return{url:"".concat(Tn).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:m.pJ.PROJECT_STATUS,id:null===e||void 0===e?void 0:e.id}]}}),deleteProjectStatus:e.mutation({query:function(e){return{url:"".concat(Tn).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:m.pJ.PROJECT_STATUS,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),xn=jn.useAddProjectStatusMutation,Pn=jn.useDeleteProjectStatusMutation,wn=(jn.useGetProjectStatusQuery,jn.useGetProjectStatusesQuery),On=jn.useUpdateProjectStatusMutation,kn=(jn.useGetErrorProneQuery,jn.endpoints.getProjectStatus,function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))}),Cn=function(){var e=(0,a.s0)(),t=(0,a.TH)().state,n=(0,m.ft)(),i=(0,Et.cI)({}),l=i.control,c=i.formState,p=c.errors,f=(c.isDirty,i.register,i.reset,i.handleSubmit),v=i.setValue,y=wn(),g=y.data,E=y.isLoading,h=(0,r.useState)(!0),b=(0,u.Z)(h,2),S=b[0],T=b[1],j=(0,r.useState)(null),x=(0,u.Z)(j,2),P=x[0],w=x[1],O=(0,r.useRef)(null),k=xn(),C=(0,u.Z)(k,2),A=C[0],I=C[1].isLoading,_=On(),R=(0,u.Z)(_,2),q=R[0],Z=R[1].isLoading,D=Pn(),F=(0,u.Z)(D,2),U=F[0],W=(F[1].isLoading,function(e){return U(e).unwrap()}),M=function(e,t){var n;null===(n=null===O||void 0===O?void 0:O.current)||void 0===n||n.show({severity:"success",summary:e,detail:t,life:3e3})},G=function(e,t){var n;null===(n=null===O||void 0===O?void 0:O.current)||void 0===n||n.show({severity:"error",summary:e,detail:t,life:3e3})};return E?r.createElement("div",{className:"custom-skeleton p-4"},r.createElement("div",null,r.createElement(ze.O,{height:"50px",width:"30%",className:"mb-2"}),r.createElement(ze.O,{height:"50px",width:"50%",className:"mb-2"}))):r.createElement(r.Fragment,null,r.createElement(Q.F,{ref:O}),r.createElement(o.Gn,{className:"pl-8",style:{height:"50%",width:"50%"},header:r.createElement("div",{className:"flex"},r.createElement("h3",{className:(0,J.AK)("m-0 my-auto")},"Project Status"),r.createElement(N.z,{loading:I||Z,label:"Add",className:"ml-3",onClick:function(){T(!0),v("descr","")}})),rowHover:!0,onRowClick:function(e){T(!1),w(e.data.key),v("descr",e.data.descr)},value:g,stripedRows:!0},r.createElement(ye.s,{headerStyle:ge.jc,style:{maxWidth:"100px"},bodyStyle:{textAlign:"center"},body:function(e){return function(t){return r.createElement(r.Fragment,null,r.createElement(N.z,{onClick:function(){T(!1),w(t.key),v("descr",t.descr)},icon:"pi pi-eye",className:"p-button-rounded p-button-text"}),r.createElement(N.z,{style:{height:"20px",width:"20px",borderRadius:50},onClick:function(){return e(t.key)},className:"p-button-rounded p-button-text",icon:"pi pi-trash"}))}}((function(e){return kn(void 0,void 0,void 0,(0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(W){t.next=2;break}return t.abrupt("return");case 2:(0,d.V)({message:"Are you sure you want to delete?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){return kn(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var n,r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,W(e);case 3:r=t.sent,M("Success",r),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),G("Failed",null===(n=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===n?void 0:n.detail);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))},reject:function(){}});case 3:case"end":return t.stop()}}),t)})))}))}),r.createElement(ye.s,{headerStyle:ge.iR,field:"descr",header:"Project Status",sortable:!0,filter:!0})),r.createElement(L.i,null),r.createElement("div",null,r.createElement("form",{onSubmit:f((function(e){return kn(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!S){t.next=7;break}return t.next=4,A(Object.assign(Object.assign({},e),n)).unwrap();case 4:r=t.sent,t.next=11;break;case 7:return console.log(P),t.next=10,q(Object.assign(Object.assign({key:P},e),n)).unwrap();case 10:r=t.sent;case 11:M("Success",r.detail),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),G("An error occurred","We couldn't save your request, try again!");case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))}))},r.createElement("div",{className:"flex"},r.createElement("div",{className:"col-1"}),r.createElement("div",{className:"col-7"},function(e,t,n){return r.createElement("div",{className:"pl-8"},r.createElement(o.Wi,{label:"Project Status",name:"descr",control:e,errors:n,required:!0,leftSpan:3,rightSpan:5,formItem:{component:z.o,componentProps:{maxLength:100,disabled:I||Z}}}))}(l,0,p)),r.createElement("div",{className:"my-auto"},r.createElement(N.z,{loading:I||Z,label:"Save",type:"submit",style:{paddingRight:20},className:"p-button-warning mr-3"}),r.createElement(N.z,{loading:I||Z,label:"Discard",className:"p-button-plain",onClick:function(){return e((null===t||void 0===t?void 0:t.url)||"/projects/project",{state:t.data})}}))))))},Nn=r.createElement(a.AW,{path:"project-status"},r.createElement(a.AW,{index:!0,element:r.createElement(Cn,null)})),An=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Ln="/project/availability/",In=m.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listAvailability:e.query({query:function(e){var t=e.projectId,n=e.page,r=e.status;return{url:(0,m.DS)(Ln,"".concat(t,"?page=").concat(n||1,"&status=").concat(r||""))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:m.pJ.AVAILABILITY,id:t}}))),[{type:m.pJ.AVAILABILITY,id:"LIST"}]):[{type:m.pJ.AVAILABILITY,id:"LIST"}]}}),addAvailability:e.mutation({query:function(e){return{url:Ln,method:"POST",body:e}},invalidatesTags:[{type:m.pJ.AVAILABILITY,id:"LIST"}]}),getAvailability:e.query({query:function(e){return"".concat(Ln).concat(e)},providesTags:function(e,t,n){return[{type:m.pJ.AVAILABILITY,id:n}]}}),updateAvailability:e.mutation({query:function(e){var t=e.key,n=An(e,["key"]);return{url:"".concat(Ln).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:m.pJ.AVAILABILITY,id:null===e||void 0===e?void 0:e.id}]}}),deleteAvailability:e.mutation({query:function(e){return{url:"".concat(Ln).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:m.pJ.AVAILABILITY,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),_n=(In.useAddAvailabilityMutation,In.useDeleteAvailabilityMutation,In.useGetAvailabilityQuery,In.useListAvailabilityQuery),Rn=(In.useUpdateAvailabilityMutation,In.useGetErrorProneQuery,In.endpoints.getAvailability,[{label:"All",value:""},{label:"Available",value:"A"},{label:"Booked",value:"B"},{label:"Sold",value:"S"}]),qn=function(e){var t=(0,r.useRef)(null),n=(0,a.UO)().id,i=parseInt(n||""),l=isNaN(i)||i<=0,c=(0,r.useState)(""),s=(0,u.Z)(c,2),d=s[0],p=s[1],m=ee(i,{skip:l}),f=m.data,v=(m.isLoading,_n({projectId:null===f||void 0===f?void 0:f.key,status:d})),y=v.data;if(v.isLoading)return r.createElement("div",{className:"custom-skeleton p-4"},r.createElement("div",null,r.createElement(ze.O,{height:"50px",width:"30%",className:"mb-2"}),r.createElement(ze.O,{height:"50px",width:"50%",className:"mb-2"})));var g=Object.assign(Object.assign({},ge.iR),{backgroundColor:"gray",color:"white"});return r.createElement(r.Fragment,null,r.createElement(Q.F,{ref:t}),r.createElement("div",null,r.createElement("div",{className:"flex"},r.createElement("h3",{className:(0,J.AK)("m-0 my-auto")},"Availability"),r.createElement(W.rU,{to:"/projects/project/".concat(i,"/edit"),style:{textDecoration:"none",marginLeft:"auto"}},r.createElement(N.z,{label:"Back",className:"ml-auto"}))),r.createElement(L.i,null),r.createElement("div",{className:"pl-8"},r.createElement("div",{className:"flex"},r.createElement("div",{className:"field col-7"},r.createElement("label",{className:(0,J.AK)("col-3")},"Project Code"),r.createElement(z.o,{value:null===f||void 0===f?void 0:f.id,disabled:!0}))),r.createElement("div",{className:"flex"},r.createElement("div",{className:"field col-7"},r.createElement("label",{className:(0,J.AK)("col-3")},"Project Name"),r.createElement(z.o,{style:{width:"70%"},value:null===f||void 0===f?void 0:f.name,disabled:!0})),r.createElement("div",{className:"field col-5"},r.createElement("label",{className:(0,J.AK)("col-3")},"Display"),r.createElement(B.L,{style:{width:"60%"},options:Rn,optionLabel:"label",optionValue:"value",value:d,onChange:function(e){p(e.target.value)}})))),r.createElement(L.i,null)),r.createElement(o.Gn,{style:{height:"calc(100vh - 450px)",maxHeight:250,overflowX:"auto",border:"2px solid",padding:10,margin:10},value:null===y||void 0===y?void 0:y.results},r.createElement(ye.s,{headerStyle:g,field:"block",header:"Block",style:{minWidth:"8rem"}}),r.createElement(ye.s,{headerStyle:g,field:"floor",header:"Floor",style:{minWidth:"8rem"}}),r.createElement(ye.s,{headerStyle:g,field:"Unit",header:"Unit",style:{minWidth:"8rem"}}),r.createElement(ye.s,{headerStyle:g,field:"status",header:"Status",style:{minWidth:"8rem",padding:0},body:function(e){var t={text:"",background:""};switch(e.status){case"A":default:t={text:"Available",background:"lightgreen"};break;case"S":t={text:"Sold",background:"orange"};break;case"B":t={text:"Booked",background:"skyblue"}}return r.createElement(r.Fragment,null,r.createElement("div",{style:{backgroundColor:t.background,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},t.text))}}),r.createElement(ye.s,{headerStyle:g,field:"sale_area",header:"Sales Area",style:{minWidth:"8rem"}}),r.createElement(ye.s,{headerStyle:g,field:"usd_area",header:"UDS Area",style:{minWidth:"8rem"}}),r.createElement(ye.s,{headerStyle:g,field:"carpet_area",header:"Carpet Area",style:{minWidth:"8rem"}})))},Jn=r.createElement(a.AW,{path:":id/availability"},r.createElement(a.AW,{index:!0,element:r.createElement(qn,null)})),Zn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Dn="/geo/city/",Fn=m.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{getCities:e.query({query:function(){return{url:(0,m.DS)(Dn)}},providesTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[].concat((0,p.Z)(e.map((function(e){var t=e.key;return{type:m.pJ.CITIES,id:t}}))),[{type:m.pJ.CITIES,id:"LIST"}])}}),addCity:e.mutation({query:function(e){return{url:Dn,method:"POST",body:e}},invalidatesTags:[{type:m.pJ.CITIES,id:"LIST"}]}),getCity:e.query({query:function(e){return"".concat(Dn).concat(e)},providesTags:function(e,t,n){return[{type:m.pJ.CITIES,id:n}]}}),updateCity:e.mutation({query:function(e){var t=e.key,n=Zn(e,["key"]);return{url:"".concat(Dn).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:m.pJ.CITIES,id:null===e||void 0===e?void 0:e.id}]}}),deleteCity:e.mutation({query:function(e){return{url:"".concat(Dn).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:m.pJ.CITIES,id:null===e||void 0===e?void 0:e.id}]}}),getStates:e.query({query:function(){return{url:"/geo/state/"}},providesTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[].concat((0,p.Z)(e.map((function(e){var t=e.key;return{type:m.pJ.STATES,id:t}}))),[{type:m.pJ.STATES,id:"LIST"}])}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),Un=Fn.useAddCityMutation,Wn=Fn.useDeleteCityMutation,Mn=(Fn.useGetCityQuery,Fn.useGetCitiesQuery),Gn=Fn.useUpdateCityMutation,Kn=(Fn.useGetErrorProneQuery,Fn.useGetStatesQuery),zn=(Fn.endpoints.getCity,function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))}),Bn=function(){var e=(0,a.s0)(),t=(0,a.TH)().state,n=(0,m.ft)(),i=(0,Et.cI)({}),l=i.control,c=i.formState,p=c.errors,f=(c.isDirty,i.register,i.reset,i.handleSubmit),v=i.setValue,y=Mn(),g=y.data,E=y.isLoading,h=Kn(),b=h.data,S=h.isLoading,T=(0,r.useState)(!0),j=(0,u.Z)(T,2),x=j[0],P=j[1],w=(0,r.useState)(null),O=(0,u.Z)(w,2),k=O[0],C=O[1],A=(0,r.useRef)(null),I=Un(),_=(0,u.Z)(I,2),R=_[0],q=_[1].isLoading,Z=Gn(),D=(0,u.Z)(Z,2),F=D[0],U=D[1].isLoading,W=Wn(),M=(0,u.Z)(W,2),G=M[0],K=(M[1].isLoading,function(e){return G(e).unwrap()}),V=function(e,t){var n;null===(n=null===A||void 0===A?void 0:A.current)||void 0===n||n.show({severity:"success",summary:e,detail:t,life:3e3})},H=function(e,t){var n;null===(n=null===A||void 0===A?void 0:A.current)||void 0===n||n.show({severity:"error",summary:e,detail:t,life:3e3})};return E||S?r.createElement("div",{className:"custom-skeleton p-4"},r.createElement("div",null,r.createElement(ze.O,{height:"50px",width:"30%",className:"mb-2"}),r.createElement(ze.O,{height:"50px",width:"50%",className:"mb-2"}))):r.createElement(r.Fragment,null,r.createElement(Q.F,{ref:A}),r.createElement(o.Gn,{className:"pl-8",style:{height:"50%",width:"70%"},header:r.createElement("div",{className:"flex"},r.createElement("h3",{className:(0,J.AK)("m-0 my-auto")},"City")),rowHover:!0,onRowClick:function(e){P(!1),C(e.data.key),v("name",e.data.name),v("state_key",e.data.state_key)},value:g,stripedRows:!0},r.createElement(ye.s,{headerStyle:ge.jc,style:{maxWidth:"100px"},bodyStyle:{textAlign:"center",overflow:"visible"},body:function(e){return function(t){return r.createElement(r.Fragment,null,r.createElement(N.z,{onClick:function(){console.log(t),P(!1),C(t.key),v("name",t.name),v("state_key",t.state_key)},icon:"pi pi-eye",className:"p-button-rounded p-button-text"}),r.createElement(N.z,{style:{height:"20px",width:"20px",borderRadius:50},onClick:function(){return e(t.key)},className:"p-button-rounded p-button-text",icon:"pi pi-trash"}))}}((function(e){return zn(void 0,void 0,void 0,(0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(K){t.next=2;break}return t.abrupt("return");case 2:(0,d.V)({message:"Are you sure you want to delete?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){return zn(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var n,r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,K(e);case 3:r=t.sent,V("Success",r),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),H("Failed",null===(n=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===n?void 0:n.detail);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))},reject:function(){}});case 3:case"end":return t.stop()}}),t)})))}))}),r.createElement(ye.s,{headerStyle:ge.iR,field:"name",header:"City Name",sortable:!0,filter:!0}),r.createElement(ye.s,{headerStyle:ge.iR,field:"state.name",header:"State",sortable:!0,filter:!0})),r.createElement(L.i,null),r.createElement("div",null,r.createElement("form",{onSubmit:f((function(e){return zn(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!x){t.next=7;break}return t.next=4,R(Object.assign(Object.assign({},e),n)).unwrap();case 4:r=t.sent,t.next=11;break;case 7:return console.log(k),t.next=10,F(Object.assign(Object.assign({key:k},e),n)).unwrap();case 10:r=t.sent;case 11:P(!0),v("name",""),v("state_key",""),V("Success",r.detail),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),H("An error occurred","We couldn't save your request, try again!");case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))}))},r.createElement("div",{className:"flex"},r.createElement("div",{className:"col-1"}),r.createElement("div",{className:"col-7"},function(e,t,n){return r.createElement("div",{className:"pl-8"},r.createElement(o.Wi,{label:"City Name",name:"name",control:e,errors:n,required:!0,leftSpan:4,rightSpan:5,formItem:{component:z.o,componentProps:{maxLength:50,disabled:q||U}}}),r.createElement(o.Wi,{label:"State",name:"state_key",control:e,errors:n,required:!0,leftSpan:4,rightSpan:6,formItem:{component:B.L,componentProps:{optionLabel:"name",optionValue:"key",filter:!0,filterBy:"name",options:b}}}))}(l,0,p)),r.createElement("div",{className:"my-auto"},r.createElement(N.z,{loading:q||U,label:"Save",type:"submit",style:{paddingRight:20},className:"p-button-warning mr-3"}),r.createElement(N.z,{loading:q||U,label:"Clear",className:"mr-3",onClick:function(e){e.preventDefault(),P(!0),v("name",""),v("state_key","")}}),r.createElement(N.z,{loading:q||U,label:"Back",onClick:function(){return e((null===t||void 0===t?void 0:t.url)||"/projects/project",{state:t.data})}}))))))},Vn=r.createElement(a.AW,{path:"city"},r.createElement(a.AW,{index:!0,element:r.createElement(Bn,null)})),Qn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Hn="/project/task/",Yn=m.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listTask:e.query({query:function(e){var t=e.page,n=e.size,r=e.projectId;return{url:(0,m.DS)(Hn,"?page=".concat(t||1,"&page_size=").concat(n||m.IV,"&project=").concat(r||""))}},transformResponse:function(e,t,n){return e.results=e.results.map((function(e){return Object.assign(Object.assign({},e),{proj_key:n.projectId})})),e},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:m.pJ.PROJECT_TASK,id:t}}))),[{type:m.pJ.PROJECT_TASK,id:"LIST"}]):[{type:m.pJ.PROJECT_TASK,id:"LIST"}]}}),addTask:e.mutation({query:function(e){return{url:"".concat(Hn,"bulk/"),method:"POST",body:e}},invalidatesTags:[{type:m.pJ.PROJECT_TASK,id:"LIST"}]}),getTask:e.query({query:function(e){return"".concat(Hn,"reverse/?project=").concat(e)},providesTags:function(e,t,n){return[{type:m.pJ.PROJECT_TASK,id:n}]}}),updateTask:e.mutation({query:function(e){var t=Qn(e,[]);return{url:"".concat(Hn,"bulk/edit/"),method:"POST",body:t}},invalidatesTags:function(e){return[{type:m.pJ.PROJECT_TASK,id:null===e||void 0===e?void 0:e.id}]}}),deleteTask:e.mutation({query:function(e){return{url:"".concat(Hn).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:m.pJ.PROJECT_TASK,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),Xn=Yn.useAddTaskMutation,$n=Yn.useDeleteTaskMutation,er=Yn.useGetTaskQuery,tr=Yn.useListTaskQuery,nr=Yn.useUpdateTaskMutation,rr=(Yn.useGetErrorProneQuery,"task"),ar="Task",or=function(e){var t=E({}),n=t.data,a=t.isFetching,l=(0,r.useState)(null),c=(0,u.Z)(l,2),s=c[0],d=c[1],p=tr({projectId:s},{skip:!s}),m=p.data,f=p.isFetching,v=$n(),y=(0,u.Z)(v,2),g=y[0],h=y[1].isLoading;return r.createElement(r.Fragment,null,r.createElement(o.PS,{baseRoute:"/".concat(i,"/").concat(rr),description:ar,isLoading:a,data:null===n||void 0===n?void 0:n.results,newTable:!0,showHeader:!0,tableLayoutClass:"none",gridProps:{style:Object.assign(Object.assign({},ge.O4),{margin:"0 30px 20px",border:"none",cursor:"pointer"}),onRowClick:function(e){d(e.key)},rowClass:function(e){return e.key==s?"selectedrow":void 0}},allowFilters:!1,hideActionColumn:!0},r.createElement(o._P,{field:"name",header:"Project Name",type:"text"}),r.createElement(o._P,{field:"cityname",header:"State/City",filteringType:"text",displayValueGetter:function(e){return"".concat(e.state.id,"/").concat(e.city.name)}}),r.createElement(o._P,{field:"pro_type.descr",header:"Project Type",filteringType:"text"}),r.createElement(o._P,{field:"no_of_units",header:"Total Units",defaultValue:0,align:"right",type:"number",filteringType:"number"})),r.createElement(o.PS,{baseRoute:"/".concat(i,"/").concat(rr),description:ar,isLoading:f||h,data:null===m||void 0===m?void 0:m.results,deleteAction:function(e){return g(e).unwrap()},navKey:"proj_key",newTable:!0,emptyRowMessage:r.createElement("h3",{className:"text-center"},s?"No Task For Selected Project":"Select a Project To View")},r.createElement(o._P,{field:"id",header:"Task",filteringType:"text"}),r.createElement(o._P,{field:"descr",header:"Task Description",filteringType:"text"}),r.createElement(o._P,{field:"stage.id",header:"Stage",filteringType:"text"}),r.createElement(o._P,{field:"stage.descr",header:"Stage Description",filteringType:"text"}),r.createElement(o._P,{field:"stage.work.id",header:"Phase",filteringType:"text"}),r.createElement(o._P,{field:"stage.work.descr",header:"Phase Description",filteringType:"text"})))},ir=(0,r.forwardRef)((function(e,t){var n=e.data,a=e.isLoading,i=e.onChange,l=e.onSelectedRowChange,c=e.selectedWork,s=(e.editMode,(0,r.useState)([])),p=(0,u.Z)(s,2),f=p[0],v=p[1],y=(0,r.useState)(c),g=(0,u.Z)(y,2),E=g[0],h=g[1],b=(0,r.useRef)(f),S=(0,r.useRef)([]),T=(0,m.Eg)(),j=T.data,x=T.isFetching;(0,r.useImperativeHandle)(t,(function(){return{getItems:function(){return f}}})),(0,r.useEffect)((function(){v(n),b.current=n}),[n]),(0,r.useEffect)((function(){S.current=(null===j||void 0===j?void 0:j.results)||[],console.log(j)}),[j]);return r.createElement(o.PS,{baseRoute:"/purchase/".concat(rr),description:ar,isLoading:a||x,data:f,newTable:!0,allowFilters:!1,actionBodyTemplate:function(e){return r.createElement(N.z,{style:{height:"35px",width:"20px",marginLeft:20},type:"button",onClick:function(t){(0,d.V)({message:"Are you sure you want to Delete Item?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){!function(e){var t=b.current.filter((function(t){return t!==e}));b.current=t,v(t)}(e)},reject:function(){}})},className:"p-button-rounded p-button-text",icon:"pi pi-trash"})},gridProps:{allowAdd:!0,newRowDefaults:{indexKey:Math.random(),id:"Work ".concat(f.length+1),descr:"Work ".concat(f.length+1),stages:[]},OnRowsChanged:function(e){v(e),b.current=e,i(!0)},style:{cursor:"pointer"},rowClass:function(e){return!e.indexKey||e.indexKey!=E&&e.indexKey!=c?void 0:"selectedrow"},onRowClick:function(e,t){"action"===t.key?(h(-1),l(-1)):(h(e.indexKey),l(e.indexKey))}}},r.createElement(o._P,{field:"id",header:"Work",type:"text",editOnDoubleClick:!0,editorType:"custom"}),r.createElement(o._P,{field:"descr",header:"Work Description",type:"text",editOnDoubleClick:!0,editorType:"text"}),r.createElement(o._P,{field:"vendtyp_key",header:"Contractor Type",editOnDoubleClick:!0,editorType:function(e){var t=e.row,n=e.column,a=e.onRowChange;e.onClose;return r.createElement(B.L,{autoFocus:!0,style:{width:"100%"},className:"p-inputtext-sm",value:t[n.key],optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",options:S.current,onChange:function(e){t[n.key]=e.value,a(t,!0)},tabIndex:-1})},displayValueGetter:function(e,t){var n,r;if(!Array.isArray(e)){var a=null===(n=S.current)||void 0===n?void 0:n.filter((function(n){return n.key===e[t]}));return a.length?a[0].descr:null===(r=null===e||void 0===e?void 0:e.items)||void 0===r?void 0:r.descr}}}))})),lr=(0,r.forwardRef)((function(e,t){var n=e.data,a=e.isLoading,i=e.disableTable,l=void 0!==i&&i,c=e.onChange,s=e.selectedStage,p=e.onSelectedRowChange,m=(e.editMode,(0,r.useState)([])),f=(0,u.Z)(m,2),v=f[0],y=f[1],g=(0,r.useState)(s),E=(0,u.Z)(g,2),h=E[0],b=E[1],S=(0,r.useRef)(v);(0,r.useImperativeHandle)(t,(function(){return{getItems:function(){return v}}})),(0,r.useEffect)((function(){y(n),S.current=n}),[n]);return r.createElement(o.PS,{baseRoute:"/purchase/".concat(rr),description:ar,isLoading:a,data:v,newTable:!0,allowFilters:!1,actionBodyTemplate:function(e){return r.createElement(N.z,{style:{height:"35px",width:"20px",marginLeft:20},type:"button",onClick:function(t){p(-1),(0,d.V)({message:"Are you sure you want to Delete Item?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){!function(e){var t=S.current.filter((function(t){return t!==e}));S.current=t,y(t),c(t)}(e)},reject:function(){}}),t.stopPropagation()},className:"p-button-rounded p-button-text",icon:"pi pi-trash"})},gridProps:{allowAdd:!l,newRowDefaults:{indexKey:Math.random(),id:"Stage ".concat(v.length+1),descr:"Stage ".concat(v.length+1),tasks:[]},style:{cursor:"pointer"},OnRowsChanged:function(e){y(e),S.current=e,c(e)},rowClass:function(e){return!e.indexKey||-1===s||e.indexKey!=s&&e.indexKey!=h?void 0:"selectedrow"},onRowClick:function(e){b(e.indexKey),p(e.indexKey)}}},r.createElement(o._P,{field:"id",header:"Stage",type:"text",editOnDoubleClick:!0,editorType:"custom"}),r.createElement(o._P,{field:"descr",header:"Stage Description",editOnDoubleClick:!0,type:"text",editorType:"text"}))})),cr=(0,r.forwardRef)((function(e,t){var n=e.data,a=e.isLoading,i=e.disableTable,l=void 0!==i&&i,c=e.onChange,s=(e.editMode,(0,r.useState)([])),p=(0,u.Z)(s,2),f=p[0],v=p[1],y=(0,r.useRef)(f),g=(0,r.useRef)([]),E=(0,m.Eg)(),h=E.data;E.isLoading;(0,r.useImperativeHandle)(t,(function(){return{getItems:function(){return f}}})),(0,r.useEffect)((function(){if(n){var e=n.map((function(e){return Object.assign(Object.assign({},e),{startdate:e.startdate?new Date(e.startdate):"",enddate:e.enddate?new Date(e.enddate):""})}));v(e),y.current=e}}),[n]),(0,r.useEffect)((function(){g.current=(null===h||void 0===h?void 0:h.results)||[]}),[h]);return r.createElement(o.PS,{baseRoute:"/purchase/".concat(rr),description:ar,isLoading:a,data:f,newTable:!0,allowFilters:!1,actionBodyTemplate:function(e){return r.createElement(N.z,{style:{height:"35px",width:"20px",marginLeft:20},type:"button",onClick:function(){(0,d.V)({message:"Are you sure you want to Delete Item?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){return function(e){var t=y.current.filter((function(t){return t!==e}));y.current=t,v(t),c(t)}(e)},reject:function(){}})},className:"p-button-rounded p-button-text",icon:"pi pi-trash"})},gridProps:{allowAdd:!l,newRowDefaults:{startdate:new Date,enddate:new Date,id:"Task ".concat(f.length+1),descr:"Task ".concat(f.length+1)},OnRowsChanged:function(e){v(e),y.current=e,c(e)}}},r.createElement(o._P,{field:"id",header:"Task",type:"text",editorType:"custom"}),r.createElement(o._P,{field:"descr",header:"Task Description",type:"text",editorType:"text"}),r.createElement(o._P,{field:"startdate",header:"Start Date",type:"date",editorType:"date"}),r.createElement(o._P,{field:"enddate",header:"End Date",type:"date",editorType:"date"}))})),sr=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},ur=function(e){var t=(0,a.TH)().state,n=(0,o.pm)(),i=n.showSuccess,l=n.showError,c=(0,r.useState)(!1),d=(0,u.Z)(c,2),f=d[0],v=d[1],y=(0,r.useState)(!1),g=(0,u.Z)(y,2),E=g[0],h=g[1],b=(0,r.useState)(null),S=(0,u.Z)(b,2),T=S[0],j=S[1],x=(0,r.useState)(-1),P=(0,u.Z)(x,2),w=P[0],O=P[1],k=(0,r.useState)([]),C=(0,u.Z)(k,2),N=C[0],A=C[1],L=(0,r.useState)(null),I=(0,u.Z)(L,2),_=I[0],R=I[1],q=(0,r.useState)({}),J=(0,u.Z)(q,2),Z=J[0],D=J[1],F=(0,r.useState)([]),U=(0,u.Z)(F,2),W=U[0],M=U[1],G=(0,r.useState)({}),K=(0,u.Z)(G,2),V=K[0],Q=K[1],H=(0,r.useState)([]),Y=(0,u.Z)(H,2),X=Y[0],$=Y[1],ee=(0,m.ft)(),te=(0,a.s0)(),ne=(0,a.UO)().id,re=parseInt(ne||""),ae=isNaN(re)||re<=0,oe=(0,r.useRef)(),ie=(0,r.useRef)(),le=(0,r.useRef)(),ce="/projects/".concat(rr),se=(0,r.useState)(!1),ue=(0,u.Z)(se,2),de=ue[0],pe=ue[1],me=(0,r.useState)(re),fe=(0,u.Z)(me,2),ve=fe[0],ye=fe[1],ge=(0,r.useRef)();ge.current=w;var Ee=(0,r.useRef)();Ee.current=_;var he=er(re,{skip:ae}),be=he.data,Se=he.isLoading,Te=(0,m.gp)({},{refetchOnMountOrArgChange:!0,skip:!ae}),je=Te.data,xe=Te.isFetching,Pe=Xn(),we=(0,u.Z)(Pe,2),Oe=we[0],ke=we[1].isLoading,Ce=nr(),Ne=(0,u.Z)(Ce,2),Ae=Ne[0],Le=Ne[1].isLoading;(0,r.useEffect)((function(){var e;if(be&&!E){ye(null===(e=be[0])||void 0===e?void 0:e.proj_key);var n=(null===be||void 0===be?void 0:be.map((function(e){return Object.assign(Object.assign({},e),{indexKey:Math.random()})})))||[];A(n);var r=n.filter((function(e){var n,r;return(null===(r=null===(n=null===t||void 0===t?void 0:t.stage)||void 0===n?void 0:n.work)||void 0===r?void 0:r.key)===e.key}))[0];r&&O(r.indexKey),n.map((function(e){var t=(null===e||void 0===e?void 0:e.stages.map((function(e){return Object.assign(Object.assign({},e),{indexKey:Math.random()})})))||[];(r=Z)["".concat(e.indexKey)]=t,D(Object.assign({},r))})),Object.keys(Z).map((function(e){var n;null===(n=Z[e])||void 0===n||n.map((function(e){var n;e.key===(null===(n=null===t||void 0===t?void 0:t.stage)||void 0===n?void 0:n.key)&&j({stage:e.indexKey});var r=V;r["".concat(e.indexKey)]=e.tasks,Q(Object.assign({},r))}))})),h(!0)}}),[be]),(0,r.useEffect)((function(){if(-1!==w&&w){var e=Z[w]?(0,p.Z)(Z[w]):[],t=(null===be||void 0===be?void 0:be.filter((function(e){return(null===e||void 0===e?void 0:e.indexKey)==w})).concat(e))||e;M(t)}else M([]);-1!==_&&R(-1),T&&(R(T.stage),j(null))}),[w]),(0,r.useEffect)((function(){if(-1!==_&&_){var e=V[_]?(0,p.Z)(V[_]):[];$(e)}else $([])}),[_]);var Ie=function(){var e,t,n=null===(e=oe.current)||void 0===e?void 0:e.getItems(),r={};return null===(t=Object.keys(Z))||void 0===t||t.map((function(e){var t;r[e]=null===(t=Z[e])||void 0===t?void 0:t.map((function(e){var t,n=null===(t=V[Object.keys(V).filter((function(t){return t==e.indexKey}))[0]])||void 0===t?void 0:t.map((function(e){return Object.assign(Object.assign({},e),{startdate:(0,m.p6)(e.startdate,"yyyy-MM-dd"),enddate:(0,m.p6)(e.enddate,"yyyy-MM-dd")})}));return Object.assign(Object.assign({},e),{tasks:n||[]})}))})),null===n||void 0===n?void 0:n.map((function(e){return Object.assign(Object.assign({},e),{stages:r[Object.keys(r).filter((function(t){return t==e.indexKey}))[0]]||[]})}))};return r.createElement(r.Fragment,null,r.createElement(o.Rm,{baseRoute:ce,description:ar,id:re,data:be,isUpdating:ke||Le||f,isItemsTableChanged:de,isLoading:Se,onSubmit:function(e){return sr(void 0,void 0,void 0,(0,s.Z)().mark((function t(){var n,r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!ae){t.next=11;break}if(Object.keys(V).length){t.next=5;break}return l("No Task Added","Add atleast 1 task to proceed"),t.abrupt("return");case 5:return n=Object.assign(Object.assign(Object.assign({},e),ee),{works:Ie()}),t.next=8,Oe(Object.assign({},n)).unwrap();case 8:r=t.sent,t.next=15;break;case 11:return n=Object.assign(Object.assign({},ee),{works:Ie(),proj_key:ve}),t.next=14,Ae(Object.assign({},n)).unwrap();case 14:r=t.sent;case 15:i("Success",r.detail),v(!0),setTimeout((function(){te(ce)}),m.P7),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(0),console.log(t.t0),l("An error occurred","We couldn't save your post, try again!");case 24:case"end":return t.stop()}}),t,null,[[0,20]])})))},renderForm:function(e,t,n){var a;return r.createElement("div",{className:"pl-8"},r.createElement(o.Wi,{label:"Project",name:"proj_key",className:"col-10 md:col-6",control:e,errors:n,isLoading:xe,required:ae&&"Select a Project",useExplicit:!0,leftSpan:3,rightSpan:9,defaultValue:ve,formItem:ae?{component:B.L,componentProps:{optionLabel:"name",optionValue:"key",filter:!0,filterBy:"name",options:je}}:{component:z.o,componentProps:{value:be?null===(a=be[0].project)||void 0===a?void 0:a.name:"NA",disabled:!0}}}),r.createElement("div",{className:"col-12 full ",style:{height:"calc(100% - 183px)",minHeight:200}},r.createElement(ir,{data:N,isLoading:Se,ref:oe,editMode:!ae,selectedWork:w,onSelectedRowChange:function(e){e!==w&&O(e)},onChange:function(e){!de&&pe(!0)}})),r.createElement("div",{className:"col-12 full ",style:{height:"calc(100% - 183px)",minHeight:200}},r.createElement(lr,{data:W,ref:ie,editMode:!ae,selectedStage:_,disableTable:!w||-1===w,onSelectedRowChange:function(e){e!==_&&R(e)},onChange:function(e){R(-1),!de&&pe(!0);var t=ge.current;if(-1!==t&&t){var n=Z;n[t]=e,D(Object.assign({},n))}}})),r.createElement("div",{className:"col-12 full ",style:{height:"calc(100% - 183px)",minHeight:200}},r.createElement(cr,{data:X,ref:le,editMode:!ae,disableTable:!_||-1===_,onChange:function(e){!de&&pe(!0);var t=Ee.current;if(-1!==t&&t){var n=Z;n[t]=e,Q(Object.assign({},n))}}})))}}))},dr=r.createElement(a.AW,{path:"task"},r.createElement(a.AW,{path:"new",element:r.createElement(ur,null)}),r.createElement(a.AW,{path:":id/edit",element:r.createElement(ur,null)}),r.createElement(a.AW,{index:!0,element:r.createElement(or,null)})),pr=function(e){var t=(0,m.dx)({}),n=t.data,i=(t.isLoading,(0,r.useState)(null)),l=(0,u.Z)(i,2),c=l[0],s=l[1],d=(0,a.TH)().search;(0,r.useEffect)((function(){if(d&&2===d.split("bkp=").length){var e=parseInt(d.split("bkp=")[1]);s(e)}}),[]);var p=mt({projectId:c},{skip:!c}),f=p.data,v=p.isFetching,y=dt(),g=(0,u.Z)(y,2),E=g[0],h=g[1].isLoading;return r.createElement(r.Fragment,null,r.createElement("div",{className:"flex"},r.createElement("h3",{className:(0,J.AK)("m-0 my-auto")},"Unit"),r.createElement(W.rU,{to:{search:"direct",pathname:"/projects/".concat(c,"/unit/new")},className:c?"":"disabled-link",style:{textDecoration:"none",marginRight:"auto"}},r.createElement(N.z,{disabled:!c,label:"Add",className:"ml-3"}))),r.createElement(L.i,null),r.createElement("div",{className:"pl-5"},r.createElement("div",{className:"field"},r.createElement("label",{className:(0,J.AK)("col-2")},"Project Name"),r.createElement(B.L,{style:{width:"30%"},optionLabel:"name",optionValue:"key",value:c,filter:!0,filterBy:"name",onChange:function(e){s(e.value)},options:null===n||void 0===n?void 0:n.results}))),r.createElement(L.i,null),r.createElement(o.PS,{baseRoute:"/projects/unit",description:"Unit",isLoading:v||h,data:null===f||void 0===f?void 0:f.results,customBaseRoute:{directUrl:"/projects/FIRST_ARG/unit/",args:["proj_key"],suffix:"?direct"},newTable:!0,allowFilters:!1,deleteAction:function(e){return E(e).unwrap()},emptyRowMessage:r.createElement("h3",{className:"text-center"},c?"No Unit For Selected Project":"Select a Project To View")},r.createElement(o._P,{filteringType:"text",field:"id",header:"Unit",sortable:!0,filter:!0,dataType:"numeric",style:{minWidth:"8rem"}}),r.createElement(o._P,{filteringType:"text",field:"descr",header:"Description",sortable:!0,filter:!0,style:{minWidth:"12rem"}}),r.createElement(o._P,{filteringType:"number",field:"saleablearea",header:"Saleable SQFT",valueGetter:function(e){return(0,m.uf)(e.saleablearea||"0")},style:{maxWidth:"12rem"}})))},mr=r.createElement(a.AW,{path:"unit"},r.createElement(a.AW,{index:!0,element:r.createElement(pr,null)})),fr=n(402),vr=function(){return r.createElement(a.Z5,null,r.createElement(a.AW,{path:"/",element:r.createElement(o.SV,{navItems:c})},r.createElement(a.AW,{index:!0,element:r.createElement(a.Fg,{to:"project",replace:!0})}),ve,Je,Ue,Ke,Ot,Ut,Vn,on,bn,Nn,Jn,dr,mr,(0,fr.Z)(i),r.createElement(a.AW,{path:":project/comming-soon",element:r.createElement(o.hg,null)}),r.createElement(a.AW,{path:"*",element:r.createElement(o.EN,{relative:!0})})))}},8356:function(e,t,n){n.d(t,{i:function(){return i}});var r=n(969),a=n(4756);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}var i=r.forwardRef((function(e,t){var n="horizontal"===e.layout,l="vertical"===e.layout,c=a.gb.findDiffKeys(e,i.defaultProps),s=(0,a.AK)("p-divider p-component p-divider-".concat(e.layout," p-divider-").concat(e.type),{"p-divider-left":n&&(!e.align||"left"===e.align),"p-divider-right":n&&"right"===e.align,"p-divider-center":n&&"center"===e.align||l&&(!e.align||"center"===e.align),"p-divider-top":l&&"top"===e.align,"p-divider-bottom":l&&"bottom"===e.align},e.className);return r.createElement("div",o({className:s,style:e.style,role:"separator"},c),r.createElement("div",{className:"p-divider-content"},e.children))}));i.displayName="Divider",i.defaultProps={__TYPE:"Divider",align:null,layout:"horizontal",type:"solid",style:null,className:null}}}]);
//# sourceMappingURL=473.85eb5387.chunk.js.map