"use strict";(self.webpackChunkbuild_iq_app=self.webpackChunkbuild_iq_app||[]).push([[526],{8526:function(e,t,n){n.r(t),n.d(t,{default:function(){return X}});var r,a,o=n(969),i=n(734),l=n(7039),c=n(4732),u="users",s="User",d=[{items:[{label:"User",icon:"pi ml-3",template:(r=u,(0,l.E7)("/".concat(c.o,"/").concat(r)+(a?"/comming-soon":"")))}]}],m=n(2723),p=n(6234),f=n(3953),v=n(7765),y=n(8224),g=n(8391),h=n(8079),E=n(1495),b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},S="/user/",x=E.rj.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listUser:e.query({query:function(e){var t=e.page,n=e.size;return{url:"".concat(S,"?page=").concat(t||1,"&page_size=").concat(n||E.IV)}},providesTags:function(e){return e?[].concat((0,h.Z)(null===e||void 0===e?void 0:e.map((function(e){var t=e.id;return{type:E.pJ.USER,id:t}}))),[{type:E.pJ.USER,id:"LIST"}]):[{type:E.pJ.USER,id:"LIST"}]}}),addUser:e.mutation({query:function(e){return{url:S,method:"POST",body:e}},invalidatesTags:[{type:E.pJ.USER,id:"LIST"}]}),getUser:e.query({query:function(e){return"".concat(S).concat(e,"/")},providesTags:function(e,t,n){return[{type:E.pJ.USER,id:n}]}}),updateUser:e.mutation({query:function(e){var t=e.id,n=b(e,["id"]);return{url:"".concat(S).concat(t,"/"),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:E.pJ.USER,id:null===e||void 0===e?void 0:e.id}]}}),deleteUser:e.mutation({query:function(e){return{url:"".concat(S).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:E.pJ.USER,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),w=x.useAddUserMutation,P=x.useDeleteUserMutation,N=x.useGetUserQuery,k=x.useListUserQuery,T=x.useUpdateUserMutation,I=(x.useGetErrorProneQuery,function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))}),O=function(e){var t=(0,l.pm)(),n=t.showSuccess,r=t.showError,a=(0,o.useState)(!1),d=(0,p.Z)(a,2),h=d[0],b=d[1],S=(0,i.s0)(),x=(0,i.UO)().id,P=parseInt(x||""),k=isNaN(P)||P<=0,O=(0,E.ft)(),R=N(P,{skip:k}),L=R.data,U=R.isLoading,q=w(),j=(0,p.Z)(q,2),Z=j[0],A=j[1].isLoading,C=T(),W=(0,p.Z)(C,2),_=W[0],J=W[1].isLoading;return o.createElement(o.Fragment,null,o.createElement(l.Rm,{baseRoute:"/".concat(c.o,"/").concat(u),description:s,id:P,data:L,isUpdating:A||J||h,isLoading:U,onSubmit:function(e){return I(void 0,void 0,void 0,(0,m.Z)().mark((function t(){var a,o;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!k){t.next=7;break}return t.next=4,Z(Object.assign(Object.assign({},e),O)).unwrap();case 4:o=t.sent,t.next=10;break;case 7:return t.next=9,_(Object.assign(Object.assign({},e),O)).unwrap();case 9:o=t.sent;case 10:n("Success",o.detail),b(!0),setTimeout((function(){S("/".concat(c.o,"/").concat(u))}),E.P7),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),r("An error occurred",(null===(a=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===a?void 0:a.detail)||"We couldn't save your post, try again!");case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))},renderForm:function(e,t,n,r){return o.createElement("div",{className:"pl-8"},o.createElement(l.Wi,{label:"User Name",name:"user_name",control:e,errors:n,required:!0,leftSpan:2,rightSpan:5,formItem:{component:v.o,componentProps:{maxLength:100}}}),o.createElement(l.Wi,{label:"First Name",name:"first_name",control:e,errors:n,leftSpan:2,rightSpan:4,required:!0,formItem:{component:v.o,componentProps:{maxLength:100}}}),o.createElement(l.Wi,{label:"Last Name",name:"last_name",control:e,errors:n,leftSpan:2,rightSpan:4,formItem:{component:v.o,componentProps:{maxLength:100}}}),o.createElement(l.Wi,{label:"Phone Number",name:"phone_number",required:!0,control:e,errors:n,leftSpan:2,rightSpan:4,formItem:{component:v.o,componentProps:{maxLength:100}}}),o.createElement(l.Wi,{label:"Email",name:"email",required:!0,control:e,errors:n,leftSpan:2,rightSpan:6,formItem:{component:v.o,componentProps:{maxLength:100}}}),o.createElement("div",{className:"field"},o.createElement("label",{style:{margin:"auto",paddingLeft:0},htmlFor:"inactive",className:"col-2"},"Inactive"),o.createElement(f.Qr,{defaultValue:"N",name:"inactive",control:e,render:function(e){var t=e.field;e.fieldState;return o.createElement(g.X,Object.assign({checked:t.value,trueValue:"Y",falseValue:"N",id:t.name},t))}})),o.createElement(l.Wi,{label:"Role",name:"role",control:e,errors:n,required:!0,leftSpan:2,rightSpan:4,useExplicit:!0,formItem:{component:y.L,componentProps:{showClear:!0,optionGroupTemplate:o.createElement("div",{style:{cursor:"pointer",textAlign:"center",backgroundColor:"#e6e1e1",color:"black",lineHeight:2.5},onClick:function(){return S("/users/roles",{state:{url:k?"/users/users/new":"/users/users/".concat(null===L||void 0===L?void 0:L.id,"/edit"),data:r()}})}},"-- Create And Edit --"),optionLabel:"id",optionValue:"key",optionGroupLabel:"label",optionGroupChildren:"items",options:[{label:"Add",items:[]}]}}}))}}))},R=function(e){var t=(0,o.useState)(1),n=(0,p.Z)(t,2),r=n[0],a=(n[1],(0,o.useState)(E.IV)),i=(0,p.Z)(a,2),d=i[0],m=(i[1],k({page:r,size:d})),f=m.data,v=m.isFetching,y=P(),g=(0,p.Z)(y,2),h=g[0],b=g[1].isLoading;return o.createElement(l.PS,{baseRoute:"/".concat(c.o,"/").concat(u),description:s,isLoading:v||b,data:f,deleteAction:function(e){return h(e).unwrap()},newTable:!0,showHeader:!0,navKey:"id",delKey:"email"},o.createElement(l._P,{field:"id",header:"User Code",filteringType:"number"}),o.createElement(l._P,{field:"user_name",header:"User Name",filteringType:"text"}),o.createElement(l._P,{field:"first_name",header:"First Name",filteringType:"text"}),o.createElement(l._P,{field:"phone_number",header:"Phone Number",filteringType:"text"}),o.createElement(l._P,{field:"email",header:"Email",filteringType:"text"}))},L=o.createElement(i.AW,{path:u},o.createElement(i.AW,{path:"new",element:o.createElement(O,null)}),o.createElement(i.AW,{path:":id/edit",element:o.createElement(O,null)}),o.createElement(i.AW,{index:!0,element:o.createElement(R,null)})),U=n(4401),q=n(6272),j=n(8356),Z=n(6770),A=n(8103),C=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},W="/role/",_=E.rj.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{getRoles:e.query({query:function(){return{url:(0,E.DS)(W)}},providesTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[].concat((0,h.Z)(e.map((function(e){var t=e.key;return{type:E.pJ.CITIES,id:t}}))),[{type:E.pJ.CITIES,id:"LIST"}])}}),addRole:e.mutation({query:function(e){return{url:W,method:"POST",body:e}},invalidatesTags:[{type:E.pJ.CITIES,id:"LIST"}]}),getRole:e.query({query:function(e){return"".concat(W).concat(e)},providesTags:function(e,t,n){return[{type:E.pJ.CITIES,id:n}]}}),updateRole:e.mutation({query:function(e){var t=e.key,n=C(e,["key"]);return{url:"".concat(W).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:E.pJ.CITIES,id:null===e||void 0===e?void 0:e.id}]}}),deleteRole:e.mutation({query:function(e){return{url:"".concat(W).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:E.pJ.CITIES,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),J=_.useAddRoleMutation,F=_.useDeleteRoleMutation,z=(_.useGetRoleQuery,_.useGetRolesQuery),D=_.useUpdateRoleMutation,V=(_.useGetErrorProneQuery,n(4576)),G=n(1387),Q=n(4756),M=n(7624),K=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function l(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},H=["Projects","Vendors","Contractors","Purchases","Inventory","Payments","Sales","Inquiry","Users"],B=function(){var e=(0,i.s0)(),t=(0,i.TH)().state,n=(0,E.ft)(),r=(0,f.cI)({}),a=r.control,c=r.formState,u=c.errors,s=(c.isDirty,r.register,r.reset,r.handleSubmit),d=r.setValue,y=z(),g=y.data,h=y.isLoading,b=(0,o.useState)([]),S=(0,p.Z)(b,2),x=S[0],w=S[1],P=(0,o.useState)(!0),N=(0,p.Z)(P,2),k=N[0],T=N[1],I=(0,o.useState)(null),O=(0,p.Z)(I,2),R=O[0],L=O[1],C=(0,o.useRef)(null),W=(0,o.useState)(!1),_=(0,p.Z)(W,2),B=(_[0],_[1]),Y=J(),X=(0,p.Z)(Y,2),$=X[0],ee=X[1].isLoading,te=D(),ne=(0,p.Z)(te,2),re=ne[0],ae=ne[1].isLoading,oe=F(),ie=(0,p.Z)(oe,2),le=ie[0],ce=(ie[1].isLoading,function(e){return le(e).unwrap()}),ue=function(e,t){var n;null===(n=null===C||void 0===C?void 0:C.current)||void 0===n||n.show({severity:"success",summary:e,detail:t,life:3e3})},se=function(e,t){var n;null===(n=null===C||void 0===C?void 0:C.current)||void 0===n||n.show({severity:"error",summary:e,detail:t,life:3e3})};return h?o.createElement("div",{className:"custom-skeleton p-4"},o.createElement("div",null,o.createElement(q.O,{height:"50px",width:"30%",className:"mb-2"}),o.createElement(q.O,{height:"50px",width:"50%",className:"mb-2"}))):o.createElement(o.Fragment,null,o.createElement(G.F,{ref:C}),o.createElement(l.Gn,{className:"pl-8",style:{height:"50%",width:"70%"},header:o.createElement("div",{className:"flex"},o.createElement("h3",{className:(0,Q.AK)("m-0 my-auto")},"Role")),rowHover:!0,onRowClick:function(e){T(!1),L(e.data.key),d("name",e.data.name)},value:g,stripedRows:!0},o.createElement(U.s,{headerStyle:M.jc,style:{maxWidth:"100px"},bodyStyle:{textAlign:"center",overflow:"visible"},body:function(e){return function(t){return o.createElement(o.Fragment,null,o.createElement(Z.z,{onClick:function(){console.log(t),T(!1),L(t.key),d("name",t.name)},icon:"pi pi-eye",className:"p-button-rounded p-button-text"}),o.createElement(Z.z,{style:{height:"20px",width:"20px",borderRadius:50},onClick:function(){return e(t.key)},className:"p-button-rounded p-button-text",icon:"pi pi-trash"}))}}((function(e){return K(void 0,void 0,void 0,(0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ce){t.next=2;break}return t.abrupt("return");case 2:(0,V.V)({message:"Are you sure you want to delete?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){return K(void 0,void 0,void 0,(0,m.Z)().mark((function t(){var n,r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ce(e);case 3:r=t.sent,ue("Success",r),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),se("Failed",null===(n=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===n?void 0:n.detail);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))},reject:function(){}});case 3:case"end":return t.stop()}}),t)})))}))}),o.createElement(U.s,{headerStyle:M.iR,field:"name",header:"Role Name",sortable:!0,filter:!0}),o.createElement(U.s,{headerStyle:M.iR,field:"access_pages",header:"Access",sortable:!0,filter:!0})),o.createElement(j.i,null),o.createElement("form",{onSubmit:s((function(e){return K(void 0,void 0,void 0,(0,m.Z)().mark((function t(){var r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!k){t.next=7;break}return t.next=4,$(Object.assign(Object.assign({},e),n)).unwrap();case 4:r=t.sent,t.next=11;break;case 7:return console.log(R),t.next=10,re(Object.assign(Object.assign({key:R},e),n)).unwrap();case 10:r=t.sent;case 11:T(!0),d("name",""),ue("Success",r.detail),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),se("An error occurred","We couldn't save your request, try again!");case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))}))},o.createElement("div",{className:"flex"},o.createElement("div",{className:"col-1"}),o.createElement("div",{className:"col-7"},function(e,t,n){return o.createElement("div",{className:"pl-8"},o.createElement(l.Wi,{label:"Role Name",name:"name",control:e,errors:n,required:!0,leftSpan:4,rightSpan:5,formItem:{component:v.o,componentProps:{maxLength:50,disabled:ee||ae}}}),o.createElement(l.Wi,{label:"Access",name:"access",control:e,errors:n,leftSpan:4,rightSpan:5,formItem:{component:A.N,componentProps:{value:x,onChange:function(e){return w(e.value)},options:H,display:"chip",placeholder:"Select Pages",className:"w-full md:w-20rem"}}}))}(a,0,u)),o.createElement("div",{className:"my-auto"},o.createElement(Z.z,{loading:ee||ae,label:"Save",id:"submit",type:"submit",style:{paddingRight:20},className:"p-button-warning mr-3"}),o.createElement(Z.z,{loading:ee||ae,label:"Save & Exit",style:{paddingRight:20},className:"p-button-warning mr-3",onClick:function(e){return K(void 0,void 0,void 0,(0,m.Z)().mark((function t(){var n;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,B(!0);case 3:null===(n=document.getElementById("submit"))||void 0===n||n.click();case 4:case"end":return t.stop()}}),t)})))}}),o.createElement(Z.z,{loading:ee||ae,label:"Back",onClick:function(){return e((null===t||void 0===t?void 0:t.url)||"/users/users",{state:t.data})}})))))},Y=o.createElement(i.AW,{path:"roles"},o.createElement(i.AW,{index:!0,element:o.createElement(B,null)})),X=function(){return o.createElement(i.Z5,null,o.createElement(i.AW,{path:"/",element:o.createElement(l.SV,{navItems:d})},o.createElement(i.AW,{index:!0,element:o.createElement(i.Fg,{to:u,replace:!0})}),L,Y,o.createElement(i.AW,{path:":page/comming-soon",element:o.createElement(l.hg,null)}),o.createElement(i.AW,{path:"*",element:o.createElement(l.EN,{relative:!0})})))}},8356:function(e,t,n){n.d(t,{i:function(){return i}});var r=n(969),a=n(4756);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}var i=r.forwardRef((function(e,t){var n="horizontal"===e.layout,l="vertical"===e.layout,c=a.gb.findDiffKeys(e,i.defaultProps),u=(0,a.AK)("p-divider p-component p-divider-".concat(e.layout," p-divider-").concat(e.type),{"p-divider-left":n&&(!e.align||"left"===e.align),"p-divider-right":n&&"right"===e.align,"p-divider-center":n&&"center"===e.align||l&&(!e.align||"center"===e.align),"p-divider-top":l&&"top"===e.align,"p-divider-bottom":l&&"bottom"===e.align},e.className);return r.createElement("div",o({className:u,style:e.style,role:"separator"},c),r.createElement("div",{className:"p-divider-content"},e.children))}));i.displayName="Divider",i.defaultProps={__TYPE:"Divider",align:null,layout:"horizontal",type:"solid",style:null,className:null}}}]);
//# sourceMappingURL=526.0009353d.chunk.js.map