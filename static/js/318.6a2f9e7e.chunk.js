"use strict";(self.webpackChunkbuild_iq_app=self.webpackChunkbuild_iq_app||[]).push([[318],{8318:function(e,t,n){n.r(t),n.d(t,{default:function(){return tt}});var r,o,a=n(969),i=n(734),l=n(2035),c=n(4732),u="users",s="User",d=function(e,t){return(0,l.E7)("/".concat(c.o,"/").concat(e)+(t?"/comming-soon":""))},p=[{items:[{label:"Users",icon:"pi ml-3",template:(r=u,(0,l.E7)("/".concat(c.o,"/").concat(r)+(o?"/comming-soon":"")))},{label:"Client",icon:"pi ml-3",template:d("client")},{label:"Company",icon:"pi ml-3",template:d("companies")},{label:"Staff",icon:"pi ml-3",template:d("staff")},{label:"Bank Account",icon:"pi ml-3",template:d("bank")}]}],m=n(2723),f=n(6234),v=n(3953),g=n(7765),y=n(8224),h=n(8391),E=n(9459),b=n(8079),S=n(1495),x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},w="/user/",P=S.rj.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listUser:e.query({query:function(e){var t=e.page,n=e.size;return{url:"".concat(w,"?page=").concat(t||1,"&page_size=").concat(n||S.IV)}},providesTags:function(e){var t;return e?[].concat((0,b.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:S.pJ.USERS,id:t}}))),[{type:S.pJ.USERS,id:"LIST"}]):[{type:S.pJ.USERS,id:"LIST"}]}}),addUser:e.mutation({query:function(e){return{url:w,method:"POST",body:e}},invalidatesTags:[{type:S.pJ.USERS,id:"LIST"}]}),getUser:e.query({query:function(e){return"".concat(w).concat(e)},providesTags:function(e,t,n){return[{type:S.pJ.USERS,id:n}]}}),updateUser:e.mutation({query:function(e){var t=e.id,n=x(e,["id"]);return{url:"".concat(w).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:S.pJ.USERS,id:null===e||void 0===e?void 0:e.id}]}}),deleteUser:e.mutation({query:function(e){return{url:"".concat(w).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:S.pJ.USERS,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),T=P.useAddUserMutation,O=P.useDeleteUserMutation,C=P.useGetUserQuery,L=P.useListUserQuery,N=P.useUpdateUserMutation,I=(P.useGetErrorProneQuery,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}),A="/role/",k=S.rj.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{getRoles:e.query({query:function(){return{url:(0,S.DS)(A)}},providesTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[].concat((0,b.Z)(e.map((function(e){var t=e.key;return{type:S.pJ.CITIES,id:t}}))),[{type:S.pJ.CITIES,id:"LIST"}])}}),addRole:e.mutation({query:function(e){return{url:A,method:"POST",body:e}},invalidatesTags:[{type:S.pJ.CITIES,id:"LIST"}]}),getRole:e.query({query:function(e){return"".concat(A).concat(e)},providesTags:function(e,t,n){return[{type:S.pJ.CITIES,id:n}]}}),updateRole:e.mutation({query:function(e){var t=e.key,n=I(e,["key"]);return{url:"".concat(A).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:S.pJ.CITIES,id:null===e||void 0===e?void 0:e.id}]}}),deleteRole:e.mutation({query:function(e){return{url:"".concat(A).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:S.pJ.CITIES,id:null===e||void 0===e?void 0:e.id}]}}),getPermissions:e.query({query:function(){return{url:(0,S.DS)("/permission/")}},providesTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[].concat((0,b.Z)(e.map((function(e){var t=e.key;return{type:S.pJ.CITIES,id:t}}))),[{type:S.pJ.CITIES,id:"LIST"}])}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),j=k.useAddRoleMutation,q=k.useDeleteRoleMutation,Z=(k.useGetRoleQuery,k.useGetRolesQuery),_=k.useUpdateRoleMutation,R=(k.useGetErrorProneQuery,k.useGetPermissionsQuery),W=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function l(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},F=function(e){var t=(0,S.aC)(),n=(0,l.pm)(),r=n.showSuccess,o=n.showError,d=(0,a.useState)(!1),p=(0,f.Z)(d,2),b=p[0],x=p[1],w=(0,i.s0)(),P=(0,i.UO)().id,O=parseInt(P||""),L=isNaN(O)||O<=0,I=(0,S.ft)(),A=Z(),k=A.data,j=(A.isLoading,C(O,{skip:L})),q=j.data,_=j.isLoading,R=(0,a.useState)(null),F=(0,f.Z)(R,2),U=F[0],J=F[1],M=(0,S.sq)(),z=M.data,V=M.isFetching,B=T(),D=(0,f.Z)(B,2),G=D[0],Q=D[1].isLoading,H=N(),K=(0,f.Z)(H,2),Y=K[0],X=K[1].isLoading;(0,a.useEffect)((function(){var e,t,n;q&&J(Object.assign(Object.assign({},q),{role:(null===(e=null===q||void 0===q?void 0:q.role[0])||void 0===e?void 0:e.id)||"",company:(null===(t=null===q||void 0===q?void 0:q.company)||void 0===t?void 0:t.company_id)||"",client_id:(null===(n=null===q||void 0===q?void 0:q.company)||void 0===n?void 0:n.client_id)||""}))}),[q]);var $=function(){var e,n,r,o,a;return"superadmin"===(null===(n=null===(e=null===q||void 0===q?void 0:q.role[0])||void 0===e?void 0:e.name)||void 0===n?void 0:n.toLowerCase())?(null===(a=null===(o=null===(r=t.user)||void 0===r?void 0:r.role[0])||void 0===o?void 0:o.name)||void 0===a?void 0:a.toLowerCase().includes("superadmin"))?"auto":"none":"auto"};return a.createElement(a.Fragment,null,a.createElement(l.Rm,{baseRoute:"/".concat(c.o,"/").concat(u),description:s,id:O,data:U,isUpdating:Q||X||b,isLoading:_,onSubmit:function(e){return W(void 0,void 0,void 0,(0,m.Z)().mark((function t(){var n,a;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!L){t.next=7;break}return t.next=4,G(Object.assign(Object.assign({},I),e)).unwrap();case 4:a=t.sent,t.next=10;break;case 7:return t.next=9,Y(Object.assign(Object.assign({},I),e)).unwrap();case 9:a=t.sent;case 10:r("Success",a.detail),x(!0),setTimeout((function(){w("/".concat(c.o,"/").concat(u))}),S.P7),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),o("An error occurred",(null===(n=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===n?void 0:n.detail)||"We couldn't save your post, try again!");case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))},renderForm:function(e,n,r,o){var i,c,u;return a.createElement("div",{style:{pointerEvents:$()},className:"pl-8"},a.createElement(l.Wi,{label:"User Name",name:"user_name",control:e,errors:r,required:!0,leftSpan:2,rightSpan:5,formItem:{component:g.o,componentProps:{maxLength:100}}}),a.createElement(l.Wi,{label:"First Name",name:"first_name",control:e,errors:r,leftSpan:2,rightSpan:4,required:!0,formItem:{component:g.o,componentProps:{maxLength:100}}}),a.createElement(l.Wi,{label:"Last Name",name:"last_name",control:e,errors:r,leftSpan:2,rightSpan:4,formItem:{component:g.o,componentProps:{maxLength:100}}}),a.createElement(l.Wi,{label:"Phone Number",name:"phone_number",required:!0,control:e,errors:r,leftSpan:2,rightSpan:4,formItem:{component:g.o,componentProps:{maxLength:100}}}),a.createElement(l.Wi,{label:"Email",name:"email",required:!0,control:e,errors:r,leftSpan:2,rightSpan:6,formItem:{component:g.o,componentProps:{maxLength:100}}}),a.createElement("div",{className:"field"},a.createElement("label",{style:{margin:"auto",paddingLeft:0},htmlFor:"is_active",className:"col-2"},"Is Active?"),a.createElement(v.Qr,{defaultValue:!1,name:"is_active",control:e,render:function(e){var t=e.field;e.fieldState;return a.createElement(h.X,Object.assign({checked:t.value,trueValue:!0,falseValue:!1,id:t.name},t))}})),a.createElement(l.Wi,{label:"Role",name:"role",control:e,errors:r,required:!0,leftSpan:2,rightSpan:4,useExplicit:!0,formItem:{component:y.L,componentProps:{optionGroupTemplate:a.createElement("div",{style:{cursor:"pointer",textAlign:"center",backgroundColor:"#e6e1e1",color:"black",lineHeight:2.5},onClick:function(){return w("/users/roles",{state:{url:L?"/users/users/new":"/users/users/".concat(null===U||void 0===U?void 0:U.id,"/edit"),data:o()}})}},"-- Create And Edit --"),optionLabel:"role",optionValue:"id",optionGroupLabel:"label",optionGroupChildren:"items",options:[{label:"Add",items:(null===k||void 0===k?void 0:k.filter((function(e){var n,r,o,a;return!(null===(n=null===e||void 0===e?void 0:e.role)||void 0===n?void 0:n.toLowerCase().includes("superadmin"))||(null===(a=null===(o=null===(r=t.user)||void 0===r?void 0:r.role[0])||void 0===o?void 0:o.name)||void 0===a?void 0:a.toLowerCase().includes("superadmin"))})))||[]}]}}}),a.createElement(E.u,{mouseTrack:!0,mouseTrackLeft:10,target:"#user-company",position:"top",content:"Can't Be Modified Once Added",className:"my-tooltip"}),(null===(u=null===(c=null===(i=t.user)||void 0===i?void 0:i.role[0])||void 0===c?void 0:c.name)||void 0===u?void 0:u.toLowerCase().includes("superadmin"))&&a.createElement(l.Wi,{label:"Company",name:"company",required:!0,control:e,errors:r,isLoading:V,leftSpan:2,rightSpan:4,formItem:{component:y.L,componentProps:{showClear:!0,optionLabel:"id",optionValue:"id",filter:!0,disabled:!L,id:"user-company",filterBy:"id",options:z}}}))}}))},U=function(e){var t=(0,a.useState)(1),n=(0,f.Z)(t,2),r=n[0],o=n[1],i=(0,a.useState)(S.IV),d=(0,f.Z)(i,2),p=d[0],m=d[1],v=L({page:r,size:p},{refetchOnMountOrArgChange:!0}),g=v.data,y=v.isFetching,h=O(),E=(0,f.Z)(h,2),b=E[0],x=E[1].isLoading;return a.createElement(l.PS,{pagination:{pageSize:p,loading:y,currentPage:r,total:null===g||void 0===g?void 0:g.count,onChange:function(e,t){o(e),m(t)}},baseRoute:"/".concat(c.o,"/").concat(u),description:s,isLoading:y||x,data:null===g||void 0===g?void 0:g.results,deleteAction:function(e){return b(e).unwrap()},newTable:!0,showHeader:!0,navKey:"id",delKey:"id"},a.createElement(l._P,{field:"id",header:"User Code",filteringType:"number"}),a.createElement(l._P,{field:"user_name",header:"User Name",filteringType:"text"}),a.createElement(l._P,{field:"first_name",header:"First Name",filteringType:"text"}),a.createElement(l._P,{field:"phone_number",header:"Phone Number",filteringType:"text"}),a.createElement(l._P,{field:"email",header:"Email",filteringType:"text"}))},J=a.createElement(i.AW,{path:u},a.createElement(i.AW,{path:"new",element:a.createElement(F,null)}),a.createElement(i.AW,{path:":id/edit",element:a.createElement(F,null)}),a.createElement(i.AW,{index:!0,element:a.createElement(U,null)})),M=n(4401),z=n(6272),V=n(8356),B=n(6770),D=n(8103),G=n(4576),Q=n(1387),H=n(4756),K=n(7624),Y=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function l(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},X=function(){var e=(0,S.aC)(),t=(0,i.s0)(),n=(0,i.TH)().state,r=(0,S.ft)(),o=(0,v.cI)({}),c=o.control,u=o.formState,s=u.errors,d=(u.isDirty,o.register,o.reset,o.handleSubmit),p=o.setValue,y=Z(),h=y.data,E=y.isLoading,b=y.refetch,x=R(),w=x.data,P=(x.isLoading,(0,a.useState)([])),T=(0,f.Z)(P,2),O=T[0],C=T[1],L=(0,a.useState)(!0),N=(0,f.Z)(L,2),I=N[0],A=N[1],k=(0,a.useState)(null),W=(0,f.Z)(k,2),F=W[0],U=W[1],J=(0,a.useRef)(null),X=(0,a.useState)(!1),$=(0,f.Z)(X,2),ee=($[0],$[1],j()),te=(0,f.Z)(ee,2),ne=te[0],re=te[1].isLoading,oe=_(),ae=(0,f.Z)(oe,2),ie=ae[0],le=ae[1].isLoading,ce=q(),ue=(0,f.Z)(ce,2),se=ue[0],de=(ue[1].isLoading,function(e){return se(e).unwrap()}),pe=function(e,t){var n;null===(n=null===J||void 0===J?void 0:J.current)||void 0===n||n.show({severity:"success",summary:e,detail:t,life:3e3})},me=function(e,t){var n;null===(n=null===J||void 0===J?void 0:J.current)||void 0===n||n.show({severity:"error",summary:e,detail:t,life:3e3})};return E?a.createElement("div",{className:"custom-skeleton p-4"},a.createElement("div",null,a.createElement(z.O,{height:"50px",width:"30%",className:"mb-2"}),a.createElement(z.O,{height:"50px",width:"50%",className:"mb-2"}))):a.createElement(a.Fragment,null,a.createElement(Q.F,{ref:J}),a.createElement(l.Gn,{className:"pl-8",style:{height:"50%",width:"90%"},header:a.createElement("div",{className:"flex"},a.createElement("h3",{className:(0,H.AK)("m-0 my-auto")},"Role")),rowHover:!0,onRowClick:function(e){A(!1),U(e.data),p("role",e.data.role),p("role_description",e.data.role_description),console.log(null===w||void 0===w?void 0:w.filter((function(t){var n,r;return(null===(r=null===(n=e.data)||void 0===n?void 0:n.access)||void 0===r?void 0:r.filter((function(e){return e.id===t.id})).length)>0}))),C(null===w||void 0===w?void 0:w.filter((function(t){var n,r;return(null===(r=null===(n=e.data)||void 0===n?void 0:n.access)||void 0===r?void 0:r.filter((function(e){return e.id===t.id})).length)>0})))},value:h,stripedRows:!0},a.createElement(M.s,{headerStyle:K.jc,style:{maxWidth:"80px"},bodyStyle:{textAlign:"center",overflow:"visible"},body:function(e){return function(t){return a.createElement(a.Fragment,null,a.createElement(B.z,{style:{height:"20px",width:"20px",borderRadius:50},onClick:function(){return e(t.id)},className:"p-button-rounded p-button-text",icon:"pi pi-trash"}))}}((function(e){return Y(void 0,void 0,void 0,(0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(de){t.next=2;break}return t.abrupt("return");case 2:(0,G.V)({message:"Are you sure you want to delete?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){return Y(void 0,void 0,void 0,(0,m.Z)().mark((function t(){var n,r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,de(e);case 3:r=t.sent,pe("Success",r),A(!0),U(null),p("role",""),p("role_description",""),C([]),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),me("Failed",null===(n=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===n?void 0:n.detail);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))},reject:function(){}});case 3:case"end":return t.stop()}}),t)})))}))}),a.createElement(M.s,{headerStyle:K.iR,style:{maxWidth:"200px"},bodyStyle:{cursor:"pointer"},field:"role",header:"Role Name",sortable:!0,filter:!0}),a.createElement(M.s,{headerStyle:K.iR,field:"access_pages",bodyStyle:{cursor:"pointer"},header:"Accessible Pages",body:function(e){return null===e||void 0===e?void 0:e.access.map((function(e){return e.name})).join(",")}})),a.createElement(V.i,null),a.createElement("form",{onSubmit:d((function(e){return Y(void 0,void 0,void 0,(0,m.Z)().mark((function t(){var n,o;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=Object.assign(Object.assign({},e),{access:null===O||void 0===O?void 0:O.map((function(e){return e.id})),is_role_active:!0}),!I){t.next=8;break}return t.next=5,ne(Object.assign(Object.assign({},o),r)).unwrap();case 5:n=t.sent,t.next=11;break;case 8:return t.next=10,ie(Object.assign(Object.assign({key:null===F||void 0===F?void 0:F.id},o),r)).unwrap();case 10:n=t.sent;case 11:A(!0),U(null),p("role",""),p("role_description",""),C([]),pe("Success",n.detail),b(),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(0),me("An error occurred","We couldn't save your request, try again!");case 23:case"end":return t.stop()}}),t,null,[[0,20]])})))}))},a.createElement("div",{className:"flex"},a.createElement("div",{className:"col-1"}),a.createElement("div",{className:"col-7"},function(t,n,r){var o,i,c,u,s;return a.createElement("div",{className:"pl-8"},a.createElement(l.Wi,{label:"Role Name",name:"role",control:t,errors:r,required:!0,leftSpan:4,rightSpan:5,formItem:{component:g.o,componentProps:{maxLength:50,disabled:re||le||"superadmin"===(null===(o=null===F||void 0===F?void 0:F.role)||void 0===o?void 0:o.toLowerCase())}}}),a.createElement(l.Wi,{label:"Description",name:"role_description",control:t,errors:r,required:!0,leftSpan:4,rightSpan:5,formItem:{component:g.o,componentProps:{maxLength:50,disabled:re||le}}}),a.createElement(l.Wi,{label:"Accessible Pages",name:"access",control:t,errors:r,leftSpan:4,rightSpan:5,formItem:{component:D.N,componentProps:{value:O,optionLabel:"permission",onChange:function(e){return C(e.value)},options:w,display:"chip",disabled:re||le||!(null===(u=null===(c=null===(i=e.user)||void 0===i?void 0:i.role[0])||void 0===c?void 0:c.name)||void 0===u?void 0:u.toLowerCase().includes("superadmin"))&&"superadmin"===(null===(s=null===F||void 0===F?void 0:F.role)||void 0===s?void 0:s.toLowerCase()),placeholder:"Select Pages",className:"w-full md:w-20rem"}}}))}(c,0,s)),a.createElement("div",{className:"my-auto"},a.createElement(B.z,{loading:re||le,label:"Save",id:"submit",type:"submit",style:{paddingRight:20},className:"p-button-warning mr-3"}),a.createElement(B.z,{loading:re||le,label:"Clear",style:{paddingRight:20},className:"p-button-warning mr-3",onClick:function(e){return Y(void 0,void 0,void 0,(0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),A(!0),U(null),p("role",""),p("role_description",""),C([]);case 6:case"end":return t.stop()}}),t)})))}}),a.createElement(B.z,{loading:re||le,label:"Back",onClick:function(){return t((null===n||void 0===n?void 0:n.url)||"/users/users",{state:n.data})}})))))},$=a.createElement(i.AW,{path:"roles"},a.createElement(i.AW,{index:!0,element:a.createElement(X,null)})),ee=n(1002),te=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ne="/client/company/",re=S.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listCompany:e.query({query:function(e){var t=e.page,n=e.size;return{url:"".concat(ne,"?page=").concat(t||1,"&page_size=").concat(n||S.IV)}},providesTags:function(e){return e?[].concat((0,b.Z)(null===e||void 0===e?void 0:e.map((function(e){var t=e.id;return{type:S.pJ.COMPANIES,id:t}}))),[{type:S.pJ.COMPANIES,id:"LIST"}]):[{type:S.pJ.COMPANIES,id:"LIST"}]}}),addCompany:e.mutation({query:function(e){return{url:ne,method:"POST",body:e}},invalidatesTags:[{type:S.pJ.COMPANIES,id:"LIST"}]}),getCompany:e.query({query:function(e){return"".concat(ne).concat(e)},providesTags:function(e,t,n){return[{type:S.pJ.COMPANIES,id:n}]}}),updateCompany:e.mutation({query:function(e){var t=e.id,n=te(e,["id"]);return{url:"".concat(ne).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:S.pJ.COMPANIES,id:null===e||void 0===e?void 0:e.id}]}}),deleteCompany:e.mutation({query:function(e){return{url:"".concat(ne).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:S.pJ.COMPANIES,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),oe=re.useAddCompanyMutation,ae=re.useDeleteCompanyMutation,ie=re.useGetCompanyQuery,le=re.useListCompanyQuery,ce=re.useUpdateCompanyMutation,ue=(re.useGetErrorProneQuery,"companies"),se="Company",de=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},pe="/client/client/",me=S.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listClient:e.query({query:function(e){var t=e.page,n=e.size;return{url:(0,S.DS)(pe,"?page=".concat(t||1,"&page_size=").concat(n||S.IV))}},providesTags:function(e){return e?[].concat((0,b.Z)(null===e||void 0===e?void 0:e.map((function(e){var t=e.id;return{type:S.pJ.CLIENTS,id:t}}))),[{type:S.pJ.CLIENTS,id:"LIST"}]):[{type:S.pJ.CLIENTS,id:"LIST"}]}}),addClient:e.mutation({query:function(e){return{url:pe,method:"POST",body:e}},invalidatesTags:[{type:S.pJ.CLIENTS,id:"LIST"}]}),getClient:e.query({query:function(e){return"".concat(pe).concat(e)},providesTags:function(e,t,n){return[{type:S.pJ.CLIENTS,id:n}]}}),updateClient:e.mutation({query:function(e){var t=e.id,n=de(e,["id"]);return{url:"".concat(pe).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:S.pJ.CLIENTS,id:null===e||void 0===e?void 0:e.id}]}}),deleteClient:e.mutation({query:function(e){return console.log(e),{url:"".concat(pe).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:S.pJ.CLIENTS,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),fe=me.useAddClientMutation,ve=me.useDeleteClientMutation,ge=(me.useGetClientQuery,me.useListClientQuery),ye=me.useUpdateClientMutation,he=(me.useGetErrorProneQuery,me.endpoints.getClient,(0,a.forwardRef)((function(e,t){var n=e.data,r=e.isLoading,o=e.disableTable,i=void 0!==o&&o,c=e.onChange,u=void 0===c?function(){}:c,s=(0,a.useState)([]),d=(0,f.Z)(s,2),p=d[0],m=d[1],v=(0,a.useRef)(p);(0,a.useImperativeHandle)(t,(function(){return{getItems:function(){return p}}})),(0,a.useEffect)((function(){m(n),v.current=n}),[n]);return a.createElement(l.PS,{baseRoute:"/purchase/".concat(ue),description:se,isLoading:r,data:p,newTable:!0,tableLayoutClass:"h-full",allowFilters:!1,hideActionColumn:i,actionBodyTemplate:function(e){return a.createElement(B.z,{style:{height:"35px",width:"20px",marginLeft:20},type:"button",onClick:function(){(0,G.V)({message:"Are you sure you want to Delete Item?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){return function(e){var t=v.current.filter((function(t){return t!==e}));v.current=t,m(t)}(e)},reject:function(){}})},className:"p-button-rounded p-button-text",icon:"pi pi-trash"})},gridProps:{allowAdd:!0,newRowDefaults:{sno:p.length+1},OnRowsChanged:function(e){m(e),v.current=e,u(!0)}}},a.createElement(l._P,{width:"10%",field:"sno",header:"S.No",type:"number"}),a.createElement(l._P,{field:"acc_name",header:"Account Name",type:"text",editorType:!i&&"text"}),a.createElement(l._P,{field:"Bank Name",header:"Bank Name",type:"text",editorType:!i&&"text"}),a.createElement(l._P,{field:"acc_no",header:"Account No",type:"number",editorType:!i&&"number"}))}))),Ee=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function l(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},be=function(e){var t=(0,l.pm)(),n=t.showSuccess,r=t.showError,o=(0,a.useState)(!1),u=(0,f.Z)(o,2),s=u[0],d=u[1],p=(0,i.s0)(),v=(0,i.UO)().id||"",h=!v,b=(0,a.useRef)([]),x=(0,a.useRef)(),w=(0,S.ft)(),P=ie(v,{skip:h}),T=P.data,O=P.isLoading,C=ge({}),L=C.data,N=C.isLoading,I=oe(),A=(0,f.Z)(I,2),k=A[0],j=A[1].isLoading,q=ce(),Z=(0,f.Z)(q,2),_=Z[0],R=Z[1].isLoading,W=(0,a.useState)([]),F=(0,f.Z)(W,2),U=(F[0],F[1]);(0,a.useEffect)((function(){T&&(null===T||void 0===T?void 0:T.project_status)&&U(T.project_status)}),[T]);return a.createElement(a.Fragment,null,a.createElement(l.Rm,{baseRoute:"/".concat(c.o,"/").concat(ue),description:se,id:v,data:T,isUpdating:j||R||s,isLoading:O,onSubmit:function(e){return Ee(void 0,void 0,void 0,(0,m.Z)().mark((function t(){var o,a,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,console.log(b.current),i=Object.assign(Object.assign({},e),{project_status:b.current}),!h){t.next=9;break}return t.next=6,k(Object.assign(Object.assign({},i),w)).unwrap();case 6:a=t.sent,t.next=12;break;case 9:return t.next=11,_(Object.assign(Object.assign({},i),w)).unwrap();case 11:a=t.sent;case 12:n("Success",a.detail),d(!0),setTimeout((function(){p("/".concat(c.o,"/").concat(ue))}),S.P7),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),r("An error occurred",(null===(o=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===o?void 0:o.detail)||"We couldn't save your post, try again!");case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))},renderForm:function(e,t,n){return a.createElement("div",{className:"pl-8 pt-4 pb-3 grid p-fluid"},a.createElement(l.Wi,{label:"Company Name",name:"name",className:"col-12",control:e,errors:n,required:"Enter Company Name",leftSpan:2,rightSpan:3,formItem:{component:g.o,componentProps:{maxLength:100}}}),a.createElement(E.u,{mouseTrack:!0,mouseTrackLeft:10,target:"#company-client",position:"top",content:"Can't Be Modified Once Added",className:"my-tooltip"}),a.createElement(l.Wi,{label:"Client",name:"client",className:"col-12",control:e,errors:n,isLoading:N,required:!0,leftSpan:2,rightSpan:3,useExplicit:!0,formItem:{component:y.L,componentProps:{showClear:!0,optionLabel:"name",optionValue:"id",filter:!0,id:"company-client",disabled:!h,filterBy:"name",options:L}}}),a.createElement(l.Wi,{label:"Address",name:"addr",control:e,errors:n,className:"col-12",leftSpan:2,rightSpan:3,formItem:{component:ee.g,componentProps:{maxLength:100}}}),a.createElement(l.Wi,{label:"GST No",name:"gstno",className:"col-12",control:e,errors:n,required:!0,leftSpan:2,rightSpan:3,formItem:{component:g.o,componentProps:{maxLength:100}}}),a.createElement(l.Wi,{label:"PAN No",name:"panno",className:"col-12",control:e,errors:n,required:!0,leftSpan:2,rightSpan:3,formItem:{component:g.o,componentProps:{maxLength:100}}}),a.createElement("div",{className:"col-12 ",style:{height:"calc(100% - 183px)",minHeight:200}},a.createElement(he,{data:(null===T||void 0===T?void 0:T.bank_accounts)||[],isLoading:O,ref:x})))}}))},Se=function(e){var t=(0,a.useState)(1),n=(0,f.Z)(t,2),r=n[0],o=n[1],i=(0,a.useState)(S.IV),u=(0,f.Z)(i,2),s=u[0],d=u[1],p=le({page:r,size:s},{refetchOnMountOrArgChange:!0}),m=p.data,v=p.isFetching,g=ae(),y=(0,f.Z)(g,2),h=y[0],E=y[1].isLoading;return a.createElement(l.PS,{pagination:{pageSize:s,loading:v,currentPage:r,total:null===m||void 0===m?void 0:m.length,onChange:function(e,t){o(e),d(t)}},baseRoute:"/".concat(c.o,"/").concat(ue),description:se,isLoading:v||E,data:m,deleteAction:function(e){return h(e).unwrap()},newTable:!0,showHeader:!0,navKey:"id",delKey:"id"},a.createElement(l._P,{field:"id",header:"Company Code",filteringType:"number"}),a.createElement(l._P,{field:"name",header:"Company Name",filteringType:"text"}),a.createElement(l._P,{field:"client",header:"Client",filteringType:"text",displayValueGetter:function(e){return null===e||void 0===e?void 0:e.name}}),a.createElement(l._P,{field:"project_status",header:"Project Statuses",displayValueGetter:function(e){var t;return null===(t=null===e||void 0===e?void 0:e.project_status)||void 0===t?void 0:t.map((function(e){return e.descr})).join(",")},filteringType:"text"}))},xe=a.createElement(i.AW,{path:ue},a.createElement(i.AW,{path:"new",element:a.createElement(be,null)}),a.createElement(i.AW,{path:":id/edit",element:a.createElement(be,null)}),a.createElement(i.AW,{index:!0,element:a.createElement(Se,null)})),we=n(9002),Pe=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function l(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},Te=function(e){var t=(0,l.pm)(),n=t.showSuccess,r=t.showError,o=(0,a.useState)(1),i=(0,f.Z)(o,2),c=i[0],u=i[1],s=(0,a.useState)(S.IV),d=(0,f.Z)(s,2),p=d[0],v=d[1],y=(0,a.useState)(!1),h=(0,f.Z)(y,2),E=h[0],b=h[1],x=(0,a.useState)(!1),w=(0,f.Z)(x,2),P=w[0],T=w[1],O=(0,a.useState)({}),C=(0,f.Z)(O,2),L=C[0],N=C[1],I=(0,a.useState)(!0),A=(0,f.Z)(I,2),k=A[0],j=A[1],q=(0,S.ft)(),Z=ge({page:c,size:p}),_=Z.data,R=Z.isFetching,W=fe(),F=(0,f.Z)(W,2),U=F[0],J=F[1].isLoading,M=ye(),z=(0,f.Z)(M,2),V=z[0],D=z[1].isLoading,G=ve(),Q=(0,f.Z)(G,2),H=Q[0],K=Q[1].isLoading,Y=a.createElement(B.z,{className:"ml-3",label:"Add",onClick:function(){j(!0),N({}),b(!0)}});return a.createElement(a.Fragment,null,a.createElement(l.PS,{pagination:{pageSize:p,loading:R,currentPage:c,total:null===_||void 0===_?void 0:_.length,onChange:function(e,t){u(e),v(t)}},hideAddButton:!0,customEditOnClick:function(e){j(!1),N(e),b(!0)},customAddBtn:Y,baseRoute:"/clients/client",description:"Clients",isLoading:R||K,data:_,newTable:!0,showHeader:!0,delKey:"id",deleteAction:function(e){return console.log(e),H(e).unwrap()}},a.createElement(l._P,{filteringType:"text",field:"id",header:"Client Code",sortable:!0,filter:!0,dataType:"numeric",style:{minWidth:"8rem"}}),a.createElement(l._P,{filteringType:"text",field:"name",header:"Client Name",sortable:!0,filter:!0,style:{minWidth:"12rem"}})),a.createElement(we.V,{header:"".concat(k?"Add":"Edit"," Client"),visible:E,footer:function(){return a.createElement("div",null,a.createElement(B.z,{label:"Save",loading:J||D,className:"p-button-warning mr-3",onClick:function(){return Pe(void 0,void 0,void 0,(0,m.Z)().mark((function e(){var t,o;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===L||void 0===L?void 0:L.name){e.next=4;break}return r("Name Field is Empty","Please Enter a Name"),e.abrupt("return");case 4:if(!k){e.next=10;break}return e.next=7,U(Object.assign(Object.assign({},L),q)).unwrap();case 7:o=e.sent,e.next=13;break;case 10:return e.next=12,V(Object.assign(Object.assign({},L),q)).unwrap();case 12:o=e.sent;case 13:n("Success",o.detail),setTimeout((function(){T(!1),b(!1)}),S.P7),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),r("An error occurred",(null===(t=null===e.t0||void 0===e.t0?void 0:e.t0.data)||void 0===t?void 0:t.detail)||"We couldn't save your post, try again!");case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))}}),a.createElement(B.z,{label:"Discard",loading:J||D,className:"p-button-plain",onClick:function(){P?confirm("Are You Sure to Discard?")&&b(!1):b(!1)}}))},position:"center",modal:!0,style:{width:"50vw"},onHide:function(){return b(!1)},draggable:!1,resizable:!1,closable:!1},a.createElement("div",{style:{padding:15}},a.createElement("div",{className:"field"},a.createElement("label",{style:{fontSize:18},className:"col-2"},"Name*"),a.createElement(g.o,{style:{width:"30%"},defaultValue:null===L||void 0===L?void 0:L.name,onChange:function(e){!P&&T(!0),N(Object.assign(Object.assign({},L),{name:e.target.value}))}})))))},Oe=a.createElement(i.AW,{path:"client"},a.createElement(i.AW,{index:!0,element:a.createElement(Te,null)})),Ce=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Le="/client/bank/",Ne=S.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listBank:e.query({query:function(e){var t=e.page,n=e.size;return{url:"".concat(Le,"?page=").concat(t||1,"&page_size=").concat(n||S.IV)}},providesTags:function(e){return e?[].concat((0,b.Z)(null===e||void 0===e?void 0:e.map((function(e){var t=e.id;return{type:S.pJ.COMPANIES,id:t}}))),[{type:S.pJ.COMPANIES,id:"LIST"}]):[{type:S.pJ.COMPANIES,id:"LIST"}]}}),addBank:e.mutation({query:function(e){return{url:Le,method:"POST",body:e}},invalidatesTags:[{type:S.pJ.COMPANIES,id:"LIST"}]}),getBank:e.query({query:function(e){return"".concat(Le).concat(e)},providesTags:function(e,t,n){return[{type:S.pJ.COMPANIES,id:n}]}}),updateBank:e.mutation({query:function(e){var t=e.id,n=Ce(e,["id"]);return{url:"".concat(Le).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:S.pJ.COMPANIES,id:null===e||void 0===e?void 0:e.id}]}}),deleteBank:e.mutation({query:function(e){return{url:"".concat(Le).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:S.pJ.COMPANIES,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),Ie=Ne.useAddBankMutation,Ae=Ne.useDeleteBankMutation,ke=Ne.useGetBankQuery,je=Ne.useListBankQuery,qe=Ne.useUpdateBankMutation,Ze=(Ne.useGetErrorProneQuery,"bank"),_e="Bank Account",Re=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function l(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},We=function(e){var t=(0,l.pm)(),n=t.showSuccess,r=t.showError,o=(0,a.useState)(!1),u=(0,f.Z)(o,2),s=u[0],d=u[1],p=(0,a.useState)(""),v=(0,f.Z)(p,2),y=v[0],h=v[1],E=(0,a.useState)(""),b=(0,f.Z)(E,2),x=b[0],w=b[1],P=(0,i.s0)(),T=(0,i.UO)().id||"",O=!T,C=(0,S.ft)(),L=ke(T,{skip:O}),N=L.data,I=L.isLoading,A=Ie(),k=(0,f.Z)(A,2),j=k[0],q=k[1].isLoading,Z=qe(),_=(0,f.Z)(Z,2),R=_[0],W=_[1].isLoading,F=(0,a.useState)([]),U=(0,f.Z)(F,2),J=(U[0],U[1]);(0,a.useEffect)((function(){N&&(null===N||void 0===N?void 0:N.project_status)&&J(N.project_status)}),[N]);return a.createElement(a.Fragment,null,a.createElement(l.Rm,{baseRoute:"/".concat(c.o,"/").concat(Ze),description:_e,id:T,data:N,isUpdating:q||W||s,isLoading:I,onSubmit:function(e){return Re(void 0,void 0,void 0,(0,m.Z)().mark((function t(){var o,a,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=Object.assign({},e),!O){t.next=8;break}return t.next=5,j(Object.assign(Object.assign({},i),C)).unwrap();case 5:a=t.sent,t.next=11;break;case 8:return t.next=10,R(Object.assign(Object.assign({},i),C)).unwrap();case 10:a=t.sent;case 11:n("Success",a.detail),d(!0),setTimeout((function(){P("/".concat(c.o,"/").concat(Ze))}),S.P7),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),r("An error occurred",(null===(o=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===o?void 0:o.detail)||"We couldn't save your post, try again!");case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))},renderForm:function(e,t,n,r){return a.createElement("div",{className:"pl-8 pt-4 pb-3 grid p-fluid"},a.createElement(l.Wi,{label:"Bank Name",name:"bank_name",className:"col-12",control:e,errors:n,required:"Enter Bank Name",leftSpan:2,rightSpan:3,useExplicit:!0,onChange:function(e){h(e.target.value)},formItem:{component:g.o,componentProps:{maxLength:100}}}),a.createElement(l.Wi,{label:"Account No",name:"accno",className:"col-12",control:e,errors:n,required:!0,leftSpan:2,rightSpan:3,useExplicit:!0,onChange:function(e){w(e.target.value)},formItem:{component:g.o,componentProps:{maxLength:100,type:"number"}}}),a.createElement(l.Wi,{label:"Account Name",name:"acc_name",className:"col-12",control:e,errors:n,required:!0,leftSpan:2,rightSpan:3,formItem:{component:g.o,componentProps:{maxLength:100,disabled:!0,value:"".concat(y||"","-").concat(x||"")}}}))}}))},Fe=function(e){var t=(0,a.useState)(1),n=(0,f.Z)(t,2),r=n[0],o=n[1],i=(0,a.useState)(S.IV),u=(0,f.Z)(i,2),s=u[0],d=u[1],p=je({page:r,size:s},{refetchOnMountOrArgChange:!0}),m=p.data,v=p.isFetching,g=Ae(),y=(0,f.Z)(g,2),h=y[0],E=y[1].isLoading;return a.createElement(l.PS,{pagination:{pageSize:s,loading:v,currentPage:r,total:null===m||void 0===m?void 0:m.length,onChange:function(e,t){o(e),d(t)}},baseRoute:"/".concat(c.o,"/").concat(Ze),description:_e,isLoading:v||E,data:m,deleteAction:function(e){return h(e).unwrap()},newTable:!0,showHeader:!0,navKey:"id",delKey:"id"},a.createElement(l._P,{field:"id",header:"Bank Code",filteringType:"number"}),a.createElement(l._P,{field:"name",header:"Bank Name",filteringType:"text"}),a.createElement(l._P,{field:"acc_no",header:"Account No",filteringType:"text",displayValueGetter:function(e){return null===e||void 0===e?void 0:e.name}}),a.createElement(l._P,{field:"acc_name",header:"Account Name",filteringType:"text",displayValueGetter:function(e){return null===e||void 0===e?void 0:e.name}}))},Ue=a.createElement(i.AW,{path:Ze},a.createElement(i.AW,{path:"new",element:a.createElement(We,null)}),a.createElement(i.AW,{path:":id/edit",element:a.createElement(We,null)}),a.createElement(i.AW,{index:!0,element:a.createElement(Fe,null)})),Je=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Me="/client/staff/",ze=S.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listStaff:e.query({query:function(e){var t=e.page,n=e.size;return{url:"".concat(Me,"?page=").concat(t||1,"&page_size=").concat(n||S.IV)}},providesTags:function(e){return e?[].concat((0,b.Z)(null===e||void 0===e?void 0:e.map((function(e){var t=e.id;return{type:S.pJ.STAFFS,id:t}}))),[{type:S.pJ.STAFFS,id:"LIST"}]):[{type:S.pJ.STAFFS,id:"LIST"}]}}),addStaff:e.mutation({query:function(e){return{url:Me,method:"POST",body:e}},invalidatesTags:[{type:S.pJ.STAFFS,id:"LIST"}]}),getStaff:e.query({query:function(e){return"".concat(Me).concat(e)},providesTags:function(e,t,n){return[{type:S.pJ.STAFFS,id:n}]}}),updateStaff:e.mutation({query:function(e){var t=e.id,n=Je(e,["id"]);return{url:"".concat(Me).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:S.pJ.STAFFS,id:null===e||void 0===e?void 0:e.id}]}}),deleteStaff:e.mutation({query:function(e){return{url:"".concat(Me).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:S.pJ.STAFFS,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),Ve=ze.useAddStaffMutation,Be=ze.useDeleteStaffMutation,De=ze.useGetStaffQuery,Ge=ze.useListStaffQuery,Qe=ze.useUpdateStaffMutation,He=(ze.useGetErrorProneQuery,"staff"),Ke="Staff",Ye=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function l(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},Xe=function(e){var t=(0,l.pm)(),n=t.showSuccess,r=t.showError,o=(0,a.useState)(!1),u=(0,f.Z)(o,2),s=u[0],d=u[1],p=(0,i.s0)(),v=(0,i.UO)().id||"",y=!v,h=(0,S.ft)(),E=De(v,{skip:y}),b=E.data,x=E.isLoading,w=ge({}),P=(w.data,w.isLoading,Ve()),T=(0,f.Z)(P,2),O=T[0],C=T[1].isLoading,L=Qe(),N=(0,f.Z)(L,2),I=N[0],A=N[1].isLoading;return a.createElement(a.Fragment,null,a.createElement(l.Rm,{baseRoute:"/".concat(c.o,"/").concat(He),description:Ke,id:v,data:b,isUpdating:C||A||s,isLoading:x,onSubmit:function(e){return Ye(void 0,void 0,void 0,(0,m.Z)().mark((function t(){var o,a,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=Object.assign({},e),!y){t.next=8;break}return t.next=5,O(Object.assign(Object.assign({},i),h)).unwrap();case 5:a=t.sent,t.next=11;break;case 8:return t.next=10,I(Object.assign(Object.assign({},i),h)).unwrap();case 10:a=t.sent;case 11:n("Success",a.detail),d(!0),setTimeout((function(){p("/".concat(c.o,"/").concat(He))}),S.P7),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),r("An error occurred",(null===(o=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===o?void 0:o.detail)||"We couldn't save your post, try again!");case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))},renderForm:function(e,t,n){return a.createElement("div",{className:"pl-8 pt-4 pb-3 grid p-fluid"},a.createElement(l.Wi,{label:"Staff Name",name:"name",className:"col-12",control:e,errors:n,required:"Enter Staff Name",leftSpan:2,rightSpan:3,formItem:{component:g.o,componentProps:{maxLength:100}}}),a.createElement(l.Wi,{label:"Mobile Number",name:"mobileno",className:"col-12",control:e,errors:n,required:!0,leftSpan:2,rightSpan:3,formItem:{component:g.o,componentProps:{maxLength:100}}}),a.createElement(l.Wi,{label:"Address",name:"addr",control:e,errors:n,className:"col-12",leftSpan:2,rightSpan:3,formItem:{component:ee.g,componentProps:{maxLength:100}}}),a.createElement(l.Wi,{label:"PAN No",name:"panno",className:"col-12",control:e,errors:n,required:!0,leftSpan:2,rightSpan:3,formItem:{component:g.o,componentProps:{maxLength:100}}}))}}))},$e=function(e){var t=(0,a.useState)(1),n=(0,f.Z)(t,2),r=n[0],o=n[1],i=(0,a.useState)(S.IV),u=(0,f.Z)(i,2),s=u[0],d=u[1],p=Ge({page:r,size:s},{refetchOnMountOrArgChange:!0}),m=p.data,v=p.isFetching,g=Be(),y=(0,f.Z)(g,2),h=y[0],E=y[1].isLoading;return a.createElement(l.PS,{pagination:{pageSize:s,loading:v,currentPage:r,total:null===m||void 0===m?void 0:m.length,onChange:function(e,t){o(e),d(t)}},baseRoute:"/".concat(c.o,"/").concat(He),description:Ke,isLoading:v||E,data:m,deleteAction:function(e){return h(e).unwrap()},newTable:!0,showHeader:!0,navKey:"id",delKey:"id"},a.createElement(l._P,{field:"id",header:"Staff Code",filteringType:"number"}),a.createElement(l._P,{field:"name",header:"Staff Name",filteringType:"text"}),a.createElement(l._P,{field:"mobileno",header:"Mobile No",filteringType:"text"}),a.createElement(l._P,{field:"panno",header:"PAN No",filteringType:"text"}))},et=a.createElement(i.AW,{path:He},a.createElement(i.AW,{path:"new",element:a.createElement(Xe,null)}),a.createElement(i.AW,{path:":id/edit",element:a.createElement(Xe,null)}),a.createElement(i.AW,{index:!0,element:a.createElement($e,null)})),tt=function(){var e,t,n,r,o,c,s=(0,S.aC)();null===(n=null===(t=null===(e=s.user)||void 0===e?void 0:e.role[0])||void 0===t?void 0:t.access)||void 0===n||n.map((function(e){return e.name}));return a.createElement(i.Z5,null,(null===(c=null===(o=null===(r=s.user)||void 0===r?void 0:r.role[0])||void 0===o?void 0:o.name)||void 0===c?void 0:c.toLowerCase().includes("admin"))?a.createElement(i.AW,{path:"/",element:a.createElement(l.SV,{navItems:p})},a.createElement(i.AW,{index:!0,element:a.createElement(i.Fg,{to:u,replace:!0})}),J,$,xe,Oe,Ue,et,a.createElement(i.AW,{path:":page/comming-soon",element:a.createElement(l.hg,null)}),a.createElement(i.AW,{path:"*",element:a.createElement(l.EN,{relative:!0})})):a.createElement(i.AW,{path:"/",element:a.createElement(l.SV,{navItems:p})},a.createElement(i.AW,{path:"*",element:a.createElement(l.Sd,{relative:!0})})))}},1002:function(e,t,n){n.d(t,{g:function(){return l}});var r=n(969),o=n(9459),a=n(4756);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}var l=r.memo(r.forwardRef((function(e,t){var n=r.useRef(t),c=r.useRef(0),u=function(e){var t=n.current;t&&a.p7.isVisible(t)&&(c.current||(c.current=t.scrollHeight,t.style.overflow="hidden"),(c.current!==t.scrollHeight||e)&&(t.style.height="",t.style.height=t.scrollHeight+"px",parseFloat(t.style.height)>=parseFloat(t.style.maxHeight)?(t.style.overflowY="scroll",t.style.height=t.style.maxHeight):t.style.overflow="hidden",c.current=t.scrollHeight))},s=r.useMemo((function(){return a.gb.isNotEmpty(e.value)||a.gb.isNotEmpty(e.defaultValue)||n.current&&a.gb.isNotEmpty(n.current.value)}),[e.value,e.defaultValue]);r.useEffect((function(){a.gb.combinedRefs(n,t)}),[n,t]),r.useEffect((function(){e.autoResize&&u(!0)}),[e.autoResize]);var d=a.gb.isNotEmpty(e.tooltip),p=a.gb.findDiffKeys(e,l.defaultProps),m=(0,a.AK)("p-inputtextarea p-inputtext p-component",{"p-disabled":e.disabled,"p-filled":s,"p-inputtextarea-resizable":e.autoResize},e.className);return r.createElement(r.Fragment,null,r.createElement("textarea",i({ref:n},p,{className:m,onFocus:function(t){e.autoResize&&u(),e.onFocus&&e.onFocus(t)},onBlur:function(t){e.autoResize&&u(),e.onBlur&&e.onBlur(t)},onKeyUp:function(t){e.autoResize&&u(),e.onKeyUp&&e.onKeyUp(t)},onInput:function(t){e.autoResize&&u(),e.onInput&&e.onInput(t);var n=t.target;a.gb.isNotEmpty(n.value)?a.p7.addClass(n,"p-filled"):a.p7.removeClass(n,"p-filled")}})),d&&r.createElement(o.u,i({target:n,content:e.tooltip},e.tooltipOptions)))})));l.displayName="InputTextarea",l.defaultProps={__TYPE:"InputTextarea",autoResize:!1,tooltip:null,tooltipOptions:null,onInput:null}}}]);
//# sourceMappingURL=318.6a2f9e7e.chunk.js.map