"use strict";(self.webpackChunkbuild_iq_app=self.webpackChunkbuild_iq_app||[]).push([[784],{3784:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var o=n(969),a=n(734),l=n(2035),r=function(e,t){return(0,l.E7)("/".concat("invoice","/").concat(e)+(t?"/comming-soon":""))},i=[{items:[{label:"Vendor Invoice",icon:"pi ml-3",template:r("vendorinvoice")},{label:"Contractor Invoice",icon:"pi ml-3",template:r("contractorinvoice",!0)},{label:"GST Invoice",icon:"pi ml-3",template:r("gstinvoice",!0)},{label:"TDS Invoice",icon:"pi ml-3",template:r("tdsinvoice",!0)},{label:"Salary/Allowance Invoice",icon:"pi ml-3",template:r("allowanceinvoice",!0)}]}],c=n(2723),s=n(6234),m=n(7765),d=n(3127),u=n(8224),p=n(8079),v=n(1495),f="/transaction/vendor/invoice/",g=v.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listInvoice:e.query({query:function(e){var t=e.page,n=e.size,o=e.project,a=e.vendor;return{url:(0,v.DS)(f,"?page=".concat(t||1,"&page_size=").concat(n||v.IV).concat(o?"&project=".concat(o):"").concat(a?"&vendor=".concat(a):""))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.key;return{type:v.pJ.VENDOR_INVOICE,key:t}}))),[{type:v.pJ.VENDOR_INVOICE,id:"LIST"}]):[{type:v.pJ.VENDOR_INVOICE,id:"LIST"}]}}),addInvoice:e.mutation({query:function(e){return{url:f,method:"POST",body:e}},invalidatesTags:[{type:v.pJ.VENDOR_INVOICE,id:"LIST"}]}),getInvoice:e.query({query:function(e){return"".concat(f).concat(e)},providesTags:function(e,t,n){return[{type:v.pJ.VENDOR_INVOICE,id:n}]}}),updateInvoice:e.mutation({query:function(e){var t=e;return console.log(t),{url:"".concat(f),method:"POST",body:t}},invalidatesTags:function(e){return[{type:v.pJ.VENDOR_INVOICE,id:null===e||void 0===e?void 0:e.key}]}}),deleteInvoice:e.mutation({query:function(e){return{url:"".concat(f).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:v.pJ.VENDOR_INVOICE,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),h=g.useAddInvoiceMutation,y=g.useDeleteInvoiceMutation,E=g.useGetInvoiceQuery,b=g.useListInvoiceQuery,S=g.useUpdateInvoiceMutation,I=(g.useGetErrorProneQuery,g.endpoints.getInvoice,function(e,t,n,o){return new(n||(n=Promise))((function(a,l){function r(e){try{c(o.next(e))}catch(t){l(t)}}function i(e){try{c(o.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((o=o.apply(e,t||[])).next())}))}),N=function(e){var t=(0,l.pm)(),n=t.showSuccess,r=t.showError,i=(0,o.useState)({}),p=(0,s.Z)(i,2),f=p[0],g=p[1],y=(0,o.useState)("S"),b=(0,s.Z)(y,2),N=b[0],P=(b[1],(0,o.useState)("SAVE")),w=(0,s.Z)(P,2),x=w[0],L=(w[1],(0,a.s0)()),O=(0,a.UO)().id,k=parseInt(O||""),V=isNaN(k)||k<=0,Z=(0,o.useRef)(),C=(0,v.ft)(),_=E(k,{skip:V,refetchOnMountOrArgChange:!0}),W=_.data,A=_.isLoading,D=(0,o.useState)(null),T=(0,s.Z)(D,2),j=(T[0],T[1],(0,o.useState)([])),M=(0,s.Z)(j,2),F=(M[0],M[1],(0,o.useState)(null)),R=(0,s.Z)(F,2),q=R[0],z=R[1],G=(0,o.useState)(null),H=(0,s.Z)(G,2),B=H[0],J=H[1],U=h(),Y=(0,s.Z)(U,2),Q=(Y[0],Y[1].isLoading),K=(0,v.Gt)("Invoice",{skip:!V,refetchOnMountOrArgChange:V}).data,X=((0,v.Gt)("VIN",{skip:V,refetchOnMountOrArgChange:!V}).data,(0,v.Gt)("VCI",{skip:V,refetchOnMountOrArgChange:!V}).data,(0,v.Wv)()),$=X.data,ee=X.isLoading,te=(0,v.lE)({}),ne=te.data,oe=te.isLoading,ae=(0,v.u2)(B,{skip:!B}),le=ae.data,re=ae.isFetching,ie=h(),ce=(0,s.Z)(ie,2),se=ce[0],me=ce[1].isLoading,de=S(),ue=(0,s.Z)(de,2),pe=ue[0],ve=ue[1].isLoading;(0,o.useEffect)((function(){g(W||Object.assign(Object.assign({},C),{date:(0,v.Hh)(new Date,!0),number:null===K||void 0===K?void 0:K.next_doc_id,loctyp:"PR"})),W&&J(W.vend_key)}),[W,K]),(0,o.useEffect)((function(){var e;le?(console.log(le),z(null===(e=le[0])||void 0===e?void 0:e.key)):z(null)}),[le]);return o.createElement(o.Fragment,null,o.createElement(l.Rm,{disableSaveBtn:["U","R","C"].includes(null===W||void 0===W?void 0:W.docstatus),baseRoute:"/invoice/vendorinvoice",description:"Invoice",id:k,data:f,isUpdating:me||ve||Q,ref:Z,isLoading:A,onSubmit:function(e){return I(void 0,void 0,void 0,(0,c.Z)().mark((function t(){var o,a,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,l=Object.assign(Object.assign({},e),{date:(0,v.p6)(e.date,"yyyy-MM-dd"),loctyp:"PR",itemtyp_key:q,docstatus:N,action:x}),!V){t.next=8;break}return t.next=5,se(Object.assign(Object.assign({},l),C)).unwrap();case 5:a=t.sent,t.next=11;break;case 8:return t.next=10,pe(Object.assign(Object.assign(Object.assign({},l),C),{key:null===W||void 0===W?void 0:W.key})).unwrap();case 10:a=t.sent;case 11:n("Success",a.detail),n("Success",a.detail),setTimeout((function(){L("/invoice/vendorinvoice")}),v.P7),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),r("An error occurred",(null===(o=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===o?void 0:o.detail)||"We couldn't save your post, try again!");case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))},renderForm:function(e,t,n){return o.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},o.createElement(l.Wi,{label:"Invoice Number",name:"number",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:m.o,componentProps:{useGrouping:!1,disabled:!0}}}),o.createElement(l.Wi,{label:"Invoice Date",name:"date",className:"col-12 md:col-6",useExplicit:!0,control:e,errors:n,leftSpan:4,rightSpan:6,convertValue:v.Hh,formItem:{component:d.f,componentProps:{showIcon:!0,dateFormat:"yy-mm-dd"}}}),o.createElement(l.Wi,{label:"Project",name:"proj_key",className:"col-12 md:col-6",control:e,errors:n,isLoading:oe,leftSpan:4,rightSpan:6,formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"name",optionValue:"key",filter:!0,filterBy:"name",options:ne}}}),o.createElement(l.Wi,{label:"Vendor",name:"vend_key",className:"col-12 md:col-6",control:e,errors:n,isLoading:ee,required:"Select a Vendor",leftSpan:4,rightSpan:6,useExplicit:!0,onChange:function(e){J(e.value)},formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"name",optionValue:"key",filter:!0,filterBy:"name",options:$}}}),o.createElement(l.Wi,{label:"Item Type",name:"itemtyp_key",control:e,errors:n,isLoading:re,className:"col-12 md:col-6",leftSpan:4,rightSpan:6,useExplicit:!0,onChange:function(e){z(e.value)},formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",options:le,value:q}}}),o.createElement(l.Wi,{label:"Invoice No",name:"invoice_no",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:m.o,componentProps:{maxLength:50}}}),o.createElement(l.Wi,{label:"Description",name:"descr",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:m.o,componentProps:{maxLength:50}}}),o.createElement("div",{className:"col-12 md:col-6"}))}}))},P=n(8356),w=n(6770),x=n(9002),L=function(e,t,n,o){return new(n||(n=Promise))((function(a,l){function r(e){try{c(o.next(e))}catch(t){l(t)}}function i(e){try{c(o.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((o=o.apply(e,t||[])).next())}))};function O(e){var t=this,n=e.displayModal,a=e.customDiscard,r=(0,l.pm)(),i=r.showSuccess,p=r.showError,f=(0,o.useState)(!1),g=(0,s.Z)(f,2),y=g[0],E=g[1],b=(0,o.useState)("S"),S=(0,s.Z)(b,2),I=S[0],N=(S[1],(0,o.useState)("")),P=(0,s.Z)(N,2),w=(P[0],P[1],(0,o.useState)("SAVE")),O=(0,s.Z)(w,2),k=O[0],V=(O[1],(0,o.useRef)()),Z=(0,o.useState)({}),C=(0,s.Z)(Z,2),_=C[0],W=(C[1],(0,v.ft)()),A=(0,o.useState)(null),D=(0,s.Z)(A,2),T=(D[0],D[1],(0,o.useState)("Online")),j=(0,s.Z)(T,2),M=j[0],F=(j[1],(0,v.Gt)("PYV",{refetchOnMountOrArgChange:!0})),R=F.data,q=(F.error,F.isFetching,(0,v.Wv)()),z=(q.data,q.isLoading,(0,v.Ii)({})),G=(z.data,z.isLoading,(0,v.sq)()),H=G.data,B=G.isFetching,J=h(),U=(0,s.Z)(J,2),Y=U[0],Q=U[1].isLoading;return o.createElement(o.Fragment,null,o.createElement(x.V,{header:"Create New Vendor Invoice Without PO",visible:n,position:"center",modal:!0,style:{width:"70vw"},onHide:function(){return a()},draggable:!1,resizable:!1,closable:!0},o.createElement(l.Rm,{baseRoute:"/payment/vendorpayment",bottomControl:!0,data:_,hideHeader:!0,customDiscard:a,ref:V,isUpdating:Q||y,onSubmit:function(e){return L(t,void 0,void 0,(0,c.Z)().mark((function t(){var n,o,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=Object.assign(Object.assign({},e),{number:null===R||void 0===R?void 0:R.next_doc_id,date:(0,v.p6)(e.date,"yyyy-MM-dd"),docstatus:I,docid:"PYV",chqdate:e.chqdate&&(0,v.p6)(e.chqdate,"yyyy-MM-dd"),action:k,modeofpay:M}),console.log(o),t.next=5,Y(Object.assign(Object.assign({},o),W)).unwrap();case 5:l=t.sent,i("Success",l.detail),E(!0),setTimeout((function(){a()}),v.P7),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),p("An error occurred",(null===(n=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===n?void 0:n.detail)||"We couldn't save your post, try again!");case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))},renderForm:function(e,t,n,a,r){return o.createElement(o.Fragment,null,o.createElement("div",{style:{border:"2px solid lightgray",padding:"5px 20px"}},o.createElement("div",{className:"flex"},o.createElement(l.Wi,{label:"Invoice No",name:"invoice_no",className:"col-12 md:col-6 pl-0",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:m.o,componentProps:{maxLength:25}}}),o.createElement(l.Wi,{label:"Creatin Method",name:"invoice_no",className:"col-12 md:col-6 pl-0",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:m.o,componentProps:{maxLength:25}}})),o.createElement("div",{className:"flex"},o.createElement(l.Wi,{label:"Company Name",name:"company_name",className:"col-12 md:col-6 pl-0",required:!0,control:e,errors:n,isLoading:B,leftSpan:4,rightSpan:6,formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"name",optionValue:"id",filter:!0,filterBy:"name",options:H}}}),o.createElement(l.Wi,{label:"Project Name",name:"invoice_no",className:"col-12 md:col-6 pl-0",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:m.o,componentProps:{maxLength:25}}}))),o.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},o.createElement(l.Wi,{label:"Date",name:"date",useExplicit:!0,control:e,errors:n,leftSpan:4,rightSpan:6,required:!0,className:"col-12 md:col-6 pl-0",convertValue:v.Hh,formItem:{component:d.f,componentProps:{showIcon:!0,dateFormat:"dd-mm-yy"}}}),o.createElement(l.Wi,{label:"Item Type",name:"vend_key",leftSpan:4,rightSpan:6,className:"col-12 md:col-6 pl-0",control:e,errors:n,formItem:{component:m.o,componentProps:{maxLength:25}}}),o.createElement(l.Wi,{label:"Vendor Name",name:"vend_key",leftSpan:4,rightSpan:6,className:"col-12 md:col-6 pl-0",control:e,errors:n,formItem:{component:m.o,componentProps:{maxLength:25}}}),o.createElement(l.Wi,{label:"Voucher No",name:"refnumber",leftSpan:4,rightSpan:6,className:"col-12 md:col-6 pl-0",control:e,errors:n,formItem:{component:m.o,componentProps:{maxLength:25}}}),o.createElement(l.Wi,{label:"Description",name:"refnumber",leftSpan:4,rightSpan:6,className:"col-12 md:col-6 pl-0",control:e,errors:n,formItem:{component:m.o,componentProps:{maxLength:25}}}),o.createElement(l.Wi,{label:"Amount",name:"refnumber",leftSpan:4,rightSpan:6,className:"col-12 md:col-6 pl-0",control:e,errors:n,formItem:{component:m.o,componentProps:{maxLength:25}}}),o.createElement(l.Wi,{label:"TDS",name:"refnumber",leftSpan:4,rightSpan:6,className:"col-12 md:col-6 pl-0",control:e,errors:n,formItem:{component:m.o,componentProps:{maxLength:25}}}),o.createElement(l.Wi,{label:"GST",name:"refnumber",leftSpan:4,rightSpan:6,className:"col-12 md:col-6 pl-0",control:e,errors:n,formItem:{component:m.o,componentProps:{maxLength:25}}}),o.createElement(l.Wi,{label:"Notes",name:"refnumber",leftSpan:2,rightSpan:8,className:"col-12 md:col-12 pl-0",control:e,errors:n,formItem:{component:m.o,componentProps:{maxLength:25}}})))}})))}var k=function(e,t,n,o){return new(n||(n=Promise))((function(a,l){function r(e){try{c(o.next(e))}catch(t){l(t)}}function i(e){try{c(o.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((o=o.apply(e,t||[])).next())}))};function V(e){var t=this,n=e.displayModal,a=e.customDiscard,r=(0,l.pm)(),i=r.showSuccess,d=r.showError,u=(0,o.useState)(!1),p=(0,s.Z)(u,2),f=p[0],g=p[1],y=(0,o.useState)("S"),E=(0,s.Z)(y,2),b=E[0],S=(E[1],(0,o.useState)("")),I=(0,s.Z)(S,2),N=(I[0],I[1],(0,o.useState)("SAVE")),P=(0,s.Z)(N,2),w=P[0],L=(P[1],(0,o.useRef)()),O=(0,o.useState)({}),V=(0,s.Z)(O,2),Z=V[0],C=(V[1],(0,v.ft)()),_=(0,o.useState)(null),W=(0,s.Z)(_,2),A=(W[0],W[1],(0,o.useState)("Online")),D=(0,s.Z)(A,2),T=D[0],j=(D[1],(0,v.Gt)("PYV",{refetchOnMountOrArgChange:!0})),M=j.data,F=(j.error,j.isFetching,(0,v.Wv)()),R=(F.data,F.isLoading,(0,v.Ii)({})),q=(R.data,R.isLoading,(0,v.sq)()),z=(q.data,q.isFetching,h()),G=(0,s.Z)(z,2),H=G[0],B=G[1].isLoading;return o.createElement(o.Fragment,null,o.createElement(x.V,{header:"Additional Invoice Detail",visible:n,position:"center",modal:!0,style:{width:"40vw"},onHide:function(){return a()},draggable:!1,resizable:!1,closable:!0},o.createElement(l.Rm,{baseRoute:"/payment/vendorpayment",bottomControl:!0,data:Z,hideHeader:!0,customDiscard:a,ref:L,isUpdating:B||f,onSubmit:function(e){return k(t,void 0,void 0,(0,c.Z)().mark((function t(){var n,o,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=Object.assign(Object.assign({},e),{number:null===M||void 0===M?void 0:M.next_doc_id,date:(0,v.p6)(e.date,"yyyy-MM-dd"),docstatus:b,docid:"PYV",chqdate:e.chqdate&&(0,v.p6)(e.chqdate,"yyyy-MM-dd"),action:w,modeofpay:T}),console.log(o),t.next=5,H(Object.assign(Object.assign({},o),C)).unwrap();case 5:l=t.sent,i("Success",l.detail),g(!0),setTimeout((function(){a()}),v.P7),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),d("An error occurred",(null===(n=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===n?void 0:n.detail)||"We couldn't save your post, try again!");case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))},renderForm:function(e,t,n,a,r){return o.createElement(o.Fragment,null,o.createElement("div",{className:"pl-4 pt-4"},o.createElement(l.Wi,{label:"Voucher No",name:"refnumber",leftSpan:3,rightSpan:6,control:e,errors:n,formItem:{component:m.o,componentProps:{maxLength:25}}}),o.createElement(l.Wi,{label:"Notes",name:"refnumber",leftSpan:3,rightSpan:6,control:e,errors:n,formItem:{component:m.o,componentProps:{maxLength:25}}})))},saveBtnLabel:"Ok",discardBtnLabel:"Skip"})))}function Z(e){var t=e.displayModal,n=e.customDiscard,a=(0,l.pm)(),r=(a.showSuccess,a.showError,(0,o.useState)(!1)),i=(0,s.Z)(r,2),c=(i[0],i[1],(0,v.JB)().data),m=(0,o.useState)(!1),d=(0,s.Z)(m,2),f=(d[0],d[1],(0,o.useState)(!1)),g=(0,s.Z)(f,2),h=g[0],E=g[1],S=(0,o.useState)(null),I=(0,s.Z)(S,2),N=I[0],L=I[1],O=(0,o.useState)(null),k=(0,s.Z)(O,2),Z=k[0],C=k[1],_=(0,o.useState)(null),W=(0,s.Z)(_,2),A=(W[0],W[1],(0,o.useState)([])),D=(0,s.Z)(A,2),T=D[0],j=D[1],M=b({page:1,size:100,project:N,status:Z}),F=M.data,R=M.isFetching,q=y(),z=(0,s.Z)(q,2),G=z[0],H=z[1].isLoading;(0,o.useEffect)((function(){c&&j([{key:null,name:"All"}].concat((0,p.Z)(c)))}),[c]);return o.createElement(o.Fragment,null,o.createElement(x.V,{header:"Generate Invoice From PO",visible:t,position:"center",modal:!0,style:{width:"80vw"},onHide:function(){return n()},draggable:!1,resizable:!1,closable:!0},o.createElement(o.Fragment,null,o.createElement(P.i,null),o.createElement("div",{style:{display:"flex"}},o.createElement("div",{className:"field col-6"},o.createElement("label",{className:"col-4"},"Project Name"),o.createElement(u.L,{style:{width:"30%"},optionLabel:"name",optionValue:"key",value:N,onChange:function(e){L(e.value)},options:T,placeholder:"All"})),o.createElement("div",{className:"field col-6"},o.createElement("label",{className:"col-4"},"Company Name"),o.createElement(u.L,{style:{width:"30%"},value:Z,placeholder:"All",onChange:function(e){C(e.value)},optionLabel:"descr",optionValue:"key",options:[{key:null,descr:"All"},{key:"S",descr:"Saved"},{key:"U",descr:"Submitted"},{key:"C",descr:"Cancelled"}]}))),o.createElement("div",{className:"col-12 ",style:{height:"calc(100% - 183px)",minHeight:200}},o.createElement(l.PS,{hideActionColumn:!0,baseRoute:"/invoice/vendorinvoice",description:"PO's Under Project",hideAddButton:!0,allowFilters:!1,isLoading:R||H,data:null===F||void 0===F?void 0:F.results,newTable:!0,showHeader:!0,deleteAction:function(e){return G(e).unwrap()}},o.createElement(l._P,{width:"5%",field:"sno",header:"S.No",filteringType:"number"}),o.createElement(l._P,{field:"date",header:"PO Date",filteringType:"date"}),o.createElement(l._P,{field:"text",header:"PO No",filteringType:"text"}),o.createElement(l._P,{field:"text",header:"Item Type",filteringType:"text"}),o.createElement(l._P,{field:"vendor.name",header:"Vendor Name",filteringType:"text"}),o.createElement(l._P,{field:"amount",header:"Amount (Rs)",filteringType:"text"}),o.createElement(l._P,{width:"20%",field:"makepayment",header:"",type:"custom",displayValueGetter:function(e){return o.createElement("div",{style:{display:"flex"}},o.createElement(w.z,{label:"View",style:{fontSize:16,height:30},onClick:function(){}}),o.createElement(w.z,{style:{marginLeft:10,fontSize:16,height:30},label:"Generate",onClick:function(){E(!0)}}))}}))),o.createElement("div",null,o.createElement(w.z,{label:"Close",className:"p-button-plain",onClick:function(){n(!0)}})))),o.createElement(V,{displayModal:h,customDiscard:function(){E(!1)}}))}function C(e){var t=e.displayModal,n=e.poId,a=e.customDiscard,r=E(n,{refetchOnMountOrArgChange:!0}),i=r.data,c=r.isFetching;return o.createElement(o.Fragment,null,o.createElement(x.V,{header:"View Invoice",visible:t,position:"center",modal:!0,style:{width:"70vw"},onHide:function(){return a()},closeOnEscape:!0,draggable:!1,resizable:!1,closable:!0},o.createElement(l.Rm,{baseRoute:"/payment/vendorpayment",viewMode:!0,id:n,bottomControl:!0,data:i,hideHeader:!0,customDiscard:a,isLoading:c,onSubmit:function(){},renderForm:function(e,t,n){var a,r,c;return o.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},o.createElement(l.Wi,{label:"Invoice Number",name:"number",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:m.o,componentProps:{useGrouping:!1,value:null===i||void 0===i?void 0:i.number}}}),o.createElement(l.Wi,{label:"Invoice Date",name:"date",className:"col-12 md:col-6",useExplicit:!0,control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:m.o,componentProps:{value:null===i||void 0===i?void 0:i.date}}}),o.createElement(l.Wi,{label:"Project",name:"proj_key",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:m.o,componentProps:{value:null===(a=null===i||void 0===i?void 0:i.project)||void 0===a?void 0:a.name}}}),o.createElement(l.Wi,{label:"Vendor",name:"vend_key",className:"col-12 md:col-6",control:e,errors:n,required:"Select a Vendor",leftSpan:4,rightSpan:6,formItem:{component:m.o,componentProps:{value:null===(r=null===i||void 0===i?void 0:i.vendor)||void 0===r?void 0:r.name}}}),o.createElement(l.Wi,{label:"Item Type",name:"itemtyp_key",control:e,errors:n,className:"col-12 md:col-6",leftSpan:4,rightSpan:6,formItem:{component:m.o,componentProps:{value:null===(c=null===i||void 0===i?void 0:i.itemtype)||void 0===c?void 0:c.descr}}}),o.createElement(l.Wi,{label:"Description",name:"descr",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:m.o,componentProps:{value:null===i||void 0===i?void 0:i.delivnotes}}}),o.createElement("div",{className:"col-12 md:col-6"}))}})))}var _=function(e){var t=(0,o.useState)(1),n=(0,s.Z)(t,2),a=n[0],r=n[1],i=(0,o.useState)(v.IV),c=(0,s.Z)(i,2),m=c[0],d=c[1],f=(0,v.JB)().data,g=(0,o.useState)(!1),h=(0,s.Z)(g,2),E=h[0],S=h[1],I=(0,o.useState)(!1),N=(0,s.Z)(I,2),x=N[0],L=N[1],k=(0,o.useState)(!1),V=(0,s.Z)(k,2),_=V[0],W=V[1],A=(0,o.useState)(null),D=(0,s.Z)(A,2),T=D[0],j=D[1],M=(0,o.useState)(null),F=(0,s.Z)(M,2),R=F[0],q=F[1],z=(0,o.useState)(null),G=(0,s.Z)(z,2),H=G[0],B=G[1],J=(0,o.useState)([]),U=(0,s.Z)(J,2),Y=U[0],Q=U[1],K=b({page:a,size:m,project:T,status:R}),X=K.data,$=K.isFetching,ee=y(),te=(0,s.Z)(ee,2),ne=te[0],oe=te[1].isLoading;(0,o.useEffect)((function(){f&&Q([{key:null,name:"All"}].concat((0,p.Z)(f)))}),[f]);var ae=function(){S(!1),L(!1),W(!1)};return o.createElement(o.Fragment,null,o.createElement(P.i,null),o.createElement("div",{style:{display:"flex"}},o.createElement("div",{className:"field col-6"},o.createElement("label",{className:"col-3"},"Project Name"),o.createElement(u.L,{style:{width:"30%"},optionLabel:"name",optionValue:"key",value:T,onChange:function(e){j(e.value)},options:Y,placeholder:"All"})),o.createElement("div",{className:"field col-6"},o.createElement("div",{className:"field"},o.createElement("label",{className:"col-3"},"Company Name"),o.createElement(u.L,{style:{width:"30%"},value:R,placeholder:"All",onChange:function(e){q(e.value)},optionLabel:"descr",optionValue:"key",options:[{key:null,descr:"All"},{key:"S",descr:"Saved"},{key:"U",descr:"Submitted"},{key:"C",descr:"Cancelled"}]})))),o.createElement("div",{className:"col-12 ",style:{height:"calc(100% - 183px)",minHeight:200}},o.createElement(l.PS,{enableView:!0,onViewClick:function(e){console.log(e),B(e),S(!0)},pagination:{pageSize:m,loading:$,currentPage:a,total:null===X||void 0===X?void 0:X.count,onChange:function(e,t){r(e),d(t)}},baseRoute:"/invoice/vendorinvoice",description:"Item Vendor Invoice",hideAddButton:!0,allowFilters:!1,isLoading:$||oe,data:null===X||void 0===X?void 0:X.results,newTable:!0,showHeader:!0,deleteAction:function(e){return ne(e).unwrap()}},o.createElement(l._P,{width:"5%",field:"sno",header:"S.No",filteringType:"number"}),o.createElement(l._P,{field:"number",header:"Invoice No",filteringType:"number"}),o.createElement(l._P,{field:"date",header:"Date",filteringType:"date"}),o.createElement(l._P,{field:"vendor.name",header:"Vendor Name",filteringType:"text"}),o.createElement(l._P,{field:"amount",header:"Amount (Rs)",filteringType:"text"}),o.createElement(l._P,{field:"status.descr",header:"Payment Status",filteringType:"text"}))),o.createElement("div",null,o.createElement(w.z,{label:"Generate Invoice",className:"p-button-plain",style:{margin:"0 20px"},onClick:function(){W(!0)}}),o.createElement(w.z,{label:"Create Direct Invoice",className:"p-button-plain",onClick:function(){L(!0)}})),o.createElement(C,{displayModal:E,poId:H,customDiscard:ae}),o.createElement(O,{displayModal:x,customDiscard:ae}),o.createElement(Z,{displayModal:_,customDiscard:ae}))},W=o.createElement(a.AW,{path:"vendorinvoice"},o.createElement(a.AW,{path:"new",element:o.createElement(N,null)}),o.createElement(a.AW,{path:":id/edit",element:o.createElement(N,null)}),o.createElement(a.AW,{index:!0,element:o.createElement(_,null)})),A=function(){var e,t,n;null===(n=null===(t=null===(e=(0,v.aC)().user)||void 0===e?void 0:e.role[0])||void 0===t?void 0:t.access)||void 0===n||n.map((function(e){return e.name}));return o.createElement(a.Z5,null,o.createElement(a.AW,{path:"/",element:o.createElement(l.SV,{navItems:i})},o.createElement(a.AW,{index:!0,element:o.createElement(a.Fg,{to:"vendorinvoice",replace:!0})}),W,o.createElement(a.AW,{path:":invoice/comming-soon",element:o.createElement(l.hg,null)}),o.createElement(a.AW,{path:"*",element:o.createElement(l.EN,{relative:!0})})))}},8356:function(e,t,n){n.d(t,{i:function(){return r}});var o=n(969),a=n(4756);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l.apply(this,arguments)}var r=o.forwardRef((function(e,t){var n="horizontal"===e.layout,i="vertical"===e.layout,c=a.gb.findDiffKeys(e,r.defaultProps),s=(0,a.AK)("p-divider p-component p-divider-".concat(e.layout," p-divider-").concat(e.type),{"p-divider-left":n&&(!e.align||"left"===e.align),"p-divider-right":n&&"right"===e.align,"p-divider-center":n&&"center"===e.align||i&&(!e.align||"center"===e.align),"p-divider-top":i&&"top"===e.align,"p-divider-bottom":i&&"bottom"===e.align},e.className);return o.createElement("div",l({className:s,style:e.style,role:"separator"},c),o.createElement("div",{className:"p-divider-content"},e.children))}));r.displayName="Divider",r.defaultProps={__TYPE:"Divider",align:null,layout:"horizontal",type:"solid",style:null,className:null}}}]);
//# sourceMappingURL=784.ff460cc1.chunk.js.map