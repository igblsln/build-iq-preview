"use strict";(self.webpackChunkbuild_iq_app=self.webpackChunkbuild_iq_app||[]).push([[373],{1373:function(e,t,n){n.r(t),n.d(t,{default:function(){return Je}});var a=n(969),o=n(734),l=n(2035),r=function(e,t){return(0,l.E7)("/".concat("invoice","/").concat(e)+(t?"/comming-soon":""))},i=[{items:[{label:"Vendor Invoice",icon:"pi ml-3",template:r("vendorinvoice")},{label:"Contractor Invoice",icon:"pi ml-3",template:r("contractorinvoice")},{label:"GST Invoice",icon:"pi ml-3",template:r("gstinvoice")},{label:"TDS Invoice",icon:"pi ml-3",template:r("tdsinvoice")},{label:"Salary/Allowance Invoice",icon:"pi ml-3",template:r("salaryinvoice")}]}],c=n(2723),s=n(6234),d=n(7765),m=n(3127),u=n(8224),p=n(8079),f=n(1495),v="/transaction/vendor/invoice/",g=f.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listInvoice:e.query({query:function(e){var t=e.page,n=e.size,a=e.project,o=e.vendor;return{url:(0,f.DS)(v,"?page=".concat(t||1,"&page_size=").concat(n||f.IV).concat(a?"&project=".concat(a):"").concat(o?"&vendor=".concat(o):""))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.key;return{type:f.pJ.VENDOR_INVOICE,key:t}}))),[{type:f.pJ.VENDOR_INVOICE,id:"LIST"}]):[{type:f.pJ.VENDOR_INVOICE,id:"LIST"}]}}),addInvoice:e.mutation({query:function(e){return{url:v,method:"POST",body:e}},invalidatesTags:[{type:f.pJ.VENDOR_INVOICE,id:"LIST"}]}),getInvoice:e.query({query:function(e){return"".concat(v).concat(e)},providesTags:function(e,t,n){return[{type:f.pJ.VENDOR_INVOICE,id:n}]}}),updateInvoice:e.mutation({query:function(e){var t=e;return console.log(t),{url:"".concat(v),method:"POST",body:t}},invalidatesTags:function(e){return[{type:f.pJ.VENDOR_INVOICE,id:null===e||void 0===e?void 0:e.key}]}}),deleteInvoice:e.mutation({query:function(e){return{url:"".concat(v).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:f.pJ.VENDOR_INVOICE,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),h=g.useAddInvoiceMutation,y=g.useDeleteInvoiceMutation,E=g.useGetInvoiceQuery,b=g.useListInvoiceQuery,S=g.useUpdateInvoiceMutation,N=(g.useGetErrorProneQuery,g.endpoints.getInvoice,function(e,t,n,a){return new(n||(n=Promise))((function(o,l){function r(e){try{c(a.next(e))}catch(t){l(t)}}function i(e){try{c(a.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((a=a.apply(e,t||[])).next())}))}),I=function(e){var t=(0,l.pm)(),n=t.showSuccess,r=t.showError,i=(0,a.useState)({}),p=(0,s.Z)(i,2),v=p[0],g=p[1],y=(0,a.useState)("S"),b=(0,s.Z)(y,2),I=b[0],P=(b[1],(0,a.useState)("SAVE")),w=(0,s.Z)(P,2),x=w[0],_=(w[1],(0,o.s0)()),O=(0,o.UO)().id,C=parseInt(O||""),Z=isNaN(C)||C<=0,L=(0,a.useRef)(),V=(0,f.ft)(),T=E(C,{skip:Z,refetchOnMountOrArgChange:!0}),A=T.data,k=T.isLoading,D=(0,a.useState)(null),R=(0,s.Z)(D,2),M=(R[0],R[1],(0,a.useState)([])),j=(0,s.Z)(M,2),F=(j[0],j[1],(0,a.useState)(null)),W=(0,s.Z)(F,2),q=W[0],z=W[1],H=(0,a.useState)(null),G=(0,s.Z)(H,2),B=G[0],J=G[1],U=h(),Q=(0,s.Z)(U,2),Y=(Q[0],Q[1].isLoading),K=(0,f.Gt)("Invoice",{skip:!Z,refetchOnMountOrArgChange:Z}).data,X=((0,f.Gt)("VIN",{skip:Z,refetchOnMountOrArgChange:!Z}).data,(0,f.Gt)("VCI",{skip:Z,refetchOnMountOrArgChange:!Z}).data,(0,f.Rc)()),$=X.data,ee=X.isLoading,te=(0,f.lE)({}),ne=te.data,ae=te.isLoading,oe=(0,f.u2)(B,{skip:!B}),le=oe.data,re=oe.isFetching,ie=h(),ce=(0,s.Z)(ie,2),se=ce[0],de=ce[1].isLoading,me=S(),ue=(0,s.Z)(me,2),pe=ue[0],fe=ue[1].isLoading;(0,a.useEffect)((function(){g(A||Object.assign(Object.assign({},V),{date:(0,f.Hh)(new Date,!0),number:null===K||void 0===K?void 0:K.next_doc_id,loctyp:"PR"})),A&&J(A.vend_key)}),[A,K]),(0,a.useEffect)((function(){var e;le?(console.log(le),z(null===(e=le[0])||void 0===e?void 0:e.key)):z(null)}),[le]);return a.createElement(a.Fragment,null,a.createElement(l.Rm,{disableSaveBtn:["U","R","C"].includes(null===A||void 0===A?void 0:A.docstatus),baseRoute:"/invoice/vendorinvoice",description:"Invoice",id:C,data:v,isUpdating:de||fe||Y,ref:L,isLoading:k,onSubmit:function(e){return N(void 0,void 0,void 0,(0,c.Z)().mark((function t(){var a,o,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,l=Object.assign(Object.assign({},e),{date:(0,f.p6)(e.date,"yyyy-MM-dd"),loctyp:"PR",itemtyp_key:q,docstatus:I,action:x}),!Z){t.next=8;break}return t.next=5,se(Object.assign(Object.assign({},l),V)).unwrap();case 5:o=t.sent,t.next=11;break;case 8:return t.next=10,pe(Object.assign(Object.assign(Object.assign({},l),V),{key:null===A||void 0===A?void 0:A.key})).unwrap();case 10:o=t.sent;case 11:n("Success",o.detail),n("Success",o.detail),setTimeout((function(){_("/invoice/vendorinvoice")}),f.P7),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),r("An error occurred",(null===(a=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===a?void 0:a.detail)||"We couldn't save your post, try again!");case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))},renderForm:function(e,t,n){return a.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},a.createElement(l.Wi,{label:"Invoice Number",name:"number",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{useGrouping:!1,disabled:!0}}}),a.createElement(l.Wi,{label:"Invoice Date",name:"date",className:"col-12 md:col-6",useExplicit:!0,control:e,errors:n,leftSpan:4,rightSpan:6,convertValue:f.Hh,formItem:{component:m.f,componentProps:{showIcon:!0,dateFormat:"yy-mm-dd"}}}),a.createElement(l.Wi,{label:"Project",name:"proj_key",className:"col-12 md:col-6",control:e,errors:n,isLoading:ae,leftSpan:4,rightSpan:6,formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"name",optionValue:"key",filter:!0,filterBy:"name",options:ne}}}),a.createElement(l.Wi,{label:"Vendor",name:"vend_key",className:"col-12 md:col-6",control:e,errors:n,isLoading:ee,required:"Select a Vendor",leftSpan:4,rightSpan:6,useExplicit:!0,onChange:function(e){J(e.value)},formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"name",optionValue:"key",filter:!0,filterBy:"name",options:$}}}),a.createElement(l.Wi,{label:"Item Type",name:"itemtyp_key",control:e,errors:n,isLoading:re,className:"col-12 md:col-6",leftSpan:4,rightSpan:6,useExplicit:!0,onChange:function(e){z(e.value)},formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",options:le,value:q}}}),a.createElement(l.Wi,{label:"Invoice No",name:"invoice_no",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{maxLength:50}}}),a.createElement(l.Wi,{label:"Description",name:"descr",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{maxLength:50}}}),a.createElement("div",{className:"col-12 md:col-6"}))}}))},P=n(8356),w=n(6770),x=n(1002),_=n(9002),O=function(e,t,n,a){return new(n||(n=Promise))((function(o,l){function r(e){try{c(a.next(e))}catch(t){l(t)}}function i(e){try{c(a.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((a=a.apply(e,t||[])).next())}))};function C(e){var t=this,n=e.displayModal,o=e.customDiscard,r=(0,l.pm)(),i=r.showSuccess,p=r.showError,v=(0,a.useState)(!1),g=(0,s.Z)(v,2),y=g[0],E=g[1],b=(0,a.useState)("S"),S=(0,s.Z)(b,2),N=S[0],I=(S[1],(0,a.useState)("")),P=(0,s.Z)(I,2),w=(P[0],P[1],(0,a.useState)("SAVE")),C=(0,s.Z)(w,2),Z=C[0],L=(C[1],(0,a.useRef)()),V=(0,a.useState)({}),T=(0,s.Z)(V,2),A=T[0],k=(T[1],(0,f.ft)()),D=(0,a.useState)(null),R=(0,s.Z)(D,2),M=(R[0],R[1],(0,a.useState)("Online")),j=(0,s.Z)(M,2),F=j[0],W=(j[1],(0,f.Gt)("PYV",{refetchOnMountOrArgChange:!0})),q=W.data,z=(W.error,W.isFetching,(0,f.Rc)()),H=(z.data,z.isLoading,(0,f.Ii)({})),G=(H.data,H.isLoading,(0,f.sq)()),B=G.data,J=G.isFetching,U=h(),Q=(0,s.Z)(U,2),Y=Q[0],K=Q[1].isLoading;return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"Create New Vendor Invoice Without PO",visible:n,position:"center",modal:!0,style:{width:"70vw"},onHide:function(){return o()},draggable:!1,resizable:!1,closable:!0},a.createElement(l.Rm,{baseRoute:"/payment/vendorpayment",bottomControl:!0,data:A,hideHeader:!0,customDiscard:o,ref:L,isUpdating:K||y,onSubmit:function(e){return O(t,void 0,void 0,(0,c.Z)().mark((function t(){var n,a,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=Object.assign(Object.assign({},e),{number:null===q||void 0===q?void 0:q.next_doc_id,date:(0,f.p6)(e.date,"yyyy-MM-dd"),docstatus:N,docid:"PYV",chqdate:e.chqdate&&(0,f.p6)(e.chqdate,"yyyy-MM-dd"),action:Z,modeofpay:F}),console.log(a),t.next=5,Y(Object.assign(Object.assign({},a),k)).unwrap();case 5:l=t.sent,i("Success",l.detail),E(!0),setTimeout((function(){o()}),f.P7),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),p("An error occurred",(null===(n=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===n?void 0:n.detail)||"We couldn't save your post, try again!");case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))},renderForm:function(e,t,n,o,r){return a.createElement("div",null,a.createElement("div",{style:{border:"2px solid gray",padding:"5px 20px"}},a.createElement("div",{className:"flex"},a.createElement(l.Wi,{label:"Invoice No",name:"invoice_no",className:"col-12 md:col-6 pl-0",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{maxLength:25}}}),a.createElement(l.Wi,{label:"Creation Method",name:"invoice_no",className:"col-12 md:col-6 pl-0",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{maxLength:25}}})),a.createElement("div",{className:"flex"},a.createElement(l.Wi,{label:"Company Name",name:"company_name",className:"col-12 md:col-6 pl-0",required:!0,control:e,errors:n,isLoading:J,leftSpan:4,rightSpan:6,formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"name",optionValue:"id",filter:!0,filterBy:"name",options:B}}}),a.createElement(l.Wi,{label:"Project Name",name:"invoice_no",className:"col-12 md:col-6 pl-0",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{maxLength:25}}}))),a.createElement("div",{style:{border:"2px solid gray",margin:"10px auto"}},a.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},a.createElement(l.Wi,{label:"Date",name:"date",useExplicit:!0,control:e,errors:n,leftSpan:4,rightSpan:6,required:!0,className:"col-12 md:col-6 pl-0",convertValue:f.Hh,formItem:{component:m.f,componentProps:{showIcon:!0,dateFormat:"dd-mm-yy"}}}),a.createElement(l.Wi,{label:"Item Type",name:"vend_key",leftSpan:4,rightSpan:6,className:"col-12 md:col-6 pl-0",control:e,errors:n,formItem:{component:d.o,componentProps:{maxLength:25}}}),a.createElement(l.Wi,{label:"Vendor Name",name:"vend_key",leftSpan:4,rightSpan:6,className:"col-12 md:col-6 pl-0",control:e,errors:n,formItem:{component:d.o,componentProps:{maxLength:25}}}),a.createElement(l.Wi,{label:"Voucher No",name:"refnumber",leftSpan:4,rightSpan:6,className:"col-12 md:col-6 pl-0",control:e,errors:n,formItem:{component:d.o,componentProps:{maxLength:25}}}),a.createElement("div",{className:"flex col-12",style:{paddingLeft:0}},a.createElement("div",{className:"col-6"},a.createElement("div",{style:{marginBottom:15}},"Invoice Description"),a.createElement(l.Wi,{label:"",name:"refnumber",leftSpan:1,rightSpan:10,control:e,errors:n,formItem:{component:x.g,componentProps:{maxLength:25,rows:6}}})),a.createElement("div",{className:"col-6"},a.createElement(l.Wi,{label:"Amount",name:"refnumber",leftSpan:4,rightSpan:6,control:e,errors:n,formItem:{component:d.o,componentProps:{maxLength:25}}}),a.createElement("br",null),a.createElement(l.Wi,{label:"TDS",name:"refnumber",leftSpan:4,rightSpan:6,control:e,errors:n,formItem:{component:d.o,componentProps:{maxLength:25}}}),a.createElement("br",null),a.createElement(l.Wi,{label:"GST",name:"refnumber",leftSpan:4,rightSpan:6,control:e,errors:n,formItem:{component:d.o,componentProps:{maxLength:25}}}))),a.createElement(l.Wi,{label:"Notes",name:"refnumber",leftSpan:2,rightSpan:8,className:"col-12 md:col-12 pl-0",control:e,errors:n,formItem:{component:d.o,componentProps:{maxLength:25}}}))))}})))}var Z=function(e,t,n,a){return new(n||(n=Promise))((function(o,l){function r(e){try{c(a.next(e))}catch(t){l(t)}}function i(e){try{c(a.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((a=a.apply(e,t||[])).next())}))};function L(e){var t=this,n=e.displayModal,o=e.customDiscard,r=(0,l.pm)(),i=r.showSuccess,m=r.showError,u=(0,a.useState)(!1),p=(0,s.Z)(u,2),v=p[0],g=p[1],y=(0,a.useState)("S"),E=(0,s.Z)(y,2),b=E[0],S=(E[1],(0,a.useState)("")),N=(0,s.Z)(S,2),I=(N[0],N[1],(0,a.useState)("SAVE")),P=(0,s.Z)(I,2),w=P[0],x=(P[1],(0,a.useRef)()),O=(0,a.useState)({}),C=(0,s.Z)(O,2),L=C[0],V=(C[1],(0,f.ft)()),T=(0,f.Gt)("PYV",{refetchOnMountOrArgChange:!0}),A=T.data,k=(T.error,T.isFetching,h()),D=(0,s.Z)(k,2),R=D[0],M=D[1].isLoading;return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"Additional Invoice Detail",visible:n,position:"center",modal:!0,style:{width:"40vw"},onHide:function(){return o()},draggable:!1,resizable:!1,closable:!0},a.createElement(l.Rm,{baseRoute:"/payment/vendorpayment",bottomControl:!0,data:L,hideHeader:!0,customDiscard:o,ref:x,isUpdating:M||v,onSubmit:function(e){return Z(t,void 0,void 0,(0,c.Z)().mark((function t(){var n,a,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=Object.assign(Object.assign({},e),{number:null===A||void 0===A?void 0:A.next_doc_id,date:(0,f.p6)(e.date,"yyyy-MM-dd"),docstatus:b,docid:"PYV",chqdate:e.chqdate&&(0,f.p6)(e.chqdate,"yyyy-MM-dd"),action:w}),console.log(a),t.next=5,R(Object.assign(Object.assign({},a),V)).unwrap();case 5:l=t.sent,i("Success",l.detail),g(!0),setTimeout((function(){o()}),f.P7),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),m("An error occurred",(null===(n=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===n?void 0:n.detail)||"We couldn't save your post, try again!");case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))},renderForm:function(e,t,n,o,r){return a.createElement(a.Fragment,null,a.createElement("div",{className:"pl-4 pt-4"},a.createElement(l.Wi,{label:"Voucher No",name:"refnumber",leftSpan:3,rightSpan:6,required:!0,control:e,errors:n,formItem:{component:d.o,componentProps:{maxLength:25}}}),a.createElement(l.Wi,{label:"Notes",name:"notes",leftSpan:3,rightSpan:6,control:e,errors:n,formItem:{component:d.o,componentProps:{maxLength:25}}})))},saveBtnLabel:"Ok",discardBtnLabel:"Skip"})))}function V(e){var t=e.displayModal,n=e.poId,o=e.customDiscard,r=E(n,{refetchOnMountOrArgChange:!0}),i=r.data,c=r.isFetching;return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"View PO",visible:t,position:"center",modal:!0,style:{width:"70vw"},onHide:function(){return o()},closeOnEscape:!0,draggable:!1,resizable:!1,closable:!0},a.createElement(l.Rm,{baseRoute:"/payment/vendorpayment",viewMode:!0,id:n,bottomControl:!0,data:i,hideHeader:!0,customDiscard:o,isLoading:c,onSubmit:function(){},renderForm:function(e,t,n){var o,r,c;return a.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},a.createElement(l.Wi,{label:"PO Number",name:"number",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{useGrouping:!1,value:null===i||void 0===i?void 0:i.number}}}),a.createElement(l.Wi,{label:"PO Date",name:"date",className:"col-12 md:col-6",useExplicit:!0,control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{value:null===i||void 0===i?void 0:i.date}}}),a.createElement(l.Wi,{label:"Project",name:"proj_key",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{value:null===(o=null===i||void 0===i?void 0:i.project)||void 0===o?void 0:o.name}}}),a.createElement(l.Wi,{label:"Vendor",name:"vend_key",className:"col-12 md:col-6",control:e,errors:n,required:"Select a Vendor",leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{value:null===(r=null===i||void 0===i?void 0:i.vendor)||void 0===r?void 0:r.name}}}),a.createElement(l.Wi,{label:"Item Type",name:"itemtyp_key",control:e,errors:n,className:"col-12 md:col-6",leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{value:null===(c=null===i||void 0===i?void 0:i.itemtype)||void 0===c?void 0:c.descr}}}),a.createElement(l.Wi,{label:"Description",name:"descr",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{value:null===i||void 0===i?void 0:i.delivnotes}}}),a.createElement("div",{className:"col-12 md:col-6"}))}})))}function T(e){var t=e.displayModal,n=e.customDiscard,o=(0,f.JB)().data,r=(0,a.useState)(!1),i=(0,s.Z)(r,2),c=i[0],d=i[1],m=(0,a.useState)(!1),v=(0,s.Z)(m,2),g=v[0],h=v[1],E=(0,a.useState)(null),S=(0,s.Z)(E,2),N=S[0],I=S[1],x=(0,a.useState)(null),O=(0,s.Z)(x,2),C=O[0],Z=O[1],T=(0,a.useState)(null),A=(0,s.Z)(T,2),k=(A[0],A[1],(0,a.useState)([])),D=(0,s.Z)(k,2),R=D[0],M=D[1],j=b({page:1,size:100,project:N,status:C}),F=j.data,W=j.isFetching,q=y(),z=(0,s.Z)(q,2),H=z[0],G=z[1].isLoading,B=(0,f.sq)(),J=B.data;B.isFetching;(0,a.useEffect)((function(){o&&M([{key:null,name:"All"}].concat((0,p.Z)(o)))}),[o]);var U=function(){d(!1),h(!1)};return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"Generate Invoice From PO",visible:t,position:"center",modal:!0,style:{width:"80vw"},onHide:function(){return n()},draggable:!1,resizable:!1,closable:!0},a.createElement(a.Fragment,null,a.createElement(P.i,null),a.createElement("div",{style:{display:"flex"}},a.createElement("div",{className:"field col-6"},a.createElement("label",{className:"col-4"},"Project Name"),a.createElement(u.L,{style:{width:"30%"},optionLabel:"name",optionValue:"key",value:N,onChange:function(e){I(e.value)},options:R,placeholder:"All"})),a.createElement("div",{className:"field col-6"},a.createElement("div",{className:"field"},a.createElement("label",{className:"col-3"},"Company Name"),a.createElement(u.L,{style:{width:"30%"},value:C,placeholder:"All",onChange:function(e){Z(e.value)},optionLabel:"id",optionValue:"id",options:J})))),a.createElement("div",{className:"col-12 ",style:{height:"calc(100% - 183px)",minHeight:200}},a.createElement(l.PS,{hideActionColumn:!0,baseRoute:"/invoice/vendorinvoice",description:"PO's Under Project",hideAddButton:!0,allowFilters:!1,isLoading:W||G,data:null===F||void 0===F?void 0:F.results,newTable:!0,showHeader:!0,deleteAction:function(e){return H(e).unwrap()}},a.createElement(l._P,{width:"5%",field:"sno",header:"S.No",filteringType:"number"}),a.createElement(l._P,{field:"date",header:"PO Date",filteringType:"date"}),a.createElement(l._P,{field:"text",header:"PO No",filteringType:"text"}),a.createElement(l._P,{field:"text",header:"Item Type",filteringType:"text"}),a.createElement(l._P,{field:"vendor.name",header:"Vendor Name",filteringType:"text"}),a.createElement(l._P,{field:"amount",header:"Amount (Rs)",filteringType:"text"}),a.createElement(l._P,{width:"20%",field:"makepayment",header:"",type:"custom",displayValueGetter:function(e){return a.createElement("div",{style:{display:"flex"}},a.createElement(w.z,{label:"View",style:{fontSize:16,height:30},onClick:function(){d(!0)}}),a.createElement(w.z,{style:{marginLeft:10,fontSize:16,height:30},label:"Generate",onClick:function(){h(!0)}}))}}))),a.createElement("div",null,a.createElement(w.z,{label:"Close",className:"p-button-plain",onClick:function(){n(!0)}})))),a.createElement(V,{poId:1001,displayModal:c,customDiscard:U}),a.createElement(L,{displayModal:g,customDiscard:U}))}function A(e){var t=e.displayModal,n=e.poId,o=e.customDiscard,r=E(n,{refetchOnMountOrArgChange:!0});r.data,r.isFetching;return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"View Invoice",visible:t,position:"center",modal:!0,style:{width:"70vw"},onHide:function(){return o()},closeOnEscape:!0,draggable:!1,resizable:!1,closable:!0},a.createElement("div",{className:"flex col-12"},a.createElement("div",{className:"col-6",style:{fontSize:20}},a.createElement("strong",null,"Ajantha Hardwares")),a.createElement("div",{className:"col-6"})),a.createElement(l.PS,{baseRoute:"/purchase",description:"",data:[{},{},{},{},{},{},{},{},{},{},{},{}],newTable:!0,tableLayoutClass:"h-full",allowFilters:!1,hideActionColumn:!0,gridProps:{allowAdd:!1}},a.createElement(l._P,{field:"sno",header:"S.No",type:"number",width:"5%"}),a.createElement(l._P,{field:"sub_type",header:"Item Sub Type",type:"text"}),a.createElement(l._P,{field:"descr",header:"Item Descr",type:"text"}),a.createElement(l._P,{field:"model_no",header:"Brand Name",type:"text"}),a.createElement(l._P,{field:"model_no",header:"Model No",type:"text"}),a.createElement(l._P,{field:"qty",header:"Quantity",type:"number"}),a.createElement(l._P,{field:"qty",header:"UOM",type:"number"}),a.createElement(l._P,{field:"netamt",header:"Amount",type:"currency",defaultValue:0}))))}var k=function(e){var t=(0,a.useState)(1),n=(0,s.Z)(t,2),o=n[0],r=n[1],i=(0,a.useState)(f.IV),c=(0,s.Z)(i,2),d=c[0],m=c[1],v=(0,f.JB)().data,g=(0,a.useState)(!1),h=(0,s.Z)(g,2),E=h[0],S=h[1],N=(0,a.useState)(!1),I=(0,s.Z)(N,2),x=I[0],_=I[1],O=(0,a.useState)(!1),Z=(0,s.Z)(O,2),L=Z[0],V=Z[1],k=(0,a.useState)(null),D=(0,s.Z)(k,2),R=D[0],M=D[1],j=(0,a.useState)(null),F=(0,s.Z)(j,2),W=F[0],q=F[1],z=(0,a.useState)(null),H=(0,s.Z)(z,2),G=H[0],B=H[1],J=(0,a.useState)([]),U=(0,s.Z)(J,2),Q=U[0],Y=U[1],K=b({page:o,size:d,project:R,status:W}),X=K.data,$=K.isFetching,ee=y(),te=(0,s.Z)(ee,2),ne=te[0],ae=te[1].isLoading,oe=(0,f.sq)(),le=oe.data;oe.isFetching;(0,a.useEffect)((function(){v&&Y([{key:null,name:"All"}].concat((0,p.Z)(v)))}),[v]);var re=function(){S(!1),_(!1),V(!1)};return a.createElement(a.Fragment,null,a.createElement(P.i,null),a.createElement("div",{style:{display:"flex"}},a.createElement("div",{className:"field col-6"},a.createElement("label",{className:"col-3"},"Project Name"),a.createElement(u.L,{style:{width:"30%"},optionLabel:"name",optionValue:"key",value:R,onChange:function(e){M(e.value)},options:Q,placeholder:"All"})),a.createElement("div",{className:"field col-6"},a.createElement("div",{className:"field"},a.createElement("label",{className:"col-3"},"Company Name"),a.createElement(u.L,{style:{width:"30%"},value:W,placeholder:"All",onChange:function(e){q(e.value)},optionLabel:"id",optionValue:"id",options:le})))),a.createElement("div",{className:"col-12 ",style:{height:"calc(100% - 183px)",minHeight:200}},a.createElement(l.PS,{enableView:!0,onViewClick:function(e){console.log(e),B(e),S(!0)},pagination:{pageSize:d,loading:$,currentPage:o,total:null===X||void 0===X?void 0:X.count,onChange:function(e,t){r(e),m(t)}},baseRoute:"/invoice/vendorinvoice",description:"Item Vendor Invoice",hideAddButton:!0,allowFilters:!1,isLoading:$||ae,data:null===X||void 0===X?void 0:X.results,newTable:!0,showHeader:!0,deleteAction:function(e){return ne(e).unwrap()}},a.createElement(l._P,{width:"5%",field:"sno",header:"S.No",filteringType:"number"}),a.createElement(l._P,{field:"number",header:"Invoice No",filteringType:"number"}),a.createElement(l._P,{field:"date",header:"Date",filteringType:"date"}),a.createElement(l._P,{field:"vendor.name",header:"Vendor Name",filteringType:"text"}),a.createElement(l._P,{field:"amount",header:"Amount (Rs)",filteringType:"text"}),a.createElement(l._P,{field:"status.descr",header:"Payment Status",filteringType:"text"}),a.createElement(l._P,{field:"created_staus",header:"Type",defaultValue:"Generated",filteringType:"text"}))),a.createElement("div",null,a.createElement(w.z,{label:"Generate Invoice",className:"p-button-plain",style:{margin:"0 20px"},onClick:function(){V(!0)}}),a.createElement(w.z,{label:"Create Direct Invoice",className:"p-button-plain",onClick:function(){_(!0)}})),a.createElement(A,{displayModal:E,poId:G,customDiscard:re}),a.createElement(C,{displayModal:x,customDiscard:re}),a.createElement(T,{displayModal:L,customDiscard:re}))},D=a.createElement(o.AW,{path:"vendorinvoice"},a.createElement(o.AW,{path:"new",element:a.createElement(I,null)}),a.createElement(o.AW,{path:":id/edit",element:a.createElement(I,null)}),a.createElement(o.AW,{index:!0,element:a.createElement(k,null)})),R="/transaction/contractor/invoice/",M=f.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listInvoice:e.query({query:function(e){var t=e.page,n=e.size,a=e.project,o=e.contractor;return{url:(0,f.DS)(R,"?page=".concat(t||1,"&page_size=").concat(n||f.IV).concat(a?"&project=".concat(a):"").concat(o?"&contractor=".concat(o):""))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.key;return{type:f.pJ.VENDOR_INVOICE,key:t}}))),[{type:f.pJ.VENDOR_INVOICE,id:"LIST"}]):[{type:f.pJ.VENDOR_INVOICE,id:"LIST"}]}}),addInvoice:e.mutation({query:function(e){return{url:R,method:"POST",body:e}},invalidatesTags:[{type:f.pJ.VENDOR_INVOICE,id:"LIST"}]}),getInvoice:e.query({query:function(e){return"".concat(R).concat(e)},providesTags:function(e,t,n){return[{type:f.pJ.VENDOR_INVOICE,id:n}]}}),updateInvoice:e.mutation({query:function(e){var t=e;return console.log(t),{url:"".concat(R),method:"POST",body:t}},invalidatesTags:function(e){return[{type:f.pJ.VENDOR_INVOICE,id:null===e||void 0===e?void 0:e.key}]}}),deleteInvoice:e.mutation({query:function(e){return{url:"".concat(R).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:f.pJ.VENDOR_INVOICE,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),j=M.useAddInvoiceMutation,F=M.useDeleteInvoiceMutation,W=M.useGetInvoiceQuery,q=M.useListInvoiceQuery,z=M.useUpdateInvoiceMutation,H=(M.useGetErrorProneQuery,M.endpoints.getInvoice,function(e,t,n,a){return new(n||(n=Promise))((function(o,l){function r(e){try{c(a.next(e))}catch(t){l(t)}}function i(e){try{c(a.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((a=a.apply(e,t||[])).next())}))}),G=function(e){var t=(0,l.pm)(),n=t.showSuccess,r=t.showError,i=(0,a.useState)({}),p=(0,s.Z)(i,2),v=p[0],g=p[1],h=(0,a.useState)("S"),y=(0,s.Z)(h,2),E=y[0],b=(y[1],(0,a.useState)("SAVE")),S=(0,s.Z)(b,2),N=S[0],I=(S[1],(0,o.s0)()),P=(0,o.UO)().id,w=parseInt(P||""),x=isNaN(w)||w<=0,_=(0,a.useRef)(),O=(0,f.ft)(),C=W(w,{skip:x,refetchOnMountOrArgChange:!0}),Z=C.data,L=C.isLoading,V=(0,a.useState)(null),T=(0,s.Z)(V,2),A=(T[0],T[1],(0,a.useState)([])),k=(0,s.Z)(A,2),D=(k[0],k[1],(0,a.useState)(null)),R=(0,s.Z)(D,2),M=R[0],F=R[1],q=(0,a.useState)(null),G=(0,s.Z)(q,2),B=G[0],J=G[1],U=j(),Q=(0,s.Z)(U,2),Y=(Q[0],Q[1].isLoading),K=(0,f.Gt)("Invoice",{skip:!x,refetchOnMountOrArgChange:x}).data,X=((0,f.Gt)("VCI",{skip:x,refetchOnMountOrArgChange:!x}).data,(0,f.rC)()),$=X.data,ee=X.isLoading,te=(0,f.lE)({}),ne=te.data,ae=te.isLoading,oe=(0,f.u2)(B,{skip:!B}),le=oe.data,re=oe.isFetching,ie=j(),ce=(0,s.Z)(ie,2),se=ce[0],de=ce[1].isLoading,me=z(),ue=(0,s.Z)(me,2),pe=ue[0],fe=ue[1].isLoading;(0,a.useEffect)((function(){g(Z||Object.assign(Object.assign({},O),{date:(0,f.Hh)(new Date,!0),number:null===K||void 0===K?void 0:K.next_doc_id,loctyp:"PR"})),Z&&J(Z.vend_key)}),[Z,K]),(0,a.useEffect)((function(){var e;le?(console.log(le),F(null===(e=le[0])||void 0===e?void 0:e.key)):F(null)}),[le]);return a.createElement(a.Fragment,null,a.createElement(l.Rm,{disableSaveBtn:["U","R","C"].includes(null===Z||void 0===Z?void 0:Z.docstatus),baseRoute:"/invoice/contractorinvoice",description:"Invoice",id:w,data:v,isUpdating:de||fe||Y,ref:_,isLoading:L,onSubmit:function(e){return H(void 0,void 0,void 0,(0,c.Z)().mark((function t(){var a,o,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,l=Object.assign(Object.assign({},e),{date:(0,f.p6)(e.date,"yyyy-MM-dd"),loctyp:"PR",itemtyp_key:M,docstatus:E,action:N}),!x){t.next=8;break}return t.next=5,se(Object.assign(Object.assign({},l),O)).unwrap();case 5:o=t.sent,t.next=11;break;case 8:return t.next=10,pe(Object.assign(Object.assign(Object.assign({},l),O),{key:null===Z||void 0===Z?void 0:Z.key})).unwrap();case 10:o=t.sent;case 11:n("Success",o.detail),n("Success",o.detail),setTimeout((function(){I("/invoice/contractorinvoice")}),f.P7),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),r("An error occurred",(null===(a=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===a?void 0:a.detail)||"We couldn't save your post, try again!");case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))},renderForm:function(e,t,n){return a.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},a.createElement(l.Wi,{label:"Invoice Number",name:"number",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{useGrouping:!1,disabled:!0}}}),a.createElement(l.Wi,{label:"Invoice Date",name:"date",className:"col-12 md:col-6",useExplicit:!0,control:e,errors:n,leftSpan:4,rightSpan:6,convertValue:f.Hh,formItem:{component:m.f,componentProps:{showIcon:!0,dateFormat:"yy-mm-dd"}}}),a.createElement(l.Wi,{label:"Project",name:"proj_key",className:"col-12 md:col-6",control:e,errors:n,isLoading:ae,leftSpan:4,rightSpan:6,formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"name",optionValue:"key",filter:!0,filterBy:"name",options:ne}}}),a.createElement(l.Wi,{label:"Contractor",name:"vend_key",className:"col-12 md:col-6",control:e,errors:n,isLoading:ee,required:"Select a Contractor",leftSpan:4,rightSpan:6,useExplicit:!0,onChange:function(e){J(e.value)},formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"name",optionValue:"key",filter:!0,filterBy:"name",options:$}}}),a.createElement(l.Wi,{label:"Item Type",name:"itemtyp_key",control:e,errors:n,isLoading:re,className:"col-12 md:col-6",leftSpan:4,rightSpan:6,useExplicit:!0,onChange:function(e){F(e.value)},formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",options:le,value:M}}}),a.createElement(l.Wi,{label:"Invoice No",name:"invoice_no",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{maxLength:50}}}),a.createElement(l.Wi,{label:"Description",name:"descr",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{maxLength:50}}}),a.createElement("div",{className:"col-12 md:col-6"}))}}))},B=function(e,t,n,a){return new(n||(n=Promise))((function(o,l){function r(e){try{c(a.next(e))}catch(t){l(t)}}function i(e){try{c(a.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((a=a.apply(e,t||[])).next())}))};function J(e){var t=this,n=e.displayModal,o=e.customDiscard,r=(0,l.pm)(),i=r.showSuccess,p=r.showError,v=(0,a.useState)(!1),g=(0,s.Z)(v,2),h=g[0],y=g[1],E=(0,a.useState)("S"),b=(0,s.Z)(E,2),S=b[0],N=(b[1],(0,a.useState)("")),I=(0,s.Z)(N,2),P=(I[0],I[1],(0,a.useState)("SAVE")),w=(0,s.Z)(P,2),O=w[0],C=(w[1],(0,a.useRef)()),Z=(0,a.useState)({}),L=(0,s.Z)(Z,2),V=L[0],T=(L[1],(0,f.ft)()),A=(0,a.useState)(null),k=(0,s.Z)(A,2),D=(k[0],k[1],(0,a.useState)("Online")),R=(0,s.Z)(D,2),M=R[0],F=(R[1],(0,f.Gt)("PYV",{refetchOnMountOrArgChange:!0})),W=F.data,q=(F.error,F.isFetching,(0,f.sq)()),z=q.data,H=q.isFetching,G=j(),J=(0,s.Z)(G,2),U=J[0],Q=J[1].isLoading;return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"Create New Contractor Invoice Without PO",visible:n,position:"center",modal:!0,style:{width:"70vw"},onHide:function(){return o()},draggable:!1,resizable:!1,closable:!0},a.createElement(l.Rm,{baseRoute:"/payment/contractorpayment",bottomControl:!0,data:V,hideHeader:!0,customDiscard:o,ref:C,isUpdating:Q||h,onSubmit:function(e){return B(t,void 0,void 0,(0,c.Z)().mark((function t(){var n,a,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=Object.assign(Object.assign({},e),{number:null===W||void 0===W?void 0:W.next_doc_id,date:(0,f.p6)(e.date,"yyyy-MM-dd"),docstatus:S,docid:"PYV",chqdate:e.chqdate&&(0,f.p6)(e.chqdate,"yyyy-MM-dd"),action:O,modeofpay:M}),console.log(a),t.next=5,U(Object.assign(Object.assign({},a),T)).unwrap();case 5:l=t.sent,i("Success",l.detail),y(!0),setTimeout((function(){o()}),f.P7),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),p("An error occurred",(null===(n=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===n?void 0:n.detail)||"We couldn't save your post, try again!");case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))},renderForm:function(e,t,n,o,r){return a.createElement("div",null,a.createElement("div",{style:{border:"2px solid gray",padding:"5px 20px"}},a.createElement("div",{className:"flex"},a.createElement(l.Wi,{label:"Invoice No",name:"invoice_no",className:"col-12 md:col-6 pl-0",control:e,errors:n,leftSpan:4,rightSpan:6,required:!0,formItem:{component:d.o,componentProps:{maxLength:25}}}),a.createElement(l.Wi,{label:"Creation Method",name:"invoice_no",className:"col-12 md:col-6 pl-0",control:e,errors:n,leftSpan:4,rightSpan:6,required:!0,formItem:{component:d.o,componentProps:{maxLength:25}}})),a.createElement("div",{className:"flex"},a.createElement(l.Wi,{label:"Company Name",name:"company_name",className:"col-12 md:col-6 pl-0",required:!0,control:e,errors:n,isLoading:H,leftSpan:4,rightSpan:6,formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"name",optionValue:"id",filter:!0,filterBy:"name",options:z}}}),a.createElement(l.Wi,{label:"Project Name",name:"invoice_no",className:"col-12 md:col-6 pl-0",control:e,errors:n,leftSpan:4,rightSpan:6,required:!0,formItem:{component:d.o,componentProps:{maxLength:25}}}))),a.createElement("div",{style:{border:"2px solid gray",margin:"10px auto"}},a.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},a.createElement(l.Wi,{label:"Date",name:"date",useExplicit:!0,control:e,errors:n,leftSpan:4,rightSpan:6,required:!0,className:"col-12 md:col-6 pl-0",convertValue:f.Hh,formItem:{component:m.f,componentProps:{showIcon:!0,dateFormat:"dd-mm-yy"}}}),a.createElement(l.Wi,{label:"Contractor Name",name:"vend_key",leftSpan:4,rightSpan:6,required:!0,className:"col-12 md:col-6 pl-0",control:e,errors:n,formItem:{component:d.o,componentProps:{maxLength:25}}}),a.createElement("div",{className:"flex col-12",style:{paddingLeft:0}},a.createElement("div",{className:"col-6"},a.createElement("div",{style:{marginBottom:15}},"Invoice Description"),a.createElement(l.Wi,{label:"",name:"refnumber",leftSpan:1,rightSpan:10,control:e,errors:n,formItem:{component:x.g,componentProps:{maxLength:25,rows:4}}})),a.createElement("div",{className:"col-6"},a.createElement(l.Wi,{label:"Amount",name:"refnumber",leftSpan:4,rightSpan:6,control:e,errors:n,formItem:{component:d.o,componentProps:{maxLength:25}}}),a.createElement("br",null),a.createElement(l.Wi,{label:"TDS",name:"refnumber",leftSpan:4,rightSpan:6,control:e,errors:n,formItem:{component:d.o,componentProps:{maxLength:25}}}))))))}})))}function U(e){var t=e.displayModal,n=e.customDiscard,o=(0,l.pm)(),r=(o.showSuccess,o.showError,(0,a.useState)(!1)),i=(0,s.Z)(r,2),c=(i[0],i[1],(0,a.useState)("S")),d=(0,s.Z)(c,2),m=(d[0],d[1],(0,a.useState)("")),u=(0,s.Z)(m,2),p=(u[0],u[1],(0,a.useState)("SAVE")),v=(0,s.Z)(p,2),g=(v[0],v[1],(0,a.useRef)(),(0,a.useState)({})),h=(0,s.Z)(g,2),y=(h[0],h[1],(0,f.ft)(),(0,f.Gt)("PYV",{refetchOnMountOrArgChange:!0})),E=(y.data,y.error,y.isFetching,j()),b=(0,s.Z)(E,2);b[0],b[1].isLoading;return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"Success",visible:t,position:"center",modal:!0,style:{width:"30vw"},onHide:function(){return n()},draggable:!1,resizable:!1,closable:!0},a.createElement("h3",null,"Invoice Generated Successfully")))}function Q(e){var t=e.displayModal,n=e.poId,o=e.customDiscard,r=W(n,{refetchOnMountOrArgChange:!0}),i=r.data,c=r.isFetching;return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"View PO",visible:t,position:"center",modal:!0,style:{width:"70vw"},onHide:function(){return o()},closeOnEscape:!0,draggable:!1,resizable:!1,closable:!0},a.createElement(l.Rm,{baseRoute:"/payment/contractorpayment",viewMode:!0,id:n,bottomControl:!0,data:i,hideHeader:!0,customDiscard:o,isLoading:c,onSubmit:function(){},renderForm:function(e,t,n){var o,r,c;return a.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},a.createElement(l.Wi,{label:"PO Number",name:"number",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{useGrouping:!1,value:null===i||void 0===i?void 0:i.number}}}),a.createElement(l.Wi,{label:"PO Date",name:"date",className:"col-12 md:col-6",useExplicit:!0,control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{value:null===i||void 0===i?void 0:i.date}}}),a.createElement(l.Wi,{label:"Project",name:"proj_key",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{value:null===(o=null===i||void 0===i?void 0:i.project)||void 0===o?void 0:o.name}}}),a.createElement(l.Wi,{label:"Contractor",name:"vend_key",className:"col-12 md:col-6",control:e,errors:n,required:"Select a Contractor",leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{value:null===(r=null===i||void 0===i?void 0:i.contractor)||void 0===r?void 0:r.name}}}),a.createElement(l.Wi,{label:"Item Type",name:"itemtyp_key",control:e,errors:n,className:"col-12 md:col-6",leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{value:null===(c=null===i||void 0===i?void 0:i.itemtype)||void 0===c?void 0:c.descr}}}),a.createElement(l.Wi,{label:"Description",name:"descr",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{value:null===i||void 0===i?void 0:i.delivnotes}}}),a.createElement("div",{className:"col-12 md:col-6"}))}})))}function Y(e){var t=e.displayModal,n=e.customDiscard,o=(0,f.JB)().data,r=(0,a.useState)(!1),i=(0,s.Z)(r,2),c=i[0],m=i[1],v=(0,a.useState)(!1),g=(0,s.Z)(v,2),h=g[0],y=g[1],E=(0,a.useState)(null),b=(0,s.Z)(E,2),S=b[0],N=b[1],I=(0,a.useState)(null),x=(0,s.Z)(I,2),O=x[0],C=x[1],Z=(0,a.useState)(null),L=(0,s.Z)(Z,2),V=(L[0],L[1],(0,a.useState)([])),T=(0,s.Z)(V,2),A=T[0],k=T[1],D=q({page:1,size:100,project:S,status:O}),R=D.data,M=D.isFetching,j=F(),W=(0,s.Z)(j,2),z=W[0],H=W[1].isLoading,G=(0,f.sq)(),B=G.data;G.isFetching;(0,a.useEffect)((function(){o&&k([{key:null,name:"All"}].concat((0,p.Z)(o)))}),[o]);var J=function(){m(!1),y(!1)};return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"Generate Invoice From Contract",visible:t,position:"center",modal:!0,style:{width:"80vw"},onHide:function(){return n()},draggable:!1,resizable:!1,closable:!0},a.createElement(a.Fragment,null,a.createElement(P.i,null),a.createElement("div",{style:{display:"flex"}},a.createElement("div",{className:"field col-6"},a.createElement("label",{className:"col-4"},"Project Name"),a.createElement(u.L,{style:{width:"40%"},optionLabel:"name",optionValue:"key",value:S,onChange:function(e){N(e.value)},options:A,placeholder:"All"})),a.createElement("div",{className:"field col-6"},a.createElement("div",{className:"field"},a.createElement("label",{className:"col-3"},"Company Name"),a.createElement(u.L,{style:{width:"30%"},value:O,placeholder:"All",onChange:function(e){C(e.value)},optionLabel:"id",optionValue:"id",options:B})))),a.createElement("div",{style:{display:"flex"}},a.createElement("div",{className:"field col-4"},a.createElement("label",{className:"col-5"},"Contractor Name"),a.createElement(u.L,{style:{width:"50%"},optionLabel:"name",optionValue:"key",value:S,onChange:function(e){N(e.value)},options:A,placeholder:"All"})),a.createElement("div",{className:"field col-4"},a.createElement("label",{className:"col-4"},"Contract ID"),a.createElement(u.L,{style:{width:"60%"},value:O,placeholder:"All",onChange:function(e){C(e.value)},optionLabel:"descr",optionValue:"key",options:[{key:null,descr:"All"},{key:"S",descr:"Saved"},{key:"U",descr:"Submitted"},{key:"C",descr:"Cancelled"}]})),a.createElement("div",{className:"field col-4"},a.createElement("label",{className:"col-5"},"Company Name"),a.createElement(d.o,{style:{width:"50%"},disabled:!0}))),a.createElement("div",{className:"col-12 ",style:{height:"calc(100% - 183px)",minHeight:200}},a.createElement(l.PS,{hideActionColumn:!0,baseRoute:"/invoice/contractorinvoice",description:"Milestones created under Contract",hideAddButton:!0,allowFilters:!1,isLoading:M||H,data:null===R||void 0===R?void 0:R.results,newTable:!0,showHeader:!0,deleteAction:function(e){return z(e).unwrap()}},a.createElement(l._P,{width:"5%",field:"sno",header:"S.No",filteringType:"number"}),a.createElement(l._P,{field:"text",header:"Milestone Description",filteringType:"text"}),a.createElement(l._P,{field:"amount",header:"Invoice Amount (Rs)",filteringType:"text"}),a.createElement(l._P,{field:"tds",header:"TDS (Rs)",filteringType:"text"}),a.createElement(l._P,{width:"20%",field:"makepayment",header:"",type:"custom",displayValueGetter:function(e){return a.createElement("div",{style:{display:"flex"}},a.createElement(w.z,{style:{marginLeft:10,fontSize:16,height:30},label:"Generate",onClick:function(){y(!0)}}))}}))),a.createElement("div",null,a.createElement(w.z,{label:"Close",className:"p-button-plain",onClick:function(){n(!0)}})))),a.createElement(Q,{poId:1001,displayModal:c,customDiscard:J}),a.createElement(U,{displayModal:h,customDiscard:J}))}function K(e){var t=e.displayModal,n=e.poId,o=e.customDiscard,r=W(n,{refetchOnMountOrArgChange:!0});r.data,r.isFetching;return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"View Invoice",visible:t,position:"center",modal:!0,style:{width:"70vw"},onHide:function(){return o()},closeOnEscape:!0,draggable:!1,resizable:!1,closable:!0},a.createElement("div",{className:"flex col-12"},a.createElement("div",{className:"col-6",style:{fontSize:20}},a.createElement("strong",null,"Ajantha Hardwares")),a.createElement("div",{className:"col-6"})),a.createElement(l.PS,{baseRoute:"/purchase",description:"",data:[{},{},{},{},{},{},{},{},{},{},{},{}],newTable:!0,tableLayoutClass:"h-full",allowFilters:!1,hideActionColumn:!0,gridProps:{allowAdd:!1}},a.createElement(l._P,{field:"sno",header:"S.No",type:"number",width:"5%"}),a.createElement(l._P,{field:"sub_type",header:"Item Sub Type",type:"text"}),a.createElement(l._P,{field:"descr",header:"Item Descr",type:"text"}),a.createElement(l._P,{field:"model_no",header:"Brand Name",type:"text"}),a.createElement(l._P,{field:"model_no",header:"Model No",type:"text"}),a.createElement(l._P,{field:"qty",header:"Quantity",type:"number"}),a.createElement(l._P,{field:"qty",header:"UOM",type:"number"}),a.createElement(l._P,{field:"netamt",header:"Amount",type:"currency",defaultValue:0}))))}var X=function(e){var t=(0,a.useState)(1),n=(0,s.Z)(t,2),o=n[0],r=n[1],i=(0,a.useState)(f.IV),c=(0,s.Z)(i,2),d=c[0],m=c[1],v=(0,f.JB)().data,g=(0,a.useState)(!1),h=(0,s.Z)(g,2),y=h[0],E=h[1],b=(0,a.useState)(!1),S=(0,s.Z)(b,2),N=S[0],I=S[1],x=(0,a.useState)(!1),_=(0,s.Z)(x,2),O=_[0],C=_[1],Z=(0,a.useState)(null),L=(0,s.Z)(Z,2),V=L[0],T=L[1],A=(0,a.useState)(null),k=(0,s.Z)(A,2),D=k[0],R=k[1],M=(0,a.useState)(null),j=(0,s.Z)(M,2),W=j[0],z=j[1],H=(0,a.useState)([]),G=(0,s.Z)(H,2),B=G[0],U=G[1],Q=q({page:o,size:d,project:V,status:D}),X=Q.data,$=Q.isFetching,ee=(0,f.sq)().data,te=F(),ne=(0,s.Z)(te,2),ae=ne[0],oe=ne[1].isLoading;(0,a.useEffect)((function(){v&&U([{key:null,name:"All"}].concat((0,p.Z)(v)))}),[v]);var le=function(){E(!1),I(!1),C(!1)};return a.createElement(a.Fragment,null,a.createElement(P.i,null),a.createElement("div",{style:{display:"flex"}},a.createElement("div",{className:"field col-6"},a.createElement("label",{className:"col-3"},"Project Name"),a.createElement(u.L,{style:{width:"30%"},optionLabel:"name",optionValue:"key",value:V,onChange:function(e){T(e.value)},options:B,placeholder:"All"})),a.createElement("div",{className:"field col-6"},a.createElement("div",{className:"field"},a.createElement("label",{className:"col-3"},"Company Name"),a.createElement(u.L,{style:{width:"30%"},value:D,placeholder:"All",onChange:function(e){R(e.value)},optionLabel:"id",optionValue:"id",options:ee})))),a.createElement("div",{className:"col-12 ",style:{height:"calc(100% - 183px)",minHeight:200}},a.createElement(l.PS,{enableView:!0,onViewClick:function(e){console.log(e),z(e),E(!0)},pagination:{pageSize:d,loading:$,currentPage:o,total:null===X||void 0===X?void 0:X.count,onChange:function(e,t){r(e),m(t)}},baseRoute:"/invoice/contractorinvoice",description:"Item Contractor Invoice",hideAddButton:!0,allowFilters:!1,isLoading:$||oe,data:null===X||void 0===X?void 0:X.results,newTable:!0,showHeader:!0,deleteAction:function(e){return ae(e).unwrap()}},a.createElement(l._P,{width:"5%",field:"sno",header:"S.No",filteringType:"number"}),a.createElement(l._P,{field:"number",header:"Invoice No",filteringType:"number"}),a.createElement(l._P,{field:"date",header:"Date",filteringType:"date"}),a.createElement(l._P,{field:"contractor.name",header:"Contractor Name",filteringType:"text"}),a.createElement(l._P,{field:"amount",header:"Amount (Rs)",filteringType:"text"}),a.createElement(l._P,{field:"status.descr",header:"Payment Status",filteringType:"text"}),a.createElement(l._P,{field:"created_staus",header:"Type",defaultValue:"Generated",filteringType:"text"}))),a.createElement("div",null,a.createElement(w.z,{label:"Generate Invoice from Contract",className:"p-button-plain",style:{margin:"0 20px"},onClick:function(){C(!0)}}),a.createElement(w.z,{label:"Create Direct Invoice",className:"p-button-plain",onClick:function(){I(!0)}})),a.createElement(K,{displayModal:y,poId:W,customDiscard:le}),a.createElement(J,{displayModal:N,customDiscard:le}),a.createElement(Y,{displayModal:O,customDiscard:le}))},$=a.createElement(o.AW,{path:"contractorinvoice"},a.createElement(o.AW,{path:"new",element:a.createElement(G,null)}),a.createElement(o.AW,{path:":id/edit",element:a.createElement(G,null)}),a.createElement(o.AW,{index:!0,element:a.createElement(X,null)})),ee="/transaction/gst/invoice/",te=f.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listInvoice:e.query({query:function(e){var t=e.page,n=e.size,a=e.project,o=e.gst;return{url:(0,f.DS)(ee,"?page=".concat(t||1,"&page_size=").concat(n||f.IV).concat(a?"&project=".concat(a):"").concat(o?"&gst=".concat(o):""))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.key;return{type:f.pJ.VENDOR_INVOICE,key:t}}))),[{type:f.pJ.VENDOR_INVOICE,id:"LIST"}]):[{type:f.pJ.VENDOR_INVOICE,id:"LIST"}]}}),addInvoice:e.mutation({query:function(e){return{url:ee,method:"POST",body:e}},invalidatesTags:[{type:f.pJ.VENDOR_INVOICE,id:"LIST"}]}),getInvoice:e.query({query:function(e){return"".concat(ee).concat(e)},providesTags:function(e,t,n){return[{type:f.pJ.VENDOR_INVOICE,id:n}]}}),updateInvoice:e.mutation({query:function(e){var t=e;return console.log(t),{url:"".concat(ee),method:"POST",body:t}},invalidatesTags:function(e){return[{type:f.pJ.VENDOR_INVOICE,id:null===e||void 0===e?void 0:e.key}]}}),deleteInvoice:e.mutation({query:function(e){return{url:"".concat(ee).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:f.pJ.VENDOR_INVOICE,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),ne=te.useAddInvoiceMutation,ae=te.useDeleteInvoiceMutation,oe=te.useGetInvoiceQuery,le=te.useListInvoiceQuery,re=te.useUpdateInvoiceMutation,ie=(te.useGetErrorProneQuery,te.endpoints.getInvoice,function(e,t,n,a){return new(n||(n=Promise))((function(o,l){function r(e){try{c(a.next(e))}catch(t){l(t)}}function i(e){try{c(a.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((a=a.apply(e,t||[])).next())}))}),ce=function(e){var t=(0,l.pm)(),n=t.showSuccess,r=t.showError,i=(0,a.useState)({}),p=(0,s.Z)(i,2),v=p[0],g=p[1],h=(0,a.useState)("S"),y=(0,s.Z)(h,2),E=y[0],b=(y[1],(0,a.useState)("SAVE")),S=(0,s.Z)(b,2),N=S[0],I=(S[1],(0,o.s0)()),P=(0,o.UO)().id,w=parseInt(P||""),x=isNaN(w)||w<=0,_=(0,a.useRef)(),O=(0,f.ft)(),C=oe(w,{skip:x,refetchOnMountOrArgChange:!0}),Z=C.data,L=C.isLoading,V=(0,a.useState)(null),T=(0,s.Z)(V,2),A=(T[0],T[1],(0,a.useState)([])),k=(0,s.Z)(A,2),D=(k[0],k[1],(0,a.useState)(null)),R=(0,s.Z)(D,2),M=R[0],j=R[1],F=(0,a.useState)(null),W=(0,s.Z)(F,2),q=W[0],z=W[1],H=ne(),G=(0,s.Z)(H,2),B=(G[0],G[1].isLoading),J=(0,f.Gt)("Invoice",{skip:!x,refetchOnMountOrArgChange:x}).data,U=((0,f.Gt)("VCI",{skip:x,refetchOnMountOrArgChange:!x}).data,(0,f.lE)({})),Q=U.data,Y=U.isLoading,K=(0,f.u2)(q,{skip:!q}),X=K.data,$=K.isFetching,ee=ne(),te=(0,s.Z)(ee,2),ae=te[0],le=te[1].isLoading,ce=re(),se=(0,s.Z)(ce,2),de=se[0],me=se[1].isLoading;(0,a.useEffect)((function(){g(Z||Object.assign(Object.assign({},O),{date:(0,f.Hh)(new Date,!0),number:null===J||void 0===J?void 0:J.next_doc_id,loctyp:"PR"})),Z&&z(Z.vend_key)}),[Z,J]),(0,a.useEffect)((function(){var e;X?(console.log(X),j(null===(e=X[0])||void 0===e?void 0:e.key)):j(null)}),[X]);return a.createElement(a.Fragment,null,a.createElement(l.Rm,{disableSaveBtn:["U","R","C"].includes(null===Z||void 0===Z?void 0:Z.docstatus),baseRoute:"/invoice/gstinvoice",description:"Invoice",id:w,data:v,isUpdating:le||me||B,ref:_,isLoading:L,onSubmit:function(e){return ie(void 0,void 0,void 0,(0,c.Z)().mark((function t(){var a,o,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,l=Object.assign(Object.assign({},e),{date:(0,f.p6)(e.date,"yyyy-MM-dd"),loctyp:"PR",itemtyp_key:M,docstatus:E,action:N}),!x){t.next=8;break}return t.next=5,ae(Object.assign(Object.assign({},l),O)).unwrap();case 5:o=t.sent,t.next=11;break;case 8:return t.next=10,de(Object.assign(Object.assign(Object.assign({},l),O),{key:null===Z||void 0===Z?void 0:Z.key})).unwrap();case 10:o=t.sent;case 11:n("Success",o.detail),n("Success",o.detail),setTimeout((function(){I("/invoice/gstinvoice")}),f.P7),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),r("An error occurred",(null===(a=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===a?void 0:a.detail)||"We couldn't save your post, try again!");case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))},renderForm:function(e,t,n){return a.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},a.createElement(l.Wi,{label:"Invoice Number",name:"number",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{useGrouping:!1,disabled:!0}}}),a.createElement(l.Wi,{label:"Invoice Date",name:"date",className:"col-12 md:col-6",useExplicit:!0,control:e,errors:n,leftSpan:4,rightSpan:6,convertValue:f.Hh,formItem:{component:m.f,componentProps:{showIcon:!0,dateFormat:"yy-mm-dd"}}}),a.createElement(l.Wi,{label:"Project",name:"proj_key",className:"col-12 md:col-6",control:e,errors:n,isLoading:Y,leftSpan:4,rightSpan:6,formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"name",optionValue:"key",filter:!0,filterBy:"name",options:Q}}}),a.createElement(l.Wi,{label:"Item Type",name:"itemtyp_key",control:e,errors:n,isLoading:$,className:"col-12 md:col-6",leftSpan:4,rightSpan:6,useExplicit:!0,onChange:function(e){j(e.value)},formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",options:X,value:M}}}),a.createElement(l.Wi,{label:"Invoice No",name:"invoice_no",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{maxLength:50}}}),a.createElement(l.Wi,{label:"Description",name:"descr",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{maxLength:50}}}),a.createElement("div",{className:"col-12 md:col-6"}))}}))},se=function(e,t,n,a){return new(n||(n=Promise))((function(o,l){function r(e){try{c(a.next(e))}catch(t){l(t)}}function i(e){try{c(a.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((a=a.apply(e,t||[])).next())}))};function de(e){var t=this,n=e.displayModal,o=e.customDiscard,r=(0,l.pm)(),i=r.showSuccess,p=r.showError,v=(0,a.useState)(!1),g=(0,s.Z)(v,2),h=g[0],y=g[1],E=(0,a.useState)("S"),b=(0,s.Z)(E,2),S=b[0],N=(b[1],(0,a.useState)("")),I=(0,s.Z)(N,2),P=(I[0],I[1],(0,a.useState)("SAVE")),w=(0,s.Z)(P,2),O=w[0],C=(w[1],(0,a.useRef)()),Z=(0,a.useState)({}),L=(0,s.Z)(Z,2),V=L[0],T=(L[1],(0,f.ft)()),A=(0,a.useState)(null),k=(0,s.Z)(A,2),D=(k[0],k[1],(0,a.useState)("Online")),R=(0,s.Z)(D,2),M=R[0],j=(R[1],(0,f.Gt)("PYV",{refetchOnMountOrArgChange:!0})),F=j.data,W=(j.error,j.isFetching,(0,f.Ii)({})),q=(W.data,W.isLoading,(0,f.sq)()),z=q.data,H=q.isFetching,G=ne(),B=(0,s.Z)(G,2),J=B[0],U=B[1].isLoading;return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"Create New GST Invoice Without PO",visible:n,position:"center",modal:!0,style:{width:"70vw"},onHide:function(){return o()},draggable:!1,resizable:!1,closable:!0},a.createElement(l.Rm,{baseRoute:"/payment/gstpayment",bottomControl:!0,data:V,hideHeader:!0,customDiscard:o,ref:C,isUpdating:U||h,onSubmit:function(e){return se(t,void 0,void 0,(0,c.Z)().mark((function t(){var n,a,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=Object.assign(Object.assign({},e),{number:null===F||void 0===F?void 0:F.next_doc_id,date:(0,f.p6)(e.date,"yyyy-MM-dd"),docstatus:S,docid:"PYV",chqdate:e.chqdate&&(0,f.p6)(e.chqdate,"yyyy-MM-dd"),action:O,modeofpay:M}),console.log(a),t.next=5,J(Object.assign(Object.assign({},a),T)).unwrap();case 5:l=t.sent,i("Success",l.detail),y(!0),setTimeout((function(){o()}),f.P7),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),p("An error occurred",(null===(n=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===n?void 0:n.detail)||"We couldn't save your post, try again!");case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))},renderForm:function(e,t,n,o,r){return a.createElement("div",null,a.createElement("div",{style:{border:"2px solid gray",padding:"5px 20px"}},a.createElement("div",{className:"flex"},a.createElement(l.Wi,{label:"Invoice No",name:"invoice_no",className:"col-12 md:col-6 pl-0",control:e,errors:n,leftSpan:4,rightSpan:6,required:!0,formItem:{component:d.o,componentProps:{maxLength:25}}}),a.createElement(l.Wi,{label:"Creation Method",name:"invoice_no",className:"col-12 md:col-6 pl-0",control:e,errors:n,leftSpan:4,rightSpan:6,required:!0,formItem:{component:d.o,componentProps:{maxLength:25}}})),a.createElement("div",{className:"flex"},a.createElement(l.Wi,{label:"Company Name",name:"company_name",className:"col-12 md:col-6 pl-0",required:!0,control:e,errors:n,isLoading:H,leftSpan:4,rightSpan:6,formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"name",optionValue:"id",filter:!0,filterBy:"name",options:z}}}),a.createElement(l.Wi,{label:"Project Name",name:"invoice_no",className:"col-12 md:col-6 pl-0",control:e,errors:n,leftSpan:4,rightSpan:6,required:!0,formItem:{component:d.o,componentProps:{maxLength:25}}}))),a.createElement("div",{style:{border:"2px solid gray",margin:"10px auto"}},a.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},a.createElement(l.Wi,{label:"Date",name:"date",useExplicit:!0,control:e,errors:n,leftSpan:4,rightSpan:6,required:!0,className:"col-12 md:col-6 pl-0",convertValue:f.Hh,formItem:{component:m.f,componentProps:{showIcon:!0,dateFormat:"dd-mm-yy"}}}),a.createElement(l.Wi,{label:"GST Name",name:"vend_key",leftSpan:4,rightSpan:6,required:!0,className:"col-12 md:col-6 pl-0",control:e,errors:n,formItem:{component:d.o,componentProps:{maxLength:25}}}),a.createElement("div",{className:"flex col-12",style:{paddingLeft:0}},a.createElement("div",{className:"col-6"},a.createElement("div",{style:{marginBottom:15}},"Invoice Description"),a.createElement(l.Wi,{label:"",name:"refnumber",leftSpan:1,rightSpan:10,control:e,errors:n,formItem:{component:x.g,componentProps:{maxLength:25,rows:4}}})),a.createElement("div",{className:"col-6"},a.createElement(l.Wi,{label:"Amount",name:"refnumber",leftSpan:4,rightSpan:6,control:e,errors:n,formItem:{component:d.o,componentProps:{maxLength:25}}}),a.createElement("br",null),a.createElement(l.Wi,{label:"TDS",name:"refnumber",leftSpan:4,rightSpan:6,control:e,errors:n,formItem:{component:d.o,componentProps:{maxLength:25}}}))))))}})))}function me(e){var t=e.displayModal,n=e.customDiscard,o=(0,l.pm)(),r=(o.showSuccess,o.showError,(0,a.useState)(!1)),i=(0,s.Z)(r,2),c=(i[0],i[1],(0,a.useState)("S")),d=(0,s.Z)(c,2),m=(d[0],d[1],(0,a.useState)("")),u=(0,s.Z)(m,2),p=(u[0],u[1],(0,a.useState)("SAVE")),v=(0,s.Z)(p,2),g=(v[0],v[1],(0,a.useRef)(),(0,a.useState)({})),h=(0,s.Z)(g,2),y=(h[0],h[1],(0,f.ft)(),(0,f.Gt)("PYV",{refetchOnMountOrArgChange:!0})),E=(y.data,y.error,y.isFetching,ne()),b=(0,s.Z)(E,2);b[0],b[1].isLoading;return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"Success",visible:t,position:"center",modal:!0,style:{width:"30vw"},onHide:function(){return n()},draggable:!1,resizable:!1,closable:!0},a.createElement("h3",null,"Invoice Generated Successfully")))}function ue(e){var t=e.displayModal,n=e.customDiscard,o=(0,f.JB)().data,r=(0,a.useState)(!1),i=(0,s.Z)(r,2),c=(i[0],i[1]),m=(0,a.useState)(!1),v=(0,s.Z)(m,2),g=v[0],h=v[1],y=(0,a.useState)(null),E=(0,s.Z)(y,2),b=E[0],S=(E[1],(0,a.useState)(null)),N=(0,s.Z)(S,2),I=N[0],x=N[1],O=(0,a.useState)(null),C=(0,s.Z)(O,2),Z=(C[0],C[1],(0,a.useState)([])),L=(0,s.Z)(Z,2),V=(L[0],L[1]),T=le({page:1,size:100,project:b,status:I}),A=T.data,k=T.isFetching,D=ae(),R=(0,s.Z)(D,2),M=R[0],j=R[1].isLoading,F=(0,f.sq)(),W=F.data;F.isFetching;(0,a.useEffect)((function(){o&&V([{key:null,name:"All"}].concat((0,p.Z)(o)))}),[o]);return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"Generate GST Invoice Screen",visible:t,position:"center",modal:!0,style:{width:"80vw"},onHide:function(){return n()},draggable:!1,resizable:!1,closable:!0},a.createElement(a.Fragment,null,a.createElement(P.i,null),a.createElement("div",{style:{display:"flex"}},a.createElement("div",{className:"field col-6"},a.createElement("div",{className:"field"},a.createElement("label",{className:"col-3"},"Company Name"),a.createElement(u.L,{style:{width:"30%"},value:I,placeholder:"All",onChange:function(e){x(e.value)},optionLabel:"id",optionValue:"id",options:W})))),a.createElement("div",{className:"col-12 ",style:{height:"calc(100% - 183px)",minHeight:200}},a.createElement(l.PS,{hideActionColumn:!0,baseRoute:"/invoice/gstinvoice",description:"Unpaid GST Entries",hideAddButton:!0,allowFilters:!1,isLoading:k||j,data:null===A||void 0===A?void 0:A.results,newTable:!0,showHeader:!0,deleteAction:function(e){return M(e).unwrap()}},a.createElement(l._P,{width:"5%",field:"sno",header:"S.No",filteringType:"number"}),a.createElement(l._P,{field:"text1",header:"Date",filteringType:"text"}),a.createElement(l._P,{field:"text2",header:"Project Name",filteringType:"text"}),a.createElement(l._P,{field:"text3",header:"Customer Name",filteringType:"text"}),a.createElement(l._P,{field:"text4",header:"Flat Name",filteringType:"text"}),a.createElement(l._P,{field:"text5",header:"Received Amount (Rs)",filteringType:"text"}),a.createElement(l._P,{field:"text6",header:"Receipt No",filteringType:"text"}),a.createElement(l._P,{field:"text7",header:"GST (Rs)",filteringType:"text"}))),a.createElement("div",{className:"grid p-fluid h-full"},a.createElement("div",{className:"field col-12 md:col-6"},a.createElement("label",{className:"col-5"},"GST Amount (Rs)"),a.createElement(d.o,{style:{width:"50%"},disabled:!0})),a.createElement("div",{className:"field col-12 md:col-6"},a.createElement("label",{className:"col-5"},"Additional Amount (Rs) "),a.createElement(d.o,{style:{width:"50%"}})),a.createElement("div",{className:"field col-12 md:col-6"},a.createElement("label",{className:"col-5"},"Additional Charges Description "),a.createElement(d.o,{style:{width:"50%"}})),a.createElement("div",{className:"field col-12 md:col-6"},a.createElement("label",{className:"col-5"},"GST Invoice Amount (Rs) "),a.createElement(d.o,{style:{width:"50%"},disabled:!0}))),a.createElement("div",{style:{display:"flex",margin:"auto",justifyContent:"center"}},a.createElement(w.z,{label:"Save",className:"p-button-warning mr-3",onClick:function(){n(!0)}}),a.createElement(w.z,{label:"Close",className:"p-button-plain",onClick:function(){n(!0)}})))),a.createElement(me,{displayModal:g,customDiscard:function(){c(!1),h(!1)}}))}function pe(e){var t=e.displayModal,n=e.poId,o=e.customDiscard,r=oe(n,{refetchOnMountOrArgChange:!0});r.data,r.isFetching;return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"View Invoice",visible:t,position:"center",modal:!0,style:{width:"70vw"},onHide:function(){return o()},closeOnEscape:!0,draggable:!1,resizable:!1,closable:!0},a.createElement("div",{className:"flex col-12"},a.createElement("div",{className:"col-6",style:{fontSize:20}},a.createElement("strong",null,"Ajantha Hardwares")),a.createElement("div",{className:"col-6"})),a.createElement(l.PS,{baseRoute:"/purchase",description:"",data:[{},{},{},{},{},{},{},{},{},{},{},{}],newTable:!0,tableLayoutClass:"h-full",allowFilters:!1,hideActionColumn:!0,gridProps:{allowAdd:!1}},a.createElement(l._P,{field:"sno",header:"S.No",type:"number",width:"5%"}),a.createElement(l._P,{field:"sub_type",header:"Item Sub Type",type:"text"}),a.createElement(l._P,{field:"descr",header:"Item Descr",type:"text"}),a.createElement(l._P,{field:"model_no",header:"Brand Name",type:"text"}),a.createElement(l._P,{field:"model_no",header:"Model No",type:"text"}),a.createElement(l._P,{field:"qty",header:"Quantity",type:"number"}),a.createElement(l._P,{field:"qty",header:"UOM",type:"number"}),a.createElement(l._P,{field:"netamt",header:"Amount",type:"currency",defaultValue:0}))))}var fe=function(e){var t=(0,a.useState)(1),n=(0,s.Z)(t,2),o=n[0],r=n[1],i=(0,a.useState)(f.IV),c=(0,s.Z)(i,2),d=c[0],m=c[1],u=(0,f.JB)().data,v=(0,a.useState)(!1),g=(0,s.Z)(v,2),h=g[0],y=g[1],E=(0,a.useState)(!1),b=(0,s.Z)(E,2),S=b[0],N=b[1],I=(0,a.useState)(!1),x=(0,s.Z)(I,2),_=x[0],O=x[1],C=(0,a.useState)(null),Z=(0,s.Z)(C,2),L=Z[0],V=(Z[1],(0,a.useState)(null)),T=(0,s.Z)(V,2),A=T[0],k=(T[1],(0,a.useState)(null)),D=(0,s.Z)(k,2),R=D[0],M=D[1],j=(0,a.useState)([]),F=(0,s.Z)(j,2),W=(F[0],F[1]),q=le({page:o,size:d,project:L,status:A}),z=q.data,H=q.isFetching,G=ae(),B=(0,s.Z)(G,2),J=B[0],U=B[1].isLoading;(0,a.useEffect)((function(){u&&W([{key:null,name:"All"}].concat((0,p.Z)(u)))}),[u]);var Q=function(){y(!1),N(!1),O(!1)};return a.createElement(a.Fragment,null,a.createElement(P.i,null),a.createElement("div",{className:"col-12 ",style:{height:"calc(100% - 183px)",minHeight:200}},a.createElement(l.PS,{enableView:!0,onViewClick:function(e){console.log(e),M(e),y(!0)},pagination:{pageSize:d,loading:H,currentPage:o,total:null===z||void 0===z?void 0:z.count,onChange:function(e,t){r(e),m(t)}},baseRoute:"/invoice/gstinvoice",description:"GST Invoice",hideAddButton:!0,allowFilters:!1,isLoading:H||U,data:null===z||void 0===z?void 0:z.results,newTable:!0,showHeader:!0,deleteAction:function(e){return J(e).unwrap()}},a.createElement(l._P,{width:"5%",field:"sno",header:"S.No",filteringType:"number"}),a.createElement(l._P,{field:"number",header:"Invoice No",filteringType:"number"}),a.createElement(l._P,{field:"date",header:"Date",filteringType:"date"}),a.createElement(l._P,{field:"company",header:"Company Name",filteringType:"text"}),a.createElement(l._P,{field:"amount",header:"Amount (Rs)",filteringType:"text"}),a.createElement(l._P,{field:"status.descr",header:"Payment Status",filteringType:"text"}),a.createElement(l._P,{field:"created_staus",header:"Type",defaultValue:"Generated",filteringType:"text"}))),a.createElement("div",null,a.createElement(w.z,{label:"Generate GST Invoice",className:"p-button-plain",style:{margin:"0 20px"},onClick:function(){O(!0)}})),a.createElement(pe,{displayModal:h,poId:R,customDiscard:Q}),a.createElement(de,{displayModal:S,customDiscard:Q}),a.createElement(ue,{displayModal:_,customDiscard:Q}))},ve=a.createElement(o.AW,{path:"gstinvoice"},a.createElement(o.AW,{path:"new",element:a.createElement(ce,null)}),a.createElement(o.AW,{path:":id/edit",element:a.createElement(ce,null)}),a.createElement(o.AW,{index:!0,element:a.createElement(fe,null)})),ge="/transaction/tds/invoice/",he=f.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listInvoice:e.query({query:function(e){var t=e.page,n=e.size,a=e.project,o=e.tds;return{url:(0,f.DS)(ge,"?page=".concat(t||1,"&page_size=").concat(n||f.IV).concat(a?"&project=".concat(a):"").concat(o?"&tds=".concat(o):""))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.key;return{type:f.pJ.VENDOR_INVOICE,key:t}}))),[{type:f.pJ.VENDOR_INVOICE,id:"LIST"}]):[{type:f.pJ.VENDOR_INVOICE,id:"LIST"}]}}),addInvoice:e.mutation({query:function(e){return{url:ge,method:"POST",body:e}},invalidatesTags:[{type:f.pJ.VENDOR_INVOICE,id:"LIST"}]}),getInvoice:e.query({query:function(e){return"".concat(ge).concat(e)},providesTags:function(e,t,n){return[{type:f.pJ.VENDOR_INVOICE,id:n}]}}),updateInvoice:e.mutation({query:function(e){var t=e;return console.log(t),{url:"".concat(ge),method:"POST",body:t}},invalidatesTags:function(e){return[{type:f.pJ.VENDOR_INVOICE,id:null===e||void 0===e?void 0:e.key}]}}),deleteInvoice:e.mutation({query:function(e){return{url:"".concat(ge).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:f.pJ.VENDOR_INVOICE,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),ye=he.useAddInvoiceMutation,Ee=he.useDeleteInvoiceMutation,be=he.useGetInvoiceQuery,Se=he.useListInvoiceQuery,Ne=he.useUpdateInvoiceMutation,Ie=(he.useGetErrorProneQuery,he.endpoints.getInvoice,function(e,t,n,a){return new(n||(n=Promise))((function(o,l){function r(e){try{c(a.next(e))}catch(t){l(t)}}function i(e){try{c(a.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((a=a.apply(e,t||[])).next())}))}),Pe=function(e){var t=(0,l.pm)(),n=t.showSuccess,r=t.showError,i=(0,a.useState)({}),p=(0,s.Z)(i,2),v=p[0],g=p[1],h=(0,a.useState)("S"),y=(0,s.Z)(h,2),E=y[0],b=(y[1],(0,a.useState)("SAVE")),S=(0,s.Z)(b,2),N=S[0],I=(S[1],(0,o.s0)()),P=(0,o.UO)().id,w=parseInt(P||""),x=isNaN(w)||w<=0,_=(0,a.useRef)(),O=(0,f.ft)(),C=be(w,{skip:x,refetchOnMountOrArgChange:!0}),Z=C.data,L=C.isLoading,V=(0,a.useState)(null),T=(0,s.Z)(V,2),A=(T[0],T[1],(0,a.useState)([])),k=(0,s.Z)(A,2),D=(k[0],k[1],(0,a.useState)(null)),R=(0,s.Z)(D,2),M=R[0],j=R[1],F=(0,a.useState)(null),W=(0,s.Z)(F,2),q=W[0],z=W[1],H=ye(),G=(0,s.Z)(H,2),B=(G[0],G[1].isLoading),J=(0,f.Gt)("Invoice",{skip:!x,refetchOnMountOrArgChange:x}).data,U=((0,f.Gt)("VCI",{skip:x,refetchOnMountOrArgChange:!x}).data,(0,f.lE)({})),Q=U.data,Y=U.isLoading,K=(0,f.u2)(q,{skip:!q}),X=K.data,$=K.isFetching,ee=ye(),te=(0,s.Z)(ee,2),ne=te[0],ae=te[1].isLoading,oe=Ne(),le=(0,s.Z)(oe,2),re=le[0],ie=le[1].isLoading;(0,a.useEffect)((function(){g(Z||Object.assign(Object.assign({},O),{date:(0,f.Hh)(new Date,!0),number:null===J||void 0===J?void 0:J.next_doc_id,loctyp:"PR"})),Z&&z(Z.vend_key)}),[Z,J]),(0,a.useEffect)((function(){var e;X?(console.log(X),j(null===(e=X[0])||void 0===e?void 0:e.key)):j(null)}),[X]);return a.createElement(a.Fragment,null,a.createElement(l.Rm,{disableSaveBtn:["U","R","C"].includes(null===Z||void 0===Z?void 0:Z.docstatus),baseRoute:"/invoice/tdsinvoice",description:"Invoice",id:w,data:v,isUpdating:ae||ie||B,ref:_,isLoading:L,onSubmit:function(e){return Ie(void 0,void 0,void 0,(0,c.Z)().mark((function t(){var a,o,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,l=Object.assign(Object.assign({},e),{date:(0,f.p6)(e.date,"yyyy-MM-dd"),loctyp:"PR",itemtyp_key:M,docstatus:E,action:N}),!x){t.next=8;break}return t.next=5,ne(Object.assign(Object.assign({},l),O)).unwrap();case 5:o=t.sent,t.next=11;break;case 8:return t.next=10,re(Object.assign(Object.assign(Object.assign({},l),O),{key:null===Z||void 0===Z?void 0:Z.key})).unwrap();case 10:o=t.sent;case 11:n("Success",o.detail),n("Success",o.detail),setTimeout((function(){I("/invoice/tdsinvoice")}),f.P7),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),r("An error occurred",(null===(a=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===a?void 0:a.detail)||"We couldn't save your post, try again!");case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))},renderForm:function(e,t,n){return a.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},a.createElement(l.Wi,{label:"Invoice Number",name:"number",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{useGrouping:!1,disabled:!0}}}),a.createElement(l.Wi,{label:"Invoice Date",name:"date",className:"col-12 md:col-6",useExplicit:!0,control:e,errors:n,leftSpan:4,rightSpan:6,convertValue:f.Hh,formItem:{component:m.f,componentProps:{showIcon:!0,dateFormat:"yy-mm-dd"}}}),a.createElement(l.Wi,{label:"Project",name:"proj_key",className:"col-12 md:col-6",control:e,errors:n,isLoading:Y,leftSpan:4,rightSpan:6,formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"name",optionValue:"key",filter:!0,filterBy:"name",options:Q}}}),a.createElement(l.Wi,{label:"Item Type",name:"itemtyp_key",control:e,errors:n,isLoading:$,className:"col-12 md:col-6",leftSpan:4,rightSpan:6,useExplicit:!0,onChange:function(e){j(e.value)},formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",options:X,value:M}}}),a.createElement(l.Wi,{label:"Invoice No",name:"invoice_no",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{maxLength:50}}}),a.createElement(l.Wi,{label:"Description",name:"descr",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{maxLength:50}}}),a.createElement("div",{className:"col-12 md:col-6"}))}}))},we=function(e,t,n,a){return new(n||(n=Promise))((function(o,l){function r(e){try{c(a.next(e))}catch(t){l(t)}}function i(e){try{c(a.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((a=a.apply(e,t||[])).next())}))};function xe(e){var t=this,n=e.displayModal,o=e.customDiscard,r=(0,l.pm)(),i=r.showSuccess,p=r.showError,v=(0,a.useState)(!1),g=(0,s.Z)(v,2),h=g[0],y=g[1],E=(0,a.useState)("S"),b=(0,s.Z)(E,2),S=b[0],N=(b[1],(0,a.useState)("")),I=(0,s.Z)(N,2),P=(I[0],I[1],(0,a.useState)("SAVE")),w=(0,s.Z)(P,2),O=w[0],C=(w[1],(0,a.useRef)()),Z=(0,a.useState)({}),L=(0,s.Z)(Z,2),V=L[0],T=(L[1],(0,f.ft)()),A=(0,a.useState)(null),k=(0,s.Z)(A,2),D=(k[0],k[1],(0,a.useState)("Online")),R=(0,s.Z)(D,2),M=R[0],j=(R[1],(0,f.Gt)("PYV",{refetchOnMountOrArgChange:!0})),F=j.data,W=(j.error,j.isFetching,(0,f.Ii)({})),q=(W.data,W.isLoading,(0,f.sq)()),z=q.data,H=q.isFetching,G=ye(),B=(0,s.Z)(G,2),J=B[0],U=B[1].isLoading;return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"Create New TDS Invoice Without PO",visible:n,position:"center",modal:!0,style:{width:"70vw"},onHide:function(){return o()},draggable:!1,resizable:!1,closable:!0},a.createElement(l.Rm,{baseRoute:"/payment/tdspayment",bottomControl:!0,data:V,hideHeader:!0,customDiscard:o,ref:C,isUpdating:U||h,onSubmit:function(e){return we(t,void 0,void 0,(0,c.Z)().mark((function t(){var n,a,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=Object.assign(Object.assign({},e),{number:null===F||void 0===F?void 0:F.next_doc_id,date:(0,f.p6)(e.date,"yyyy-MM-dd"),docstatus:S,docid:"PYV",chqdate:e.chqdate&&(0,f.p6)(e.chqdate,"yyyy-MM-dd"),action:O,modeofpay:M}),console.log(a),t.next=5,J(Object.assign(Object.assign({},a),T)).unwrap();case 5:l=t.sent,i("Success",l.detail),y(!0),setTimeout((function(){o()}),f.P7),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),p("An error occurred",(null===(n=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===n?void 0:n.detail)||"We couldn't save your post, try again!");case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))},renderForm:function(e,t,n,o,r){return a.createElement("div",null,a.createElement("div",{style:{border:"2px solid gray",padding:"5px 20px"}},a.createElement("div",{className:"flex"},a.createElement(l.Wi,{label:"Invoice No",name:"invoice_no",className:"col-12 md:col-6 pl-0",control:e,errors:n,leftSpan:4,rightSpan:6,required:!0,formItem:{component:d.o,componentProps:{maxLength:25}}}),a.createElement(l.Wi,{label:"Creation Method",name:"invoice_no",className:"col-12 md:col-6 pl-0",control:e,errors:n,leftSpan:4,rightSpan:6,required:!0,formItem:{component:d.o,componentProps:{maxLength:25}}})),a.createElement("div",{className:"flex"},a.createElement(l.Wi,{label:"Company Name",name:"company_name",className:"col-12 md:col-6 pl-0",required:!0,control:e,errors:n,isLoading:H,leftSpan:4,rightSpan:6,formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"name",optionValue:"id",filter:!0,filterBy:"name",options:z}}}),a.createElement(l.Wi,{label:"Project Name",name:"invoice_no",className:"col-12 md:col-6 pl-0",control:e,errors:n,leftSpan:4,rightSpan:6,required:!0,formItem:{component:d.o,componentProps:{maxLength:25}}}))),a.createElement("div",{style:{border:"2px solid gray",margin:"10px auto"}},a.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},a.createElement(l.Wi,{label:"Date",name:"date",useExplicit:!0,control:e,errors:n,leftSpan:4,rightSpan:6,required:!0,className:"col-12 md:col-6 pl-0",convertValue:f.Hh,formItem:{component:m.f,componentProps:{showIcon:!0,dateFormat:"dd-mm-yy"}}}),a.createElement(l.Wi,{label:"TDS Name",name:"vend_key",leftSpan:4,rightSpan:6,required:!0,className:"col-12 md:col-6 pl-0",control:e,errors:n,formItem:{component:d.o,componentProps:{maxLength:25}}}),a.createElement("div",{className:"flex col-12",style:{paddingLeft:0}},a.createElement("div",{className:"col-6"},a.createElement("div",{style:{marginBottom:15}},"Invoice Description"),a.createElement(l.Wi,{label:"",name:"refnumber",leftSpan:1,rightSpan:10,control:e,errors:n,formItem:{component:x.g,componentProps:{maxLength:25,rows:4}}})),a.createElement("div",{className:"col-6"},a.createElement(l.Wi,{label:"Amount",name:"refnumber",leftSpan:4,rightSpan:6,control:e,errors:n,formItem:{component:d.o,componentProps:{maxLength:25}}}),a.createElement("br",null),a.createElement(l.Wi,{label:"TDS",name:"refnumber",leftSpan:4,rightSpan:6,control:e,errors:n,formItem:{component:d.o,componentProps:{maxLength:25}}}))))))}})))}function _e(e){var t=e.displayModal,n=e.customDiscard,o=(0,l.pm)(),r=(o.showSuccess,o.showError,(0,a.useState)(!1)),i=(0,s.Z)(r,2),c=(i[0],i[1],(0,a.useState)("S")),d=(0,s.Z)(c,2),m=(d[0],d[1],(0,a.useState)("")),u=(0,s.Z)(m,2),p=(u[0],u[1],(0,a.useState)("SAVE")),v=(0,s.Z)(p,2),g=(v[0],v[1],(0,a.useRef)(),(0,a.useState)({})),h=(0,s.Z)(g,2),y=(h[0],h[1],(0,f.ft)(),(0,f.Gt)("PYV",{refetchOnMountOrArgChange:!0})),E=(y.data,y.error,y.isFetching,ye()),b=(0,s.Z)(E,2);b[0],b[1].isLoading;return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"Success",visible:t,position:"center",modal:!0,style:{width:"30vw"},onHide:function(){return n()},draggable:!1,resizable:!1,closable:!0},a.createElement("h3",null,"Invoice Generated Successfully")))}function Oe(e){var t=e.displayModal,n=e.customDiscard,o=(0,f.JB)().data,r=(0,a.useState)(!1),i=(0,s.Z)(r,2),c=(i[0],i[1]),m=(0,a.useState)(!1),v=(0,s.Z)(m,2),g=v[0],h=v[1],y=(0,a.useState)(null),E=(0,s.Z)(y,2),b=E[0],S=(E[1],(0,a.useState)(null)),N=(0,s.Z)(S,2),I=N[0],x=N[1],O=(0,a.useState)(null),C=(0,s.Z)(O,2),Z=(C[0],C[1],(0,a.useState)([])),L=(0,s.Z)(Z,2),V=(L[0],L[1]),T=Se({page:1,size:100,project:b,status:I}),A=T.data,k=T.isFetching,D=Ee(),R=(0,s.Z)(D,2),M=R[0],j=R[1].isLoading,F=function(e){return M(e).unwrap()},W=(0,f.sq)(),q=W.data;W.isFetching;(0,a.useEffect)((function(){o&&V([{key:null,name:"All"}].concat((0,p.Z)(o)))}),[o]);return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"Generate TDS Invoice Screen",visible:t,position:"center",modal:!0,style:{width:"80vw"},onHide:function(){return n()},draggable:!1,resizable:!1,closable:!0},a.createElement(a.Fragment,null,a.createElement(P.i,null),a.createElement("div",{style:{display:"flex"}},a.createElement("div",{className:"field col-6"},a.createElement("div",{className:"field"},a.createElement("label",{className:"col-3"},"Company Name"),a.createElement(u.L,{style:{width:"30%"},value:I,placeholder:"All",onChange:function(e){x(e.value)},optionLabel:"id",optionValue:"id",options:q})))),a.createElement("div",{className:"col-12 ",style:{height:"calc(100% - 183px)",minHeight:200}},a.createElement(l.PS,{hideActionColumn:!0,baseRoute:"/invoice/tdsinvoice",description:"Unpaid TDS Entries",hideAddButton:!0,allowFilters:!1,isLoading:k||j,data:null===A||void 0===A?void 0:A.results,newTable:!0,showHeader:!0,deleteAction:F},a.createElement(l._P,{width:"5%",field:"sno",header:"S.No",filteringType:"number"}),a.createElement(l._P,{field:"text1",header:"Date",filteringType:"text"}),a.createElement(l._P,{field:"text2",header:"Vendor Type",filteringType:"text"}),a.createElement(l._P,{field:"text3",header:"Vendor Name",filteringType:"text"}),a.createElement(l._P,{field:"text4",header:"TDS Entry NO",filteringType:"text"}),a.createElement(l._P,{field:"text5",header:"TDS Amount (Rs)",filteringType:"text"}),a.createElement(l._P,{field:"text6",header:"Deducted Invoice No",filteringType:"text"}))),a.createElement("div",{className:"col-12 ",style:{height:"calc(100% - 183px)",minHeight:200}},a.createElement(l.PS,{hideActionColumn:!0,baseRoute:"/invoice/tdsinvoice",description:"Vendor wise TDS amount to be paid",hideAddButton:!0,allowFilters:!1,isLoading:k||j,data:null===A||void 0===A?void 0:A.results,newTable:!0,showHeader:!0,deleteAction:F},a.createElement(l._P,{width:"5%",field:"sno",header:"S.No",filteringType:"number"}),a.createElement(l._P,{field:"text2",header:"Vendor Type",filteringType:"text"}),a.createElement(l._P,{field:"text3",header:"Vendor Name",filteringType:"text"}),a.createElement(l._P,{field:"text4",header:"PAN",filteringType:"text"}),a.createElement(l._P,{field:"text5",header:"TDS Amount (Rs)",filteringType:"text"}))),a.createElement("div",{className:"grid p-fluid h-full"},a.createElement("div",{className:"field col-12 md:col-6"},a.createElement("label",{className:"col-5"},"TDS Amount (Rs)"),a.createElement(d.o,{style:{width:"50%"},disabled:!0})),a.createElement("div",{className:"field col-12 md:col-6"},a.createElement("label",{className:"col-5"},"Additional Amount (Rs) "),a.createElement(d.o,{style:{width:"50%"}})),a.createElement("div",{className:"field col-12 md:col-6"},a.createElement("label",{className:"col-5"},"Additional Charges Description "),a.createElement(d.o,{style:{width:"50%"}})),a.createElement("div",{className:"field col-12 md:col-6"},a.createElement("label",{className:"col-5"},"TDS Invoice Amount (Rs) "),a.createElement(d.o,{style:{width:"50%"},disabled:!0}))),a.createElement("div",{style:{display:"flex",margin:"auto",justifyContent:"center"}},a.createElement(w.z,{label:"Save",className:"p-button-warning mr-3",onClick:function(){n(!0)}}),a.createElement(w.z,{label:"Close",className:"p-button-plain",onClick:function(){n(!0)}})))),a.createElement(_e,{displayModal:g,customDiscard:function(){c(!1),h(!1)}}))}function Ce(e){var t=e.displayModal,n=e.poId,o=e.customDiscard,r=be(n,{refetchOnMountOrArgChange:!0});r.data,r.isFetching;return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"View Invoice",visible:t,position:"center",modal:!0,style:{width:"70vw"},onHide:function(){return o()},closeOnEscape:!0,draggable:!1,resizable:!1,closable:!0},a.createElement("div",{className:"flex col-12"},a.createElement("div",{className:"col-6",style:{fontSize:20}},a.createElement("strong",null,"Ajantha Hardwares")),a.createElement("div",{className:"col-6"})),a.createElement(l.PS,{baseRoute:"/purchase",description:"",data:[{},{},{},{},{},{},{},{},{},{},{},{}],newTable:!0,tableLayoutClass:"h-full",allowFilters:!1,hideActionColumn:!0,gridProps:{allowAdd:!1}},a.createElement(l._P,{field:"sno",header:"S.No",type:"number",width:"5%"}),a.createElement(l._P,{field:"sub_type",header:"Item Sub Type",type:"text"}),a.createElement(l._P,{field:"descr",header:"Item Descr",type:"text"}),a.createElement(l._P,{field:"model_no",header:"Brand Name",type:"text"}),a.createElement(l._P,{field:"model_no",header:"Model No",type:"text"}),a.createElement(l._P,{field:"qty",header:"Quantity",type:"number"}),a.createElement(l._P,{field:"qty",header:"UOM",type:"number"}),a.createElement(l._P,{field:"netamt",header:"Amount",type:"currency",defaultValue:0}))))}var Ze=function(e){var t=(0,a.useState)(1),n=(0,s.Z)(t,2),o=n[0],r=n[1],i=(0,a.useState)(f.IV),c=(0,s.Z)(i,2),d=c[0],m=c[1],u=(0,f.JB)().data,v=(0,a.useState)(!1),g=(0,s.Z)(v,2),h=g[0],y=g[1],E=(0,a.useState)(!1),b=(0,s.Z)(E,2),S=b[0],N=b[1],I=(0,a.useState)(!1),x=(0,s.Z)(I,2),_=x[0],O=x[1],C=(0,a.useState)(null),Z=(0,s.Z)(C,2),L=Z[0],V=(Z[1],(0,a.useState)(null)),T=(0,s.Z)(V,2),A=T[0],k=(T[1],(0,a.useState)(null)),D=(0,s.Z)(k,2),R=D[0],M=D[1],j=(0,a.useState)([]),F=(0,s.Z)(j,2),W=(F[0],F[1]),q=Se({page:o,size:d,project:L,status:A}),z=q.data,H=q.isFetching,G=Ee(),B=(0,s.Z)(G,2),J=B[0],U=B[1].isLoading;(0,a.useEffect)((function(){u&&W([{key:null,name:"All"}].concat((0,p.Z)(u)))}),[u]);var Q=function(){y(!1),N(!1),O(!1)};return a.createElement(a.Fragment,null,a.createElement(P.i,null),a.createElement("div",{className:"col-12 ",style:{height:"calc(100% - 183px)",minHeight:200}},a.createElement(l.PS,{enableView:!0,onViewClick:function(e){console.log(e),M(e),y(!0)},pagination:{pageSize:d,loading:H,currentPage:o,total:null===z||void 0===z?void 0:z.count,onChange:function(e,t){r(e),m(t)}},baseRoute:"/invoice/tdsinvoice",description:"TDS Invoice",hideAddButton:!0,allowFilters:!1,isLoading:H||U,data:null===z||void 0===z?void 0:z.results,newTable:!0,showHeader:!0,deleteAction:function(e){return J(e).unwrap()}},a.createElement(l._P,{width:"5%",field:"sno",header:"S.No",filteringType:"number"}),a.createElement(l._P,{field:"number",header:"Invoice No",filteringType:"number"}),a.createElement(l._P,{field:"date",header:"Date",filteringType:"date"}),a.createElement(l._P,{field:"company",header:"Company Name",filteringType:"text"}),a.createElement(l._P,{field:"amount",header:"Amount (Rs)",filteringType:"text"}),a.createElement(l._P,{field:"status.descr",header:"Payment Status",filteringType:"text"}),a.createElement(l._P,{field:"created_staus",header:"Type",defaultValue:"Generated",filteringType:"text"}))),a.createElement("div",null,a.createElement(w.z,{label:"Generate TDS Invoice",className:"p-button-plain",style:{margin:"0 20px"},onClick:function(){O(!0)}})),a.createElement(Ce,{displayModal:h,poId:R,customDiscard:Q}),a.createElement(xe,{displayModal:S,customDiscard:Q}),a.createElement(Oe,{displayModal:_,customDiscard:Q}))},Le=a.createElement(o.AW,{path:"tdsinvoice"},a.createElement(o.AW,{path:"new",element:a.createElement(Pe,null)}),a.createElement(o.AW,{path:":id/edit",element:a.createElement(Pe,null)}),a.createElement(o.AW,{index:!0,element:a.createElement(Ze,null)})),Ve="/transaction/tds/invoice/",Te=f.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listInvoice:e.query({query:function(e){var t=e.page,n=e.size,a=e.project,o=e.tds;return{url:(0,f.DS)(Ve,"?page=".concat(t||1,"&page_size=").concat(n||f.IV).concat(a?"&project=".concat(a):"").concat(o?"&tds=".concat(o):""))}},providesTags:function(e){var t;return e?[].concat((0,p.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.key;return{type:f.pJ.VENDOR_INVOICE,key:t}}))),[{type:f.pJ.VENDOR_INVOICE,id:"LIST"}]):[{type:f.pJ.VENDOR_INVOICE,id:"LIST"}]}}),addInvoice:e.mutation({query:function(e){return{url:Ve,method:"POST",body:e}},invalidatesTags:[{type:f.pJ.VENDOR_INVOICE,id:"LIST"}]}),getInvoice:e.query({query:function(e){return"".concat(Ve).concat(e)},providesTags:function(e,t,n){return[{type:f.pJ.VENDOR_INVOICE,id:n}]}}),updateInvoice:e.mutation({query:function(e){var t=e;return console.log(t),{url:"".concat(Ve),method:"POST",body:t}},invalidatesTags:function(e){return[{type:f.pJ.VENDOR_INVOICE,id:null===e||void 0===e?void 0:e.key}]}}),deleteInvoice:e.mutation({query:function(e){return{url:"".concat(Ve).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:f.pJ.VENDOR_INVOICE,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),Ae=Te.useAddInvoiceMutation,ke=Te.useDeleteInvoiceMutation,De=Te.useGetInvoiceQuery,Re=Te.useListInvoiceQuery,Me=Te.useUpdateInvoiceMutation,je=(Te.useGetErrorProneQuery,Te.endpoints.getInvoice,function(e,t,n,a){return new(n||(n=Promise))((function(o,l){function r(e){try{c(a.next(e))}catch(t){l(t)}}function i(e){try{c(a.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,i)}c((a=a.apply(e,t||[])).next())}))}),Fe=function(e){var t=(0,l.pm)(),n=t.showSuccess,r=t.showError,i=(0,a.useState)({}),p=(0,s.Z)(i,2),v=p[0],g=p[1],h=(0,a.useState)("S"),y=(0,s.Z)(h,2),E=y[0],b=(y[1],(0,a.useState)("SAVE")),S=(0,s.Z)(b,2),N=S[0],I=(S[1],(0,o.s0)()),P=(0,o.UO)().id,w=parseInt(P||""),x=isNaN(w)||w<=0,_=(0,a.useRef)(),O=(0,f.ft)(),C=De(w,{skip:x,refetchOnMountOrArgChange:!0}),Z=C.data,L=C.isLoading,V=(0,a.useState)(null),T=(0,s.Z)(V,2),A=(T[0],T[1],(0,a.useState)([])),k=(0,s.Z)(A,2),D=(k[0],k[1],(0,a.useState)(null)),R=(0,s.Z)(D,2),M=R[0],j=R[1],F=(0,a.useState)(null),W=(0,s.Z)(F,2),q=W[0],z=W[1],H=Ae(),G=(0,s.Z)(H,2),B=(G[0],G[1].isLoading),J=(0,f.Gt)("Invoice",{skip:!x,refetchOnMountOrArgChange:x}).data,U=((0,f.Gt)("VCI",{skip:x,refetchOnMountOrArgChange:!x}).data,(0,f.lE)({})),Q=U.data,Y=U.isLoading,K=(0,f.u2)(q,{skip:!q}),X=K.data,$=K.isFetching,ee=Ae(),te=(0,s.Z)(ee,2),ne=te[0],ae=te[1].isLoading,oe=Me(),le=(0,s.Z)(oe,2),re=le[0],ie=le[1].isLoading;(0,a.useEffect)((function(){g(Z||Object.assign(Object.assign({},O),{date:(0,f.Hh)(new Date,!0),number:null===J||void 0===J?void 0:J.next_doc_id,loctyp:"PR"})),Z&&z(Z.vend_key)}),[Z,J]),(0,a.useEffect)((function(){var e;X?(console.log(X),j(null===(e=X[0])||void 0===e?void 0:e.key)):j(null)}),[X]);return a.createElement(a.Fragment,null,a.createElement(l.Rm,{disableSaveBtn:["U","R","C"].includes(null===Z||void 0===Z?void 0:Z.docstatus),baseRoute:"/invoice/tdsinvoice",description:"Invoice",id:w,data:v,isUpdating:ae||ie||B,ref:_,isLoading:L,onSubmit:function(e){return je(void 0,void 0,void 0,(0,c.Z)().mark((function t(){var a,o,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,l=Object.assign(Object.assign({},e),{date:(0,f.p6)(e.date,"yyyy-MM-dd"),loctyp:"PR",itemtyp_key:M,docstatus:E,action:N}),!x){t.next=8;break}return t.next=5,ne(Object.assign(Object.assign({},l),O)).unwrap();case 5:o=t.sent,t.next=11;break;case 8:return t.next=10,re(Object.assign(Object.assign(Object.assign({},l),O),{key:null===Z||void 0===Z?void 0:Z.key})).unwrap();case 10:o=t.sent;case 11:n("Success",o.detail),n("Success",o.detail),setTimeout((function(){I("/invoice/tdsinvoice")}),f.P7),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),r("An error occurred",(null===(a=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===a?void 0:a.detail)||"We couldn't save your post, try again!");case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))},renderForm:function(e,t,n){return a.createElement("div",{className:"pl-4 pt-4 grid p-fluid h-full"},a.createElement(l.Wi,{label:"Invoice Number",name:"number",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{useGrouping:!1,disabled:!0}}}),a.createElement(l.Wi,{label:"Invoice Date",name:"date",className:"col-12 md:col-6",useExplicit:!0,control:e,errors:n,leftSpan:4,rightSpan:6,convertValue:f.Hh,formItem:{component:m.f,componentProps:{showIcon:!0,dateFormat:"yy-mm-dd"}}}),a.createElement(l.Wi,{label:"Project",name:"proj_key",className:"col-12 md:col-6",control:e,errors:n,isLoading:Y,leftSpan:4,rightSpan:6,formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"name",optionValue:"key",filter:!0,filterBy:"name",options:Q}}}),a.createElement(l.Wi,{label:"Item Type",name:"itemtyp_key",control:e,errors:n,isLoading:$,className:"col-12 md:col-6",leftSpan:4,rightSpan:6,useExplicit:!0,onChange:function(e){j(e.value)},formItem:{component:u.L,componentProps:{showClear:!0,optionLabel:"descr",optionValue:"key",filter:!0,filterBy:"descr",options:X,value:M}}}),a.createElement(l.Wi,{label:"Invoice No",name:"invoice_no",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{maxLength:50}}}),a.createElement(l.Wi,{label:"Description",name:"descr",className:"col-12 md:col-6",control:e,errors:n,leftSpan:4,rightSpan:6,formItem:{component:d.o,componentProps:{maxLength:50}}}),a.createElement("div",{className:"col-12 md:col-6"}))}}))},We=n(8391);function qe(e){var t=e.displayModal,n=e.customDiscard,o=(0,f.JB)().data,r=(0,a.useState)(!1),i=(0,s.Z)(r,2),c=(i[0],i[1],(0,a.useState)(!1)),d=(0,s.Z)(c,2),m=(d[0],d[1],(0,a.useState)(null)),v=(0,s.Z)(m,2),g=v[0],h=(v[1],(0,a.useState)(null)),y=(0,s.Z)(h,2),E=y[0],b=y[1],S=(0,a.useState)(null),N=(0,s.Z)(S,2),I=(N[0],N[1],(0,a.useState)([])),x=(0,s.Z)(I,2),O=(x[0],x[1]),C=Re({page:1,size:100,project:g,status:E}),Z=C.data,L=C.isFetching,V=ke(),T=(0,s.Z)(V,2),A=T[0],k=T[1].isLoading,D=(0,f.sq)(),R=D.data;D.isFetching;(0,a.useEffect)((function(){o&&O([{key:null,name:"All"}].concat((0,p.Z)(o)))}),[o]);return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"Generate Salary Invoice Screen",visible:t,position:"center",modal:!0,style:{width:"80vw"},onHide:function(){return n()},draggable:!1,resizable:!1,closable:!0},a.createElement(a.Fragment,null,a.createElement(P.i,null),a.createElement("div",{style:{display:"flex"}},a.createElement("div",{className:"field col-6"},a.createElement("div",{className:"field"},a.createElement("label",{className:"col-3"},"Company Name"),a.createElement(u.L,{style:{width:"30%"},value:E,placeholder:"All",onChange:function(e){b(e.value)},optionLabel:"id",optionValue:"id",options:R}))),a.createElement("div",{className:"field col-6"},a.createElement("label",{className:"col-4"},"Month ID"),a.createElement(u.L,{style:{width:"45%"},disabled:!0,options:Array.from({length:12},(function(e,t){return t+1}))}))),a.createElement("div",{className:"col-12 ",style:{height:"calc(100% - 183px)",minHeight:200}},a.createElement(l.PS,{hideActionColumn:!0,baseRoute:"/invoice/tdsinvoice",description:"Employees with their Monthly Salary",hideAddButton:!0,allowFilters:!1,isLoading:L||k,data:null===Z||void 0===Z?void 0:Z.results,newTable:!0,showHeader:!0,deleteAction:function(e){return A(e).unwrap()}},a.createElement(l._P,{width:"5%",field:"sno",header:"S.No",filteringType:"number"}),a.createElement(l._P,{field:"text1",header:"Employee Name",filteringType:"text"}),a.createElement(l._P,{field:"text2",header:"Salary (Rs)",filteringType:"text"}),a.createElement(l._P,{field:"text3",header:"TDS Amount (Rs)",filteringType:"text"}),a.createElement(l._P,{width:"15%",field:"is_active",header:"Select Employee",displayValueGetter:function(e){return a.createElement("div",{onClick:function(){return console.log(e)},style:{display:"flex",paddingTop:7,justifyContent:"center"}},a.createElement(We.X,{checked:!0}))}}))),a.createElement("div",{style:{display:"flex",margin:"auto",justifyContent:"center"}},a.createElement(w.z,{label:"Generate Salary Invoice",className:"p-button-warning mr-3",onClick:function(){n(!0)}}),a.createElement(w.z,{label:"Close",className:"p-button-plain",onClick:function(){n(!0)}})))))}function ze(e){var t=e.displayModal,n=e.poId,o=e.customDiscard,r=De(n,{refetchOnMountOrArgChange:!0});r.data,r.isFetching;return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"View Invoice",visible:t,position:"center",modal:!0,style:{width:"70vw"},onHide:function(){return o()},closeOnEscape:!0,draggable:!1,resizable:!1,closable:!0},a.createElement("div",{className:"flex col-12"},a.createElement("div",{className:"col-6",style:{fontSize:20}},a.createElement("strong",null,"Ajantha Hardwares")),a.createElement("div",{className:"col-6"})),a.createElement(l.PS,{baseRoute:"/purchase",description:"",data:[{},{},{},{},{},{},{},{},{},{},{},{}],newTable:!0,tableLayoutClass:"h-full",allowFilters:!1,hideActionColumn:!0,gridProps:{allowAdd:!1}},a.createElement(l._P,{field:"sno",header:"S.No",type:"number",width:"5%"}),a.createElement(l._P,{field:"sub_type",header:"Item Sub Type",type:"text"}),a.createElement(l._P,{field:"descr",header:"Item Descr",type:"text"}),a.createElement(l._P,{field:"model_no",header:"Brand Name",type:"text"}),a.createElement(l._P,{field:"model_no",header:"Model No",type:"text"}),a.createElement(l._P,{field:"qty",header:"Quantity",type:"number"}),a.createElement(l._P,{field:"qty",header:"UOM",type:"number"}),a.createElement(l._P,{field:"netamt",header:"Amount",type:"currency",defaultValue:0}))))}function He(e){var t=e.displayModal,n=e.customDiscard,o=(0,f.JB)().data,r=(0,a.useState)(!1),i=(0,s.Z)(r,2),c=(i[0],i[1],(0,a.useState)(!1)),d=(0,s.Z)(c,2),m=(d[0],d[1],(0,a.useState)(null)),v=(0,s.Z)(m,2),g=v[0],h=(v[1],(0,a.useState)(null)),y=(0,s.Z)(h,2),E=y[0],b=y[1],S=(0,a.useState)(null),N=(0,s.Z)(S,2),I=(N[0],N[1],(0,a.useState)([])),x=(0,s.Z)(I,2),O=(x[0],x[1]),C=Re({page:1,size:100,project:g,status:E}),Z=C.data,L=C.isFetching,V=ke(),T=(0,s.Z)(V,2),A=T[0],k=T[1].isLoading,D=(0,f.sq)(),R=D.data;D.isFetching;(0,a.useEffect)((function(){o&&O([{key:null,name:"All"}].concat((0,p.Z)(o)))}),[o]);return a.createElement(a.Fragment,null,a.createElement(_.V,{header:"Generate Allowance Invoice Screen",visible:t,position:"center",modal:!0,style:{width:"80vw"},onHide:function(){return n()},draggable:!1,resizable:!1,closable:!0},a.createElement(a.Fragment,null,a.createElement(P.i,null),a.createElement("div",{style:{display:"flex"}},a.createElement("div",{className:"field col-6"},a.createElement("div",{className:"field"},a.createElement("label",{className:"col-3"},"Company Name"),a.createElement(u.L,{style:{width:"30%"},value:E,placeholder:"All",onChange:function(e){b(e.value)},optionLabel:"id",optionValue:"id",options:R}))),a.createElement("div",{className:"field col-6"},a.createElement("label",{className:"col-4"},"Week ID"),a.createElement(u.L,{style:{width:"45%"},options:Array.from({length:52},(function(e,t){return t+1}))}))),a.createElement("div",{className:"col-12 ",style:{height:"calc(100% - 183px)",minHeight:200}},a.createElement(l.PS,{hideActionColumn:!0,baseRoute:"/invoice/tdsinvoice",description:"Employees with their Monthly Salary",hideAddButton:!0,allowFilters:!1,isLoading:L||k,data:null===Z||void 0===Z?void 0:Z.results,newTable:!0,showHeader:!0,deleteAction:function(e){return A(e).unwrap()}},a.createElement(l._P,{width:"5%",field:"sno",header:"S.No",filteringType:"number"}),a.createElement(l._P,{field:"text1",header:"Employee Name",filteringType:"text"}),a.createElement(l._P,{field:"text2",header:"Allowance Type",filteringType:"text"}),a.createElement(l._P,{field:"text3",header:"Allowance Amount (Rs)",filteringType:"text"}),a.createElement(l._P,{width:"15%",field:"is_active",header:"Select Employee",displayValueGetter:function(e){return a.createElement("div",{onClick:function(){return console.log(e)},style:{display:"flex",paddingTop:7,justifyContent:"center"}},a.createElement(We.X,{checked:!0}))}}))),a.createElement("div",{style:{display:"flex",margin:"auto",justifyContent:"center"}},a.createElement(w.z,{label:"Generate Allowance Invoice",className:"p-button-warning mr-3",onClick:function(){n(!0)}}),a.createElement(w.z,{label:"Close",className:"p-button-plain",onClick:function(){n(!0)}})))))}var Ge=function(e){var t=(0,a.useState)(1),n=(0,s.Z)(t,2),o=n[0],r=n[1],i=(0,a.useState)(f.IV),c=(0,s.Z)(i,2),d=c[0],m=c[1],v=(0,f.JB)().data,g=(0,a.useState)(!1),h=(0,s.Z)(g,2),y=h[0],E=h[1],b=(0,a.useState)(!1),S=(0,s.Z)(b,2),N=S[0],I=S[1],x=(0,a.useState)(!1),_=(0,s.Z)(x,2),O=_[0],C=_[1],Z=(0,a.useState)(null),L=(0,s.Z)(Z,2),V=L[0],T=L[1],A=(0,a.useState)(null),k=(0,s.Z)(A,2),D=k[0],R=k[1],M=(0,a.useState)(null),j=(0,s.Z)(M,2),F=j[0],W=j[1],q=(0,a.useState)([]),z=(0,s.Z)(q,2),H=z[0],G=z[1],B=Re({page:o,size:d,project:V,status:D}),J=B.data,U=B.isFetching,Q=ke(),Y=(0,s.Z)(Q,2),K=Y[0],X=Y[1].isLoading,$=(0,f.sq)(),ee=$.data;$.isFetching;(0,a.useEffect)((function(){v&&G([{key:null,name:"All"}].concat((0,p.Z)(v)))}),[v]);var te=function(){E(!1),I(!1),C(!1)};return a.createElement(a.Fragment,null,a.createElement(P.i,null),a.createElement("div",{style:{display:"flex"}},a.createElement("div",{className:"field col-6"},a.createElement("label",{className:"col-3"},"Project Name"),a.createElement(u.L,{style:{width:"30%"},optionLabel:"name",optionValue:"key",value:V,onChange:function(e){T(e.value)},options:H,placeholder:"All"})),a.createElement("div",{className:"field col-6"},a.createElement("div",{className:"field"},a.createElement("label",{className:"col-3"},"Company Name"),a.createElement(u.L,{style:{width:"30%"},value:D,placeholder:"All",onChange:function(e){R(e.value)},optionLabel:"id",optionValue:"id",options:ee})))),a.createElement("div",{className:"col-12 ",style:{height:"calc(100% - 183px)",minHeight:200}},a.createElement(l.PS,{enableView:!0,onViewClick:function(e){console.log(e),W(e),E(!0)},pagination:{pageSize:d,loading:U,currentPage:o,total:null===J||void 0===J?void 0:J.count,onChange:function(e,t){r(e),m(t)}},baseRoute:"/invoice/tdsinvoice",description:"Salary/Allowance Invoice",hideActionColumn:!0,hideAddButton:!0,allowFilters:!1,isLoading:U||X,data:null===J||void 0===J?void 0:J.results,newTable:!0,showHeader:!0,deleteAction:function(e){return K(e).unwrap()}},a.createElement(l._P,{width:"5%",field:"sno",header:"S.No",filteringType:"number"}),a.createElement(l._P,{field:"number",header:"Invoice No",filteringType:"number"}),a.createElement(l._P,{field:"date",header:"Date",filteringType:"date"}),a.createElement(l._P,{field:"company",header:"Company Name",filteringType:"text"}),a.createElement(l._P,{field:"company",header:"Employee Name",filteringType:"text"}),a.createElement(l._P,{field:"amount",header:"Amount (Rs)",filteringType:"text"}),a.createElement(l._P,{field:"status.descr",header:"Payment Type",filteringType:"text"}),a.createElement(l._P,{field:"status.descr",header:"TDS (Rs)",filteringType:"text"}),a.createElement(l._P,{field:"status.descr",header:"Payment Status",filteringType:"text"}))),a.createElement("div",null,a.createElement(w.z,{label:"Generate Salary Invoice",className:"p-button-plain",style:{margin:"0 20px"},onClick:function(){C(!0)}}),a.createElement(w.z,{label:"Generate Allowance Invoice",className:"p-button-plain",style:{margin:"0 20px"},onClick:function(){I(!0)}})),a.createElement(ze,{displayModal:y,poId:F,customDiscard:te}),a.createElement(qe,{displayModal:O,customDiscard:te}),a.createElement(He,{displayModal:N,customDiscard:te}))},Be=a.createElement(o.AW,{path:"salaryinvoice"},a.createElement(o.AW,{path:"new",element:a.createElement(Fe,null)}),a.createElement(o.AW,{path:":id/edit",element:a.createElement(Fe,null)}),a.createElement(o.AW,{index:!0,element:a.createElement(Ge,null)})),Je=function(){var e,t,n;null===(n=null===(t=null===(e=(0,f.aC)().user)||void 0===e?void 0:e.role[0])||void 0===t?void 0:t.access)||void 0===n||n.map((function(e){return e.name}));return a.createElement(o.Z5,null,a.createElement(o.AW,{path:"/",element:a.createElement(l.SV,{navItems:i})},a.createElement(o.AW,{index:!0,element:a.createElement(o.Fg,{to:"vendorinvoice",replace:!0})}),D,$,ve,Le,Be,a.createElement(o.AW,{path:":invoice/comming-soon",element:a.createElement(l.hg,null)}),a.createElement(o.AW,{path:"*",element:a.createElement(l.EN,{relative:!0})})))}},8356:function(e,t,n){n.d(t,{i:function(){return r}});var a=n(969),o=n(4756);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(this,arguments)}var r=a.forwardRef((function(e,t){var n="horizontal"===e.layout,i="vertical"===e.layout,c=o.gb.findDiffKeys(e,r.defaultProps),s=(0,o.AK)("p-divider p-component p-divider-".concat(e.layout," p-divider-").concat(e.type),{"p-divider-left":n&&(!e.align||"left"===e.align),"p-divider-right":n&&"right"===e.align,"p-divider-center":n&&"center"===e.align||i&&(!e.align||"center"===e.align),"p-divider-top":i&&"top"===e.align,"p-divider-bottom":i&&"bottom"===e.align},e.className);return a.createElement("div",l({className:s,style:e.style,role:"separator"},c),a.createElement("div",{className:"p-divider-content"},e.children))}));r.displayName="Divider",r.defaultProps={__TYPE:"Divider",align:null,layout:"horizontal",type:"solid",style:null,className:null}},1002:function(e,t,n){n.d(t,{g:function(){return i}});var a=n(969),o=n(9459),l=n(4756);function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r.apply(this,arguments)}var i=a.memo(a.forwardRef((function(e,t){var n=a.useRef(t),c=a.useRef(0),s=function(e){var t=n.current;t&&l.p7.isVisible(t)&&(c.current||(c.current=t.scrollHeight,t.style.overflow="hidden"),(c.current!==t.scrollHeight||e)&&(t.style.height="",t.style.height=t.scrollHeight+"px",parseFloat(t.style.height)>=parseFloat(t.style.maxHeight)?(t.style.overflowY="scroll",t.style.height=t.style.maxHeight):t.style.overflow="hidden",c.current=t.scrollHeight))},d=a.useMemo((function(){return l.gb.isNotEmpty(e.value)||l.gb.isNotEmpty(e.defaultValue)||n.current&&l.gb.isNotEmpty(n.current.value)}),[e.value,e.defaultValue]);a.useEffect((function(){l.gb.combinedRefs(n,t)}),[n,t]),a.useEffect((function(){e.autoResize&&s(!0)}),[e.autoResize]);var m=l.gb.isNotEmpty(e.tooltip),u=l.gb.findDiffKeys(e,i.defaultProps),p=(0,l.AK)("p-inputtextarea p-inputtext p-component",{"p-disabled":e.disabled,"p-filled":d,"p-inputtextarea-resizable":e.autoResize},e.className);return a.createElement(a.Fragment,null,a.createElement("textarea",r({ref:n},u,{className:p,onFocus:function(t){e.autoResize&&s(),e.onFocus&&e.onFocus(t)},onBlur:function(t){e.autoResize&&s(),e.onBlur&&e.onBlur(t)},onKeyUp:function(t){e.autoResize&&s(),e.onKeyUp&&e.onKeyUp(t)},onInput:function(t){e.autoResize&&s(),e.onInput&&e.onInput(t);var n=t.target;l.gb.isNotEmpty(n.value)?l.p7.addClass(n,"p-filled"):l.p7.removeClass(n,"p-filled")}})),m&&a.createElement(o.u,r({target:n,content:e.tooltip},e.tooltipOptions)))})));i.displayName="InputTextarea",i.defaultProps={__TYPE:"InputTextarea",autoResize:!1,tooltip:null,tooltipOptions:null,onInput:null}}}]);
//# sourceMappingURL=373.a15a00db.chunk.js.map