"use strict";(self.webpackChunkbuild_iq_app=self.webpackChunkbuild_iq_app||[]).push([[673],{3673:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var r=n(969),a=n(3026),i=n(3499),l=n(8121),o="customers",c="Customers",s=function(e,t){return(0,i.E7)("/".concat(l.o,"/").concat(e)+(t?"/comming-soon":""))},u=[{label:"Transctions",items:[{label:"Sales Booking",icon:"pi ml-3",template:s("salesbooking",!0)},{label:"Cancel Booking",icon:"pi ml-3",template:s("cancelbooking",!0)},{label:"Invoice",icon:"pi ml-3",template:s("invoice",!0)},{label:"Receipt",icon:"pi ml-3",template:s("receipt",!0)},{label:"Receipt Allocation",icon:"pi ml-3",template:s("receiptalloc",!0)}]},{label:"Configuration",items:[{label:"Customers",icon:"pi ml-3",template:s(o)}]}],d=n(3668),m=n(2867),p=n(4225),v=n(7765),f=n(4756),y=n(8252),E=n(8224),g=n(8777),b=n(6076),h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},C="/sale/customer/",O=b.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listCustomer:e.query({query:function(e){var t=e.page,n=e.size;return{url:(0,b.DS)(C,"?page=".concat(t||1,"&page_size=").concat(n||b.IV))}},providesTags:function(e){var t;return e?[].concat((0,g.Z)(null===(t=null===e||void 0===e?void 0:e.results)||void 0===t?void 0:t.map((function(e){var t=e.id;return{type:b.pJ.VENDOR_GROUP,id:t}}))),[{type:b.pJ.VENDOR_GROUP,id:"LIST"}]):[{type:b.pJ.VENDOR_GROUP,id:"LIST"}]}}),addCustomer:e.mutation({query:function(e){return{url:C,method:"POST",body:e}},invalidatesTags:[{type:b.pJ.VENDOR_GROUP,id:"LIST"}]}),getCustomer:e.query({query:function(e){return"".concat(C).concat(e)},providesTags:function(e,t,n){return[{type:b.pJ.VENDOR_GROUP,id:n}]}}),updateCustomer:e.mutation({query:function(e){var t=e.key,n=h(e,["key"]);return{url:"".concat(C).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:b.pJ.VENDOR_GROUP,id:null===e||void 0===e?void 0:e.id}]}}),getStates:e.query({query:function(){return{url:"/geo/state/"}},providesTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[].concat((0,g.Z)(e.map((function(e){var t=e.state_key;return{type:b.pJ.STATES,id:t}}))),[{type:b.pJ.STATES,id:"LIST"}])}}),getCities:e.query({query:function(){return{url:"/geo/city/"}},providesTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[].concat((0,g.Z)(e.map((function(e){var t=e.city_key;return{type:b.pJ.CITIES,id:t}}))),[{type:b.pJ.CITIES,id:"LIST"}])}}),deleteCustomer:e.mutation({query:function(e){return{url:"".concat(C).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:b.pJ.VENDOR_GROUP,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),S=O.useAddCustomerMutation,N=O.useDeleteCustomerMutation,A=O.useGetCustomerQuery,k=O.useListCustomerQuery,T=O.useUpdateCustomerMutation,L=(O.useGetErrorProneQuery,O.useGetCitiesQuery),q=O.useGetStatesQuery,x=(O.endpoints.getCustomer,function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function l(e){try{c(r.next(e))}catch(t){i(t)}}function o(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}c((r=r.apply(e,t||[])).next())}))}),R={client_id:"1001",company:"TEST"},_=function(e){var t=(0,r.useRef)(null),n=(0,r.useState)(!1),s=(0,m.Z)(n,2),u=s[0],g=s[1],b=(0,a.s0)(),h=(0,a.UO)().id,C=parseInt(h||""),O=isNaN(C)||C<=0,N=A(C,{skip:O}),k=N.data,_=N.isLoading,w=q().data,I=L().data,j=S(),P=(0,m.Z)(j,2),D=P[0],G=P[1].isLoading,K=T(),J=(0,m.Z)(K,2),Q=J[0],U=J[1].isLoading,V=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"success",summary:e,detail:n,life:3e3})},W=function(e,n){var r;null===(r=null===t||void 0===t?void 0:t.current)||void 0===r||r.show({severity:"error",summary:e,detail:n,life:3e3})},F=[{label:"Create",items:I||[]}];return r.createElement(r.Fragment,null,r.createElement(y.F,{ref:t}),r.createElement(i.Rm,{baseRoute:"/".concat(l.o,"/").concat(o),description:c,id:C,data:k,isUpdating:G||U||u,isLoading:_,onSubmit:function(e){return x(void 0,void 0,void 0,(0,d.Z)().mark((function t(){var n;return(0,d.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!O){t.next=7;break}return t.next=4,D(Object.assign(Object.assign({},e),R)).unwrap();case 4:n=t.sent,t.next=10;break;case 7:return t.next=9,Q(Object.assign(Object.assign({},e),R)).unwrap();case 9:n=t.sent;case 10:V("Success",n.detail),g(!0),setTimeout((function(){b("/".concat(l.o,"/").concat(o))}),3e3),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),W("An error occurred","We couldn't save your post, try again!");case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))},renderForm:function(e,t,n){var a,l,o,c;return r.createElement("div",{className:"pl-8"},r.createElement("div",{className:"field"},r.createElement("label",{htmlFor:"id",className:(0,f.AK)("col-2",{"p-error":n.id})},"Customer ID*"),r.createElement(p.Qr,{name:"id",control:e,rules:{required:"Item ID is required.",maxLength:{value:25,message:"max 25 Char"}},render:function(e){var t=e.field,n=e.fieldState;return r.createElement(v.o,Object.assign({disabled:!O,id:t.name},t,{className:(0,f.AK)({"p-invalid":n.invalid})}))}}),(0,i.Hb)(null===(a=null===n||void 0===n?void 0:n.id)||void 0===a?void 0:a.message)),r.createElement("div",{className:"field"},r.createElement("label",{htmlFor:"name",className:(0,f.AK)("col-2",{"p-error":n.name})},"Customer Name*"),r.createElement(p.Qr,{name:"name",control:e,rules:{required:"Item Description is required.",maxLength:{value:100,message:"max 100 Char"}},render:function(e){var t=e.field,n=e.fieldState;return r.createElement(v.o,Object.assign({style:{width:"40%"},id:t.name},t,{className:(0,f.AK)({"p-invalid":n.invalid})}))}}),(0,i.Hb)(null===(l=null===n||void 0===n?void 0:n.name)||void 0===l?void 0:l.message)),r.createElement("div",{className:"field"},r.createElement("label",{htmlFor:"addr1",className:(0,f.AK)("col-2",{"p-error":n.addr1})}," Address Line 1"),r.createElement(p.Qr,{name:"addr1",control:e,rules:{maxLength:{value:100,message:"max 100 Char"}},render:function(e){var t=e.field,n=e.fieldState;return r.createElement(v.o,Object.assign({id:t.name},t,{style:{width:"50%"},className:(0,f.AK)({"p-invalid":n.invalid})}))}})),r.createElement("div",{className:"field"},r.createElement("label",{htmlFor:"addr2",className:(0,f.AK)("col-2",{"p-error":n.addr2})}," Address Line 2"),r.createElement(p.Qr,{name:"addr2",control:e,rules:{maxLength:{value:100,message:"max 100 Char"}},render:function(e){var t=e.field,n=e.fieldState;return r.createElement(v.o,Object.assign({id:t.name},t,{style:{width:"50%"},className:(0,f.AK)({"p-invalid":n.invalid})}))}})),r.createElement("div",{className:"field"},r.createElement("label",{htmlFor:"state_key",className:(0,f.AK)("col-2",{"p-error":n.state_key})},"State*"),r.createElement(p.Qr,{name:"state_key",control:e,rules:{required:"State is required."},render:function(e){var t=e.field,n=e.fieldState;return r.createElement(E.L,Object.assign({id:t.name},t,{style:{width:"30%"},className:(0,f.AK)({"p-invalid":n.invalid}),optionLabel:"name",optionValue:"key",filter:!0,filterBy:"name",options:w}))}}),(0,i.Hb)(null===(o=null===n||void 0===n?void 0:n.state_key)||void 0===o?void 0:o.message)),r.createElement("div",{className:"field"},r.createElement("label",{htmlFor:"city_key",className:(0,f.AK)("col-2",{"p-error":n.descr})},"City*"),r.createElement(p.Qr,{name:"city_key",control:e,rules:{required:"City is required."},render:function(e){var t=e.field,n=e.fieldState;return r.createElement(E.L,Object.assign({optionGroupTemplate:r.createElement("div",{style:{cursor:"pointer",textAlign:"center",backgroundColor:"lightgray"},onClick:function(){return b("/projects/city")}},"--Create And Edit--"),id:t.name},t,{style:{width:"30%"},className:(0,f.AK)({"p-invalid":n.invalid}),optionValue:"key",optionGroupLabel:"label",optionLabel:"name",optionGroupChildren:"items",options:F}))}}),(0,i.Hb)(null===(c=null===n||void 0===n?void 0:n.city_key)||void 0===c?void 0:c.message)))}}))},w=n(4401),I=n(7624),j=function(e){var t=k({}),n=t.data,a=t.isLoading,s=N(),u=(0,m.Z)(s,2),d=u[0],p=u[1].isLoading;return r.createElement(i.PS,{baseRoute:"/".concat(l.o,"/").concat(o),description:c,isLoading:a||p,data:null===n||void 0===n?void 0:n.results,deleteAction:function(e){return d(e).unwrap()}},r.createElement(w.s,{headerStyle:I.iR,field:"id",header:"Customer ID",sortable:!0,filter:!0,dataType:"numeric",style:{minWidth:"8rem"}}),r.createElement(w.s,{headerStyle:I.iR,field:"name",header:"Customer Name",sortable:!0,filter:!0,style:{minWidth:"12rem"}}))},P=r.createElement(a.AW,{path:o},r.createElement(a.AW,{path:"new",element:r.createElement(_,null)}),r.createElement(a.AW,{path:":id/edit",element:r.createElement(_,null)}),r.createElement(a.AW,{index:!0,element:r.createElement(j,null)})),D=function(){return r.createElement(a.Z5,null,r.createElement(a.AW,{path:"/",element:r.createElement(i.SV,{navItems:u})},r.createElement(a.AW,{index:!0,element:r.createElement(a.Fg,{to:o,replace:!0})}),P,r.createElement(a.AW,{path:":page/comming-soon",element:r.createElement(i.hg,null)}),r.createElement(a.AW,{path:"*",element:r.createElement(i.EN,{relative:!0})})))}}}]);
//# sourceMappingURL=673.fd44643e.chunk.js.map