"use strict";(self.webpackChunkbuild_iq_app=self.webpackChunkbuild_iq_app||[]).push([[892],{7892:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ee}});var a=n(969),r=n(734),o=n(2035),i=n(2711),c=function(e,t){return(0,o.E7)("/".concat(i.o,"/").concat(e)+(t?"/comming-soon":""))},l=[{items:[{label:"Client",icon:"pi ml-3",template:c("client")},{label:"Company",icon:"pi ml-3",template:c("companies")},{label:"Staff",icon:"pi ml-3",template:c("staff")},{label:"Bank Account",icon:"pi ml-3",template:c("bank")}]}],u=n(2723),s=n(6234),d=n(7765),p=n(8224),m=n(6770),f=n(1002),g=n(9459),y=n(8079),v=n(1495),h=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},E="/client/company/",b=v.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listCompany:e.query({query:function(e){var t=e.page,n=e.size;return{url:"".concat(E,"?page=").concat(t||1,"&page_size=").concat(n||v.IV)}},providesTags:function(e){return e?[].concat((0,y.Z)(null===e||void 0===e?void 0:e.map((function(e){var t=e.id;return{type:v.pJ.COMPANIES,id:t}}))),[{type:v.pJ.COMPANIES,id:"LIST"}]):[{type:v.pJ.COMPANIES,id:"LIST"}]}}),addCompany:e.mutation({query:function(e){return{url:E,method:"POST",body:e}},invalidatesTags:[{type:v.pJ.COMPANIES,id:"LIST"}]}),getCompany:e.query({query:function(e){return"".concat(E).concat(e)},providesTags:function(e,t,n){return[{type:v.pJ.COMPANIES,id:n}]}}),updateCompany:e.mutation({query:function(e){var t=e.id,n=h(e,["id"]);return{url:"".concat(E).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:v.pJ.COMPANIES,id:null===e||void 0===e?void 0:e.id}]}}),deleteCompany:e.mutation({query:function(e){return{url:"".concat(E).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:v.pJ.COMPANIES,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),S=b.useAddCompanyMutation,P=b.useDeleteCompanyMutation,x=b.useGetCompanyQuery,O=b.useListCompanyQuery,T=b.useUpdateCompanyMutation,C=(b.useGetErrorProneQuery,"companies"),w="Company",N=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},A="/client/client/",L=v.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listClient:e.query({query:function(e){var t=e.page,n=e.size;return{url:(0,v.DS)(A,"?page=".concat(t||1,"&page_size=").concat(n||v.IV))}},providesTags:function(e){return e?[].concat((0,y.Z)(null===e||void 0===e?void 0:e.map((function(e){var t=e.id;return{type:v.pJ.CLIENTS,id:t}}))),[{type:v.pJ.CLIENTS,id:"LIST"}]):[{type:v.pJ.CLIENTS,id:"LIST"}]}}),addClient:e.mutation({query:function(e){return{url:A,method:"POST",body:e}},invalidatesTags:[{type:v.pJ.CLIENTS,id:"LIST"}]}),getClient:e.query({query:function(e){return"".concat(A).concat(e)},providesTags:function(e,t,n){return[{type:v.pJ.CLIENTS,id:n}]}}),updateClient:e.mutation({query:function(e){var t=e.id,n=N(e,["id"]);return{url:"".concat(A).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:v.pJ.CLIENTS,id:null===e||void 0===e?void 0:e.id}]}}),deleteClient:e.mutation({query:function(e){return console.log(e),{url:"".concat(A).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:v.pJ.CLIENTS,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),I=L.useAddClientMutation,j=L.useDeleteClientMutation,k=(L.useGetClientQuery,L.useListClientQuery),q=L.useUpdateClientMutation,Z=(L.useGetErrorProneQuery,L.endpoints.getClient,n(4576)),_=(0,a.forwardRef)((function(e,t){var n=e.data,r=e.isLoading,i=e.disableTable,c=void 0!==i&&i,l=e.onChange,u=void 0===l?function(){}:l,d=(0,a.useState)([]),p=(0,s.Z)(d,2),f=p[0],g=p[1],y=(0,a.useRef)(f);(0,a.useImperativeHandle)(t,(function(){return{getItems:function(){return f}}})),(0,a.useEffect)((function(){g(n),y.current=n}),[n]);return a.createElement(o.PS,{baseRoute:"/purchase/".concat(C),description:w,isLoading:r,data:f,newTable:!0,tableLayoutClass:"h-full",allowFilters:!1,hideActionColumn:c,actionBodyTemplate:function(e){return a.createElement(m.z,{style:{height:"35px",width:"20px",marginLeft:20},type:"button",onClick:function(){(0,Z.V)({message:"Are you sure you want to Delete Item?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){return function(e){var t=y.current.filter((function(t){return t!==e}));y.current=t,g(t)}(e)},reject:function(){}})},className:"p-button-rounded p-button-text",icon:"pi pi-trash"})},gridProps:{allowAdd:!0,newRowDefaults:{sno:f.length+1},OnRowsChanged:function(e){g(e),y.current=e,u(!0)}}},a.createElement(o._P,{width:"10%",field:"sno",header:"S.No",type:"number"}),a.createElement(o._P,{field:"acc_name",header:"Account Name",type:"text",editorType:!c&&"text"}),a.createElement(o._P,{field:"Bank Name",header:"Bank Name",type:"text",editorType:!c&&"text"}),a.createElement(o._P,{field:"acc_no",header:"Account No",type:"number",editorType:!c&&"number"}))})),W=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{l(a.next(e))}catch(t){o(t)}}function c(e){try{l(a.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((a=a.apply(e,t||[])).next())}))},F=function(e){var t=(0,o.pm)(),n=t.showSuccess,c=t.showError,l=(0,a.useState)(!1),m=(0,s.Z)(l,2),y=m[0],h=m[1],E=(0,r.s0)(),b=(0,r.UO)().id||"",P=!b,O=(0,a.useRef)([]),N=(0,a.useRef)(),A=(0,v.ft)(),L=x(b,{skip:P}),I=L.data,j=L.isLoading,q=k({}),Z=q.data,F=q.isLoading,M=S(),z=(0,s.Z)(M,2),R=z[0],J=z[1].isLoading,B=T(),V=(0,s.Z)(B,2),U=V[0],D=V[1].isLoading,G=(0,a.useState)([]),H=(0,s.Z)(G,2),K=(H[0],H[1]);(0,a.useEffect)((function(){I&&(null===I||void 0===I?void 0:I.project_status)&&K(I.project_status)}),[I]);return a.createElement(a.Fragment,null,a.createElement(o.Rm,{baseRoute:"/".concat(i.o,"/").concat(C),description:w,id:b,data:I,isUpdating:J||D||y,isLoading:j,onSubmit:function(e){return W(void 0,void 0,void 0,(0,u.Z)().mark((function t(){var a,r,o;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,console.log(O.current),o=Object.assign(Object.assign({},e),{project_status:O.current}),!P){t.next=9;break}return t.next=6,R(Object.assign(Object.assign({},o),A)).unwrap();case 6:r=t.sent,t.next=12;break;case 9:return t.next=11,U(Object.assign(Object.assign({},o),A)).unwrap();case 11:r=t.sent;case 12:n("Success",r.detail),h(!0),setTimeout((function(){E("/".concat(i.o,"/").concat(C))}),v.P7),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),c("An error occurred",(null===(a=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===a?void 0:a.detail)||"We couldn't save your post, try again!");case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))},renderForm:function(e,t,n){return a.createElement("div",{className:"pl-8 pt-4 pb-3 grid p-fluid"},a.createElement(o.Wi,{label:"Company Name",name:"name",className:"col-12",control:e,errors:n,required:"Enter Company Name",leftSpan:2,rightSpan:3,formItem:{component:d.o,componentProps:{maxLength:100}}}),a.createElement(g.u,{mouseTrack:!0,mouseTrackLeft:10,target:"#company-client",position:"top",content:"Can't Be Modified Once Added",className:"my-tooltip"}),a.createElement(o.Wi,{label:"Client",name:"client",className:"col-12",control:e,errors:n,isLoading:F,required:!0,leftSpan:2,rightSpan:3,useExplicit:!0,formItem:{component:p.L,componentProps:{showClear:!0,optionLabel:"name",optionValue:"id",filter:!0,id:"company-client",disabled:!P,filterBy:"name",options:Z}}}),a.createElement(o.Wi,{label:"Address",name:"addr",control:e,errors:n,className:"col-12",leftSpan:2,rightSpan:3,formItem:{component:f.g,componentProps:{maxLength:100}}}),a.createElement(o.Wi,{label:"GST No",name:"gstno",className:"col-12",control:e,errors:n,required:!0,leftSpan:2,rightSpan:3,formItem:{component:d.o,componentProps:{maxLength:100}}}),a.createElement(o.Wi,{label:"PAN No",name:"panno",className:"col-12",control:e,errors:n,required:!0,leftSpan:2,rightSpan:3,formItem:{component:d.o,componentProps:{maxLength:100}}}),a.createElement("div",{className:"col-12 ",style:{height:"calc(100% - 183px)",minHeight:200}},a.createElement(_,{data:(null===I||void 0===I?void 0:I.bank_accounts)||[],isLoading:j,ref:N})))}}))},M=function(e){var t=(0,a.useState)(1),n=(0,s.Z)(t,2),r=n[0],c=n[1],l=(0,a.useState)(v.IV),u=(0,s.Z)(l,2),d=u[0],p=u[1],m=O({page:r,size:d},{refetchOnMountOrArgChange:!0}),f=m.data,g=m.isFetching,y=P(),h=(0,s.Z)(y,2),E=h[0],b=h[1].isLoading;return a.createElement(o.PS,{pagination:{pageSize:d,loading:g,currentPage:r,total:null===f||void 0===f?void 0:f.length,onChange:function(e,t){c(e),p(t)}},baseRoute:"/".concat(i.o,"/").concat(C),description:w,isLoading:g||b,data:f,deleteAction:function(e){return E(e).unwrap()},newTable:!0,showHeader:!0,navKey:"id",delKey:"id"},a.createElement(o._P,{field:"id",header:"Company Code",filteringType:"number"}),a.createElement(o._P,{field:"name",header:"Company Name",filteringType:"text"}),a.createElement(o._P,{field:"client",header:"Client",filteringType:"text",displayValueGetter:function(e){return null===e||void 0===e?void 0:e.name}}),a.createElement(o._P,{field:"project_status",header:"Project Statuses",displayValueGetter:function(e){var t;return null===(t=null===e||void 0===e?void 0:e.project_status)||void 0===t?void 0:t.map((function(e){return e.descr})).join(",")},filteringType:"text"}))},z=a.createElement(r.AW,{path:C},a.createElement(r.AW,{path:"new",element:a.createElement(F,null)}),a.createElement(r.AW,{path:":id/edit",element:a.createElement(F,null)}),a.createElement(r.AW,{index:!0,element:a.createElement(M,null)})),R=n(9002),J=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{l(a.next(e))}catch(t){o(t)}}function c(e){try{l(a.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((a=a.apply(e,t||[])).next())}))},B=function(e){var t=(0,o.pm)(),n=t.showSuccess,r=t.showError,i=(0,a.useState)(1),c=(0,s.Z)(i,2),l=c[0],p=c[1],f=(0,a.useState)(v.IV),g=(0,s.Z)(f,2),y=g[0],h=g[1],E=(0,a.useState)(!1),b=(0,s.Z)(E,2),S=b[0],P=b[1],x=(0,a.useState)(!1),O=(0,s.Z)(x,2),T=O[0],C=O[1],w=(0,a.useState)({}),N=(0,s.Z)(w,2),A=N[0],L=N[1],Z=(0,a.useState)(!0),_=(0,s.Z)(Z,2),W=_[0],F=_[1],M=(0,v.ft)(),z=k({page:l,size:y}),B=z.data,V=z.isFetching,U=I(),D=(0,s.Z)(U,2),G=D[0],H=D[1].isLoading,K=q(),Q=(0,s.Z)(K,2),Y=Q[0],X=Q[1].isLoading,$=j(),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1].isLoading,ae=a.createElement(m.z,{className:"ml-3",label:"Add",onClick:function(){F(!0),L({}),P(!0)}});return a.createElement(a.Fragment,null,a.createElement(o.PS,{pagination:{pageSize:y,loading:V,currentPage:l,total:null===B||void 0===B?void 0:B.length,onChange:function(e,t){p(e),h(t)}},hideAddButton:!0,customEditOnClick:function(e){F(!1),L(e),P(!0)},customAddBtn:ae,baseRoute:"/clients/client",description:"Clients",isLoading:V||ne,data:B,newTable:!0,showHeader:!0,delKey:"id",deleteAction:function(e){return console.log(e),te(e).unwrap()}},a.createElement(o._P,{filteringType:"text",field:"id",header:"Client Code",sortable:!0,filter:!0,dataType:"numeric",style:{minWidth:"8rem"}}),a.createElement(o._P,{filteringType:"text",field:"name",header:"Client Name",sortable:!0,filter:!0,style:{minWidth:"12rem"}})),a.createElement(R.V,{header:"".concat(W?"Add":"Edit"," Client"),visible:S,footer:function(){return a.createElement("div",null,a.createElement(m.z,{label:"Save",loading:H||X,className:"p-button-warning mr-3",onClick:function(){return J(void 0,void 0,void 0,(0,u.Z)().mark((function e(){var t,a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===A||void 0===A?void 0:A.name){e.next=4;break}return r("Name Field is Empty","Please Enter a Name"),e.abrupt("return");case 4:if(!W){e.next=10;break}return e.next=7,G(Object.assign(Object.assign({},A),M)).unwrap();case 7:a=e.sent,e.next=13;break;case 10:return e.next=12,Y(Object.assign(Object.assign({},A),M)).unwrap();case 12:a=e.sent;case 13:n("Success",a.detail),setTimeout((function(){C(!1),P(!1)}),v.P7),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),r("An error occurred",(null===(t=null===e.t0||void 0===e.t0?void 0:e.t0.data)||void 0===t?void 0:t.detail)||"We couldn't save your post, try again!");case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))}}),a.createElement(m.z,{label:"Discard",loading:H||X,className:"p-button-plain",onClick:function(){T?confirm("Are You Sure to Discard?")&&P(!1):P(!1)}}))},position:"center",modal:!0,style:{width:"50vw"},onHide:function(){return P(!1)},draggable:!1,resizable:!1,closable:!1},a.createElement("div",{style:{padding:15}},a.createElement("div",{className:"field"},a.createElement("label",{style:{fontSize:18},className:"col-2"},"Name*"),a.createElement(d.o,{style:{width:"30%"},defaultValue:null===A||void 0===A?void 0:A.name,onChange:function(e){!T&&C(!0),L(Object.assign(Object.assign({},A),{name:e.target.value}))}})))))},V=a.createElement(r.AW,{path:"client"},a.createElement(r.AW,{index:!0,element:a.createElement(B,null)})),U=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},D="/client/bank/",G=v.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listBank:e.query({query:function(e){var t=e.page,n=e.size;return{url:"".concat(D,"?page=").concat(t||1,"&page_size=").concat(n||v.IV)}},providesTags:function(e){return e?[].concat((0,y.Z)(null===e||void 0===e?void 0:e.map((function(e){var t=e.id;return{type:v.pJ.COMPANIES,id:t}}))),[{type:v.pJ.COMPANIES,id:"LIST"}]):[{type:v.pJ.COMPANIES,id:"LIST"}]}}),addBank:e.mutation({query:function(e){return{url:D,method:"POST",body:e}},invalidatesTags:[{type:v.pJ.COMPANIES,id:"LIST"}]}),getBank:e.query({query:function(e){return"".concat(D).concat(e)},providesTags:function(e,t,n){return[{type:v.pJ.COMPANIES,id:n}]}}),updateBank:e.mutation({query:function(e){var t=e.id,n=U(e,["id"]);return{url:"".concat(D).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:v.pJ.COMPANIES,id:null===e||void 0===e?void 0:e.id}]}}),deleteBank:e.mutation({query:function(e){return{url:"".concat(D).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:v.pJ.COMPANIES,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),H=G.useAddBankMutation,K=G.useDeleteBankMutation,Q=G.useGetBankQuery,Y=G.useListBankQuery,X=G.useUpdateBankMutation,$=(G.useGetErrorProneQuery,"bank"),ee="Bank Account",te=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{l(a.next(e))}catch(t){o(t)}}function c(e){try{l(a.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((a=a.apply(e,t||[])).next())}))},ne=function(e){var t=(0,o.pm)(),n=t.showSuccess,c=t.showError,l=(0,a.useState)(!1),p=(0,s.Z)(l,2),m=p[0],f=p[1],g=(0,a.useState)(""),y=(0,s.Z)(g,2),h=y[0],E=y[1],b=(0,a.useState)(""),S=(0,s.Z)(b,2),P=S[0],x=S[1],O=(0,r.s0)(),T=(0,r.UO)().id||"",C=!T,w=(0,v.ft)(),N=Q(T,{skip:C}),A=N.data,L=N.isLoading,I=H(),j=(0,s.Z)(I,2),k=j[0],q=j[1].isLoading,Z=X(),_=(0,s.Z)(Z,2),W=_[0],F=_[1].isLoading,M=(0,a.useState)([]),z=(0,s.Z)(M,2),R=(z[0],z[1]);(0,a.useEffect)((function(){A&&(null===A||void 0===A?void 0:A.project_status)&&R(A.project_status)}),[A]);return a.createElement(a.Fragment,null,a.createElement(o.Rm,{baseRoute:"/".concat(i.o,"/").concat($),description:ee,id:T,data:A,isUpdating:q||F||m,isLoading:L,onSubmit:function(e){return te(void 0,void 0,void 0,(0,u.Z)().mark((function t(){var a,r,o;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=Object.assign({},e),!C){t.next=8;break}return t.next=5,k(Object.assign(Object.assign({},o),w)).unwrap();case 5:r=t.sent,t.next=11;break;case 8:return t.next=10,W(Object.assign(Object.assign({},o),w)).unwrap();case 10:r=t.sent;case 11:n("Success",r.detail),f(!0),setTimeout((function(){O("/".concat(i.o,"/").concat($))}),v.P7),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),c("An error occurred",(null===(a=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===a?void 0:a.detail)||"We couldn't save your post, try again!");case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))},renderForm:function(e,t,n,r){return a.createElement("div",{className:"pl-8 pt-4 pb-3 grid p-fluid"},a.createElement(o.Wi,{label:"Bank Name",name:"bank_name",className:"col-12",control:e,errors:n,required:"Enter Bank Name",leftSpan:2,rightSpan:3,useExplicit:!0,onChange:function(e){E(e.target.value)},formItem:{component:d.o,componentProps:{maxLength:100}}}),a.createElement(o.Wi,{label:"Account No",name:"accno",className:"col-12",control:e,errors:n,required:!0,leftSpan:2,rightSpan:3,useExplicit:!0,onChange:function(e){x(e.target.value)},formItem:{component:d.o,componentProps:{maxLength:100,type:"number"}}}),a.createElement(o.Wi,{label:"Account Name",name:"acc_name",className:"col-12",control:e,errors:n,required:!0,leftSpan:2,rightSpan:3,formItem:{component:d.o,componentProps:{maxLength:100,disabled:!0,value:"".concat(h||"","-").concat(P||"")}}}))}}))},ae=function(e){var t=(0,a.useState)(1),n=(0,s.Z)(t,2),r=n[0],c=n[1],l=(0,a.useState)(v.IV),u=(0,s.Z)(l,2),d=u[0],p=u[1],m=Y({page:r,size:d},{refetchOnMountOrArgChange:!0}),f=m.data,g=m.isFetching,y=K(),h=(0,s.Z)(y,2),E=h[0],b=h[1].isLoading;return a.createElement(o.PS,{pagination:{pageSize:d,loading:g,currentPage:r,total:null===f||void 0===f?void 0:f.length,onChange:function(e,t){c(e),p(t)}},baseRoute:"/".concat(i.o,"/").concat($),description:ee,isLoading:g||b,data:f,deleteAction:function(e){return E(e).unwrap()},newTable:!0,showHeader:!0,navKey:"id",delKey:"id"},a.createElement(o._P,{field:"id",header:"Bank Code",filteringType:"number"}),a.createElement(o._P,{field:"name",header:"Bank Name",filteringType:"text"}),a.createElement(o._P,{field:"acc_no",header:"Account No",filteringType:"text",displayValueGetter:function(e){return null===e||void 0===e?void 0:e.name}}),a.createElement(o._P,{field:"acc_name",header:"Account Name",filteringType:"text",displayValueGetter:function(e){return null===e||void 0===e?void 0:e.name}}))},re=a.createElement(r.AW,{path:$},a.createElement(r.AW,{path:"new",element:a.createElement(ne,null)}),a.createElement(r.AW,{path:":id/edit",element:a.createElement(ne,null)}),a.createElement(r.AW,{index:!0,element:a.createElement(ae,null)})),oe=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},ie="/client/staff/",ce=v.hi.injectEndpoints({overrideExisting:!1,endpoints:function(e){return{listStaff:e.query({query:function(e){var t=e.page,n=e.size;return{url:"".concat(ie,"?page=").concat(t||1,"&page_size=").concat(n||v.IV)}},providesTags:function(e){return e?[].concat((0,y.Z)(null===e||void 0===e?void 0:e.map((function(e){var t=e.id;return{type:v.pJ.STAFFS,id:t}}))),[{type:v.pJ.STAFFS,id:"LIST"}]):[{type:v.pJ.STAFFS,id:"LIST"}]}}),addStaff:e.mutation({query:function(e){return{url:ie,method:"POST",body:e}},invalidatesTags:[{type:v.pJ.STAFFS,id:"LIST"}]}),getStaff:e.query({query:function(e){return"".concat(ie).concat(e)},providesTags:function(e,t,n){return[{type:v.pJ.STAFFS,id:n}]}}),updateStaff:e.mutation({query:function(e){var t=e.id,n=oe(e,["id"]);return{url:"".concat(ie).concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return[{type:v.pJ.STAFFS,id:null===e||void 0===e?void 0:e.id}]}}),deleteStaff:e.mutation({query:function(e){return{url:"".concat(ie).concat(e),method:"DELETE"}},invalidatesTags:function(e){return[{type:v.pJ.STAFFS,id:null===e||void 0===e?void 0:e.id}]}}),getErrorProne:e.query({query:function(){return"error-prone"}})}}}),le=ce.useAddStaffMutation,ue=ce.useDeleteStaffMutation,se=ce.useGetStaffQuery,de=ce.useListStaffQuery,pe=ce.useUpdateStaffMutation,me=(ce.useGetErrorProneQuery,"staff"),fe="Staff",ge=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{l(a.next(e))}catch(t){o(t)}}function c(e){try{l(a.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((a=a.apply(e,t||[])).next())}))},ye=function(e){var t=(0,o.pm)(),n=t.showSuccess,c=t.showError,l=(0,a.useState)(!1),p=(0,s.Z)(l,2),m=p[0],g=p[1],y=(0,r.s0)(),h=(0,r.UO)().id||"",E=!h,b=(0,v.ft)(),S=se(h,{skip:E}),P=S.data,x=S.isLoading,O=k({}),T=(O.data,O.isLoading,le()),C=(0,s.Z)(T,2),w=C[0],N=C[1].isLoading,A=pe(),L=(0,s.Z)(A,2),I=L[0],j=L[1].isLoading;return a.createElement(a.Fragment,null,a.createElement(o.Rm,{baseRoute:"/".concat(i.o,"/").concat(me),description:fe,id:h,data:P,isUpdating:N||j||m,isLoading:x,onSubmit:function(e){return ge(void 0,void 0,void 0,(0,u.Z)().mark((function t(){var a,r,o;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=Object.assign({},e),!E){t.next=8;break}return t.next=5,w(Object.assign(Object.assign({},o),b)).unwrap();case 5:r=t.sent,t.next=11;break;case 8:return t.next=10,I(Object.assign(Object.assign({},o),b)).unwrap();case 10:r=t.sent;case 11:n("Success",r.detail),g(!0),setTimeout((function(){y("/".concat(i.o,"/").concat(me))}),v.P7),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),c("An error occurred",(null===(a=null===t.t0||void 0===t.t0?void 0:t.t0.data)||void 0===a?void 0:a.detail)||"We couldn't save your post, try again!");case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))},renderForm:function(e,t,n){return a.createElement("div",{className:"pl-8 pt-4 pb-3 grid p-fluid"},a.createElement(o.Wi,{label:"Staff Name",name:"name",className:"col-12",control:e,errors:n,required:"Enter Staff Name",leftSpan:2,rightSpan:3,formItem:{component:d.o,componentProps:{maxLength:100}}}),a.createElement(o.Wi,{label:"Mobile Number",name:"mobileno",className:"col-12",control:e,errors:n,required:!0,leftSpan:2,rightSpan:3,formItem:{component:d.o,componentProps:{maxLength:100}}}),a.createElement(o.Wi,{label:"Address",name:"addr",control:e,errors:n,className:"col-12",leftSpan:2,rightSpan:3,formItem:{component:f.g,componentProps:{maxLength:100}}}),a.createElement(o.Wi,{label:"PAN No",name:"panno",className:"col-12",control:e,errors:n,required:!0,leftSpan:2,rightSpan:3,formItem:{component:d.o,componentProps:{maxLength:100}}}))}}))},ve=function(e){var t=(0,a.useState)(1),n=(0,s.Z)(t,2),r=n[0],c=n[1],l=(0,a.useState)(v.IV),u=(0,s.Z)(l,2),d=u[0],p=u[1],m=de({page:r,size:d},{refetchOnMountOrArgChange:!0}),f=m.data,g=m.isFetching,y=ue(),h=(0,s.Z)(y,2),E=h[0],b=h[1].isLoading;return a.createElement(o.PS,{pagination:{pageSize:d,loading:g,currentPage:r,total:null===f||void 0===f?void 0:f.length,onChange:function(e,t){c(e),p(t)}},baseRoute:"/".concat(i.o,"/").concat(me),description:fe,isLoading:g||b,data:f,deleteAction:function(e){return E(e).unwrap()},newTable:!0,showHeader:!0,navKey:"id",delKey:"id"},a.createElement(o._P,{field:"id",header:"Staff Code",filteringType:"number"}),a.createElement(o._P,{field:"name",header:"Staff Name",filteringType:"text"}),a.createElement(o._P,{field:"mobileno",header:"Mobile No",filteringType:"text"}),a.createElement(o._P,{field:"panno",header:"PAN No",filteringType:"text"}))},he=a.createElement(r.AW,{path:me},a.createElement(r.AW,{path:"new",element:a.createElement(ye,null)}),a.createElement(r.AW,{path:":id/edit",element:a.createElement(ye,null)}),a.createElement(r.AW,{index:!0,element:a.createElement(ve,null)})),Ee=function(){var e,t,n,i,c,u,s=(0,v.aC)();null===(n=null===(t=null===(e=s.user)||void 0===e?void 0:e.role[0])||void 0===t?void 0:t.access)||void 0===n||n.map((function(e){return e.name}));return a.createElement(r.Z5,null,(null===(u=null===(c=null===(i=s.user)||void 0===i?void 0:i.role[0])||void 0===c?void 0:c.name)||void 0===u?void 0:u.toLowerCase().includes("admin"))?a.createElement(r.AW,{path:"/",element:a.createElement(o.SV,{navItems:l})},a.createElement(r.AW,{index:!0,element:a.createElement(r.Fg,{to:"client",replace:!0})}),z,V,re,he,a.createElement(r.AW,{path:":page/comming-soon",element:a.createElement(o.hg,null)}),a.createElement(r.AW,{path:"*",element:a.createElement(o.EN,{relative:!0})})):a.createElement(r.AW,{path:"/",element:a.createElement(o.SV,{navItems:l})},a.createElement(r.AW,{path:"*",element:a.createElement(o.Sd,{relative:!0})})))}},1002:function(e,t,n){n.d(t,{g:function(){return c}});var a=n(969),r=n(9459),o=n(4756);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i.apply(this,arguments)}var c=a.memo(a.forwardRef((function(e,t){var n=a.useRef(t),l=a.useRef(0),u=function(e){var t=n.current;t&&o.p7.isVisible(t)&&(l.current||(l.current=t.scrollHeight,t.style.overflow="hidden"),(l.current!==t.scrollHeight||e)&&(t.style.height="",t.style.height=t.scrollHeight+"px",parseFloat(t.style.height)>=parseFloat(t.style.maxHeight)?(t.style.overflowY="scroll",t.style.height=t.style.maxHeight):t.style.overflow="hidden",l.current=t.scrollHeight))},s=a.useMemo((function(){return o.gb.isNotEmpty(e.value)||o.gb.isNotEmpty(e.defaultValue)||n.current&&o.gb.isNotEmpty(n.current.value)}),[e.value,e.defaultValue]);a.useEffect((function(){o.gb.combinedRefs(n,t)}),[n,t]),a.useEffect((function(){e.autoResize&&u(!0)}),[e.autoResize]);var d=o.gb.isNotEmpty(e.tooltip),p=o.gb.findDiffKeys(e,c.defaultProps),m=(0,o.AK)("p-inputtextarea p-inputtext p-component",{"p-disabled":e.disabled,"p-filled":s,"p-inputtextarea-resizable":e.autoResize},e.className);return a.createElement(a.Fragment,null,a.createElement("textarea",i({ref:n},p,{className:m,onFocus:function(t){e.autoResize&&u(),e.onFocus&&e.onFocus(t)},onBlur:function(t){e.autoResize&&u(),e.onBlur&&e.onBlur(t)},onKeyUp:function(t){e.autoResize&&u(),e.onKeyUp&&e.onKeyUp(t)},onInput:function(t){e.autoResize&&u(),e.onInput&&e.onInput(t);var n=t.target;o.gb.isNotEmpty(n.value)?o.p7.addClass(n,"p-filled"):o.p7.removeClass(n,"p-filled")}})),d&&a.createElement(r.u,i({target:n,content:e.tooltip},e.tooltipOptions)))})));c.displayName="InputTextarea",c.defaultProps={__TYPE:"InputTextarea",autoResize:!1,tooltip:null,tooltipOptions:null,onInput:null}}}]);
//# sourceMappingURL=892.1dafb75b.chunk.js.map